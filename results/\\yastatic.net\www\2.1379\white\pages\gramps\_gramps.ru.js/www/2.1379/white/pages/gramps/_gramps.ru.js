if(window.home&&home.mark){home.mark.add("main-js_start");}function getcss(t){setTimeout(function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head").item(0).appendChild(e)},0)}function cp(t,e,n){var i="clck/lid="+t;Lego.params.statRoot&&(i+="/sid="+Lego.params.msid);try{n=n||{},n.host=Lego.params?Lego.params["click-host"]:null,Lego.c(i,e,n)}catch(o){}}function cpr(t,e,n){try{Lego.cred(t,e,n)}catch(i){}}function cpt(t,e){t+=(document.getElementById("form").text.value?".full":".empty")+"/u="+(new Date).getTime(),cp(t,e)}function c0(t){try{Lego.c(t)}catch(e){}}function csh(t,e){try{cp(t,e)}catch(n){}}function csh_ifmsid(t,e){Lego.params.statRoot&&csh(t,e)}function cpa(t){return t&&"undefined"!=typeof Lego.params.msid?"onmousedown=\"Lego.cp('132','71946','"+t+"',this)\"":""}function statRedirect(t,e,n){var i,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===n?(i=$("<form />"),o=function(){var e,n,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(n=e[2].split("&"),o=n.length;o--;)r=n[o].split("="),i.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void i.attr({action:o,target:n}).appendTo($("body"))[0].submit()):void(location.href=t)}function statRedirect(t,e,n){var i,o,s=e&&Lego.params.statRoot;return s&&(t=BEM.blocks["i-global"].param("click-href")+"redir/dtype=clck/lid="+e+"/sid="+Lego.params.msid+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(t.match(/^http/)?t:location.protocol+"//"+location.host+(t.match("^/")?t:"/"+t)))),"_blank"===n?(i=$("<form />"),o=function(){var e,n,o,r;if(s)return t;if(e=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),e&&e[2])for(n=e[2].split("&"),o=n.length;o--;)r=n[o].split("="),i.append($("<input/>").attr({type:"hidden",name:r[0],value:r[1]}));return e?e[1]:t}(),void i.attr({action:o,target:n}).appendTo($("body"))[0].submit()):void(location.href=t)}function CAWBrowser(){var t,e=[],n=6,i=35;for(t=n;i>t;t++)e[t]=!1;var o=navigator.userAgent;this.msie=o&&parseFloat(navigator.appVersion)>=4&&o.indexOf("Opera")<0&&o.indexOf("MSIE 4")<0&&o.indexOf("MSIE")>=0,this.win=o&&(o.indexOf("Windows 95")>=0||o.indexOf("Windows NT")>=0||o.indexOf("Windows 98")>=0),this.mac=navigator.platform&&-1!==navigator.platform.indexOf("Mac"),this.opera7=-1!==o.indexOf("Opera")&&window.opera&&document.readyState?1:0,this.gecko=-1!==o.toLowerCase().indexOf("gecko")&&-1===o.indexOf("safari");var s=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(s)for(t=n;i>t;t++)e[t]=s,e[t]=parseInt(e[t].description.substring(e[t].description.indexOf(".")-2),10)>=t;else if(this.msie&&this.win&&!this.mac)for(t=n;i>t;t++)try{e[t]=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+t)}catch(r){}for(this.other=!((this.gecko||this.msie)&&this.win&&!this.mac),this.flash=0,t=n;i>t;t++)e[t]&&(this.flash=t);this.full_version=this.flash+"",s&&s.version&&(this.full_version=s.version+"")}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e(t):e(t)}("undefined"!=typeof global?global:this,function(t){var e=function(t){};if(e.version="1.0.29",e.isDebug=!1,e.isArray=function(t){return t instanceof Array},e.isArrayLike=function(t){return e.isObject(t)&&!e.isArray(t)&&"length"in t},e.isElement=function(t){try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},e.isFunction=function(){for(var t=0,e=arguments.length;e>t;t++)if(!(arguments[t]instanceof Function))return!1;return!0},e.isObject=function(t){return"object"==typeof t},e.isString=function(){for(var t=0,e=arguments.length;e>t;t++)if("string"!=typeof arguments[t])return!1;return!0},e.stringf=function(t,e){var n=Array.prototype.slice.call(arguments,1);return t.replace(/%s/g,function(){return n.shift()||""})},"undefined"==typeof JSON)throw new Error("JSON is not supported");e.JSON=JSON,e.console={slog:function(t){this.log(e.stringf.apply(this,arguments))},log:function(e){"undefined"!=typeof debug?debug(e):t.console&&t.console.log&&t.console.log(e)},error:function(t){throw new Error(t)},dir:function(t){this.log(e.JSON.stringify(t))}},e.log=e.console.log,e.error=e.console.error;var n=/^https?:\/\/\S+/i;e.isURL=function(t){return"string"!=typeof t&&e.error("isURL expects string parameter instead "+typeof t),n.test(t)};var i=Array.prototype.filter?function(t,e){return t.filter(e)}:function(t,n){var i=[];return e.each(t,function(t,e){n(t,e,this)&&i.push(t)}),i};e.filter=function(t,n){return e.isArray(t)||e.error("first argument is expected to be an array instead of "+typeof t),e.isFunction(n)||e.error("second argument is expected to be a function instead of "+typeof n),i(t,n)},e.forEach=function(t,e,n){var i,o;for(n=n||t,i=0,o=t.length;o>i;i++)e.call(n,t[i],i,t);return this},e.indexOf=function(t,e,n){if(n=n||0,!(t instanceof Array))throw new Error("Function expects array as first argument");if("indexOf"in Array.prototype)return t.indexOf(e,n);for(var i=0,o=t.length;o>i;i++)if(t[i]===e&&i>=n)return i;return-1},e.map=function(t,n){var i=[];if(e.isArray(t)&&n instanceof Function)if(x.isFunction(t.map))i=t.map(n);else for(var o=0,s=t.length;s>o;o++)i[o]=n(t[o],o,t);return i},function(){var t=Array.prototype.some?function(t,e){return t.some(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(e(t[n],n,t))return!0;return!1};e.some=function(n,i){return e.isArray(n)||e.error("first argument is expected to be an array instead of "+typeof n),e.isFunction(i)||e.error("second argument is expected to be a function instead of "+typeof i),t(n,i)}}();var o={};e.each=o.each=function(t,n,i){if(e.isArray(t))e.forEach.apply(this,arguments);else{var o,s=i||t;for(o in t)t.hasOwnProperty(o)&&n.call(s,t[o],o,t)}return this};var s,r;"function"==typeof Object.create?s=Object.create:(r=function(){},s=function(t){return r.prototype=t,new r}),e.beget=function(t,e){var n=s(t);for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n},e.getRandom=function(t){return Math.floor(Math.random()*(t||1e3))},e.getElementId=function(t){e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t);var n=t.getAttribute("id");return n||(n="_"+e.getRandom(1e16),t.setAttribute("id",n)),n};var a=function(t){for(var e=document.all,n=[],i=0,o=e.length;o>i;++i)"string"==typeof e[i].getAttribute(t)&&n.push(e[i]);return n};e.getElementsByAttr=function(e){var n=[],i=arguments[1]||t.document||null;if("getAttribute"in i&&i.getAttribute(e)&&n.push(i),i&&i.querySelectorAll)try{n=n.concat(Array.prototype.slice.call(i.querySelectorAll("["+e+"]")))}catch(o){}return n.length||(n=n.concat(a(e))),n};var u=(new RegExp).compile(/^\s+|\s+$/g);e.trim=function(t){var n=typeof t;return"string"!==n&&e.error("Argument must be string but"+n+" passed"),t.trim instanceof Function?t.trim():t.replace(u,"")},e.stripSpaces=function(t){return t.split(" ").join("")},e.bind=function(t,e){return function(){return t.apply(e,arguments)}};e.query=function(t,e){for(var n=e||this||{},i=t.split("."),o=0;n[i[o]];)n=n[i[o++]];return o===i.length?n:null},e.getJPathValue=function(t,n){return x.bind(e.query,t)(n)},e.getObject=function(t){return t.beget=function(t){return e.beget(this,t)},e.beget(t)},e.bem={getAttributes:function(t){if(!t)return"";var e,n="";for(e in t)if(t.hasOwnProperty(e)){var i=t[e];(i||0===i)&&(i=i.toString().replace(/"/g,"&quot;"),n+=" "+e+'="'+i+'"')}return n},getClassname:function(t,e){var n,i=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),i)for(n in i)i.hasOwnProperty(n)&&(i[n]||0===i[n])&&(o+=" "+t+"_"+n+"_"+i[n]);return o},getBEMParams:function(t){return JSON.stringify(t).replace(/"/g,"&quot;")}},e.create=function(t){var e=function(){};return e.prototype=t,new e},e.constructURL=function(t,e){var n,i="",o=[],s=t.match(/((?:https?\:)?(?:\/)?\/[^?]+)\?([^#]+)?(\#\S+)?/),r=s&&s[3]?s[3]:"";if(s&&s[2])for(var a=s[2].split("&"),u=a.length;u--;)o.push(a[u]);for(n in e)e.hasOwnProperty(n)&&o.push(n+"="+e[n]);return i=s?s[1]+"?"+o.join("&")+r:t+"?"+o.join("&")+r};var c=/([a-z]{1})([A-Z]{1})/g;e.decamelCase=function(t){return t.replace(c,function(t,e,n){return e+"-"+n.toLowerCase()})},e.data=function(t,n){return e.isElement(t)||e.error("nodeElement expected as first argument instead of "+typeof t),t.getAttribute("data-"+n)},e.ComponentBase={data:function(t){var n=this.element;return n?e.data(n,t):void 0},setId:function(t){return this.id=t,this},baseInit:function(t,n){var i=this;this.element=n,e.each(e.dataset(n),function(t,e){i[x.decamelCase(e)]=t})}},e.Component=function(){var t=[],n=[],i={},o="data-xapp";return{extend:function(o){var s,r=t.length;if(e.isObject(o))s=e.beget(e.ComponentBase,o);else if(e.isString(o)&&e.isFunction(arguments[1]))s=e.beget(e.ComponentBase,{id:o,init:arguments[1]});else{if(!e.isString(o)||!e.isArray(arguments[1]))throw new Error('Unknown definition structure, try to use extend("yourName", function() { ... init code ... })');var a=arguments[1];s=e.beget(e.ComponentBase,{id:o,init:function(){var t=e.filter(a,function(t){return e.isString(t)});t=e.map(t,function(t){if(!n[t])throw new Error("Service "+t+" hasnt defined");return n[t]()});var i=e.filter(a,function(t){return e.isFunction(t)});if(i.length>1)throw new Error("Too much declaration functions");i[0].apply(this,t)}})}return s.id||e.error("extend method expects id field in description object"),t.push(s),i[s.id]=r,t[r]},factory:function(t,e){n[t]=e},initByHTML:function(t){var n=t||document,i=this,s=e.getElementsByAttr(o,n);return e.forEach(s,function(t){var n=e.data(t,"xapp");e.forEach(n.split(" "),function(n){i.initById(n,e.getElementId(t),t)})}),this},initById:function(e,n,o){var s=e in i?t[i[e]]:null;s&&("undefined"!=typeof n&&s.setId(n),s.baseInit(n,o),s.init(n))}}}();var l=/-([\da-z])/gi;e.camelCase=function(t){return t.replace(l,function(t,e){return e.toUpperCase()})},e.dataset=function(t){var n={};return e.isElement(t)&&(t.dataset&&"hasOwnProperty"in t.dataset&&e.isFunction(t.dataset.hasOwnProperty)?n=t.dataset:e.forEach(t.attributes,function(t){0===t.name.indexOf("data-")&&(n[x.camelCase(t.name.substr(5))]=t.value)})),n},e.generateId=function(){return String(Math.random()).substr(2)},e.ns=function(t,e,n){return t[e]||(t[e]={}),"undefined"!=typeof n&&n.call(t[e]),this},e.extend=function(t,e){var n=function(){};t.superclass=n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e)},e.Interface=function(t,n){var i=this;2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected exactly 2"),this.methods=[],this.name=t,e.forEach(n,function(t){"string"!=typeof t&&e.error("Interface constructor expects method names to be passed in as a string"),i.methods.push(t)})},e.Interface.ensureImplements=function(t,n){return 2!==arguments.length&&e.error("Interface constructor called with "+arguments.length+"parameters, but expected at least 2"),e.forEach(n,function(n){n.constructor!==e.Interface&&e.error("Function Interface.ensureImplements expects arguments two and above to be instances of Interface."),e.forEach(n.methods,function(i){t[i]&&"function"==typeof t[i]||e.error("Function Interface.ensureImplements: object does not implement the "+n.name+" interface. Method "+i+" was not found.")})}),!0},e.View=function(t){this.templates=t&&t.templates?e.beget(t.templates):{},this.re={parse:this.re.parse,rule:this.re.rule}},e.View.prototype={templates:{},re:{parse:/\[\%\s+([^%]+)\s+\%\]/g,rule:/:/},setParseRe:function(t){this.re.parse=t},getCustomRender:function(){var t="undefined"!==arguments[0]?arguments[0].split(this.re.rule):null;return t&&2===t.length?this.parseRules[t[0]]&&this.parseRules[t[0]].call(this,t[1]):void 0},parseRules:{l10n:function(t){return function(n){return e.isDebug&&!n.l10n(t)&&e.console.error("There is no translation for "+t),n.l10n?n.l10n(t):t}},jpath:function(t){return function(n){return e.getJPathValue(n,t)||""}},view:function(t){var e=this;return function(n){return e.get(t,n)}},bem:function(t){t=t.split(".");var n=t.pop(),i=t.pop(),o=t.pop();switch(n){case"class":return function(t){return e.bem.getClassname(i,(o?t[o]:t)||{})};case"attrs":return function(t){return e.bem.getAttributes(t[i||"attrs"])};case"js":return function(t){return e.bem.getBEMParams(t[i||"js"]||{})}}}},ruleFunction:function(t,n,i){var o=this;return this.getCustomRender(t)||function(s){var r=s&&s[t]||s&&s.views&&s.views.get(t,s)||"";return r||(r=i[t]?o.getContent(i[t],s):n?n[t]:""),e.isDebug&&!r&&e.console.log("Undefined variable "+t),r||""}},getContent:function(t,n){var i="";return i=e.isArray(t)?e.map(t,function(t){return"string"==typeof t?t:t(n)}).join(""):e.isFunction(t)?t(n):t.toString()},get:function(t,e){var n=this,i=e&&e.views?e.views.templates[t]:this.templates[t];return i?n.getContent(i,e):""}},e.View.prototype.let=function(t,n,i){var o=this.templates[t]=[],s=this,r=0;return e.isFunction(n)?this.templates[t]=n:(n.replace(this.re.parse,function(t,e,a){o.push(n.substr(r,a-r),s.ruleFunction(e,i,s.templates)),r=a+t.length}),r<n.length&&o.push(n.substr(r))),this},e.views=new e.View,e.getViewsForLangs=function(t,e){var n={},i=this;return t.forEach(function(t){var o;if(e){if(!(t in e))throw new Error('No lang "'+t+'" in base views.');o=e[t]}n[t]=new i.View(o)}),n},e.toArray=function(t){return Array.prototype.slice.call(t)};var h={},d={};return e.amd={define:function(t,e,n){return n=n||!0,h[t]=e,n&&(d[t]=!0),this},require:function(){var t=e.toArray(arguments).slice(0,arguments.length-1),n=arguments[arguments.length-1];return t=e.map(t,function(t){if(!h[t])throw new Error("Unmet dependency:"+t);return d[t]?(h[t]=e.isFunction(h[t])?h[t]():h[t],h[t]):h[t]()}),n.apply(this,t),this}},e.debounce=function(t,e,n){var i;return function(){var o=this,s=arguments,r=function(){i=null,n||t.apply(o,s)},a=n&&!i;clearTimeout(i),i=setTimeout(r,e),a&&t.apply(o,s)}},e.Set=function(){this.items=[]},e.Set.prototype={add:function(t){return this.has(t)||this.items.push(t),this},has:function(t){return-1!==x.indexOf(this.items,t)},remove:function(t){var e;return this.has(t)&&(e=this.items.splice(x.indexOf(this.items,t),1)),e},removeFirst:function(){var t;return this.isEmpty()||(t=this.items.splice(0,1)),t},iterate:function(t){for(var e=0,n=this.items.length;n>e;e++)t(this.items[e],e,this.items);return this},size:function(){return this.items.length},isEmpty:function(){return 0===this.items.length}},e.range=function(t,e){var n=t.split("..."),i=0,o=0;for(n[0]&&!isNaN(n[0])&&(i=n[0]),n[1]&&!isNaN(n[1])&&(o=n[1]);o>i;)e(i++)},"function"==typeof define&&define.amd&&define("franky",[],function(){return e}),t.x=t.franky=e,e}),$(function(){x.Component.initByHTML()}),function(t){function e(t){var e=r(t);if(l)for(var n,i=0;n=p[i++];)t.hasOwnProperty(n)&&e.push(n);return e}function n(n,i,o){function s(e,o){var s=function(){var t=this.__base;this.__base=s.__base;var e=o.apply(this,arguments);return this.__base=t,e};return s.__base=n[e]?n[e]:"__constructor"===e?i.__self.__parent:t.noop,s}for(var r,a,u=e(o),l=0,h=u.length;h>l;)"__self"!==(r=u[l++])&&(a=o[r],i[r]=c(a)&&a.toString().indexOf(".__base")>-1?s(r,a):a)}function i(e,n){for(var i,o=1;i=e[o++];)n?c(i)?t.inheritSelf(n,i.prototype,i):t.inheritSelf(n,i):n=c(i)?t.inherit(e[0],i.prototype,i):t.inherit(e[0],i);return n||e[0]}var o=function(){},s=Object.create||function(t){var e=function(){};return e.prototype=t,new e},r=Object.keys,a=t.extend,u=Array.isArray,c=t.isFunction,l=!0,h={toString:""};for(var d in h)h.hasOwnProperty(d)&&(l=!1);var p=l?["toString","valueOf"]:null;t.inherit=function(){var t=arguments,e=u(t[0]),r=e||c(t[0]),l=r?e?i(t[0]):t[0]:o,h=t[r?1:0]||{},d=t[r?2:1],p=h.__constructor||r&&l.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:r?function(){return l.apply(this,arguments)}:function(){};if(!r)return p.prototype=h,p.prototype.__self=p.prototype.constructor=p,a(p,d);a(p,l),p.__parent=l;var f=l.prototype,m=p.prototype=s(f);return m.__self=m.constructor=p,h&&n(f,m,h),d&&n(l,p,d),p},t.inheritSelf=function(){var t=arguments,e=u(t[0]),o=e?i(t[0],t[0][0]):t[0],s=t[1],r=t[2],a=o.prototype;return s&&n(a,a,s),r&&n(o,o,r),o},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,n="__"+Number(new Date),i=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return i();var o="uniqueID"in t?"uniqueID":n;return e||o in t?t[o]:t[o]=i()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",n=function(e,n){return t.identify(e)+(n?t.identify(n):"")},i={buildEventName:function(t){return t},on:function(i,o,s,r,a){if("string"==typeof i){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var u,c=n(s,r),l=this[e]||(this[e]={}),h=i.split(" "),d=0;i=h[d++];)if(i=this.buildEventName(i),u=l[i]||(l[i]={ids:{},list:{}}),!(c in u.ids)){var p=u.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,u.ids[c]=p.last=f}}else{var m=this;t.each(i,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,n,i){return this.on(t,e,n,i,{one:!0})},un:function(i,o,s){if("string"==typeof i||"undefined"==typeof i){var r=this[e];if(r)if(i){for(var a,u=i.split(" "),c=0;i=u[c++];)if(i=this.buildEventName(i),a=r[i])if(o){var l=n(o,s),h=a.ids;if(l in h){var d=a.list,p=h[l],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[l]}}else delete this[e][i]}else delete this[e]}else{var _=this;t.each(i,function(t,e){_.un(t,e,s)})}return this},trigger:function(n,i){var o,s=this,r=s[e];if("string"==typeof n?n=t.Event(s.buildEventName(o=n)):n.type=s.buildEventName(o=n.type),n.target||(n.target=s),r&&(r=r[n.type]))for(var a,u=r.list.first;u;)n.data=u.data,a=u.fn.call(u.ctx||s,n,i),"undefined"!=typeof a&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())),u.special&&u.special.one&&s.un(o,u.fn,u.ctx),u=u.next;return this}};t.observable=t.inherit(i,i)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var n=this,i=t.call(arguments,1);return function(){return n.apply(e,i.concat(t.call(arguments)))}})}(),function(t,e){function n(t,e,n){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(n?"_"+n:"")}function i(t,e,i){if(u(t))return void(e[n(i,"*","*")]=t);var o,s,r;for(o in t)if(c(t,o))if(r=t[o],u(r))e[n(i,o,"*")]=r;else for(s in r)c(r,s)&&(e[n(i,o,s)]=r[s])}function o(t,e){return e?Array.isArray(e)?function(n){for(var i=0,o=e.length;o>i;)if(n.hasMod(t,e[i++]))return!0;return!1}:function(n){return n.hasMod(t,e)}:function(e){return e.hasMod(t)}}function s(t){t.onSetMod&&(i(t.onSetMod,t),delete t.onSetMod);var e,n;if(t.onElemSetMod){for(e in t.onElemSetMod)c(t.onElemSetMod,e)&&(n=t.onElemSetMod[e],i(n,t,e));delete t.onElemSetMod}}var r=[],a=t.inherit,u=t.isFunction,c=Function.prototype.call.bind(Object.prototype.hasOwnProperty),l={},h={};this.BEM=a(t.observable,{__constructor:function(t,e,n){var i=this;i._modCache=t||{},i._processingMods={},i._params=e,i.params=null,n!==!1?i._init():i.afterCurrentEvent(function(){i._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(this.changeThis(t,e))},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).__self.trigger(t,e),this},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,n,i){var o=arguments.length,s=!1;1==o?(i="",n=t,t=e,s=!0):2==o&&("string"==typeof t?(i=n,n=t,t=e):(i="",s=!0));var r=this.getMod(t,n)===i;return s?!r:r},getMod:function(t,e){var n=typeof t;if("string"===n||"undefined"===n){e=t||e;var i=this._modCache;return e in i?i[e]:i[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,n){return this._extractModVal(t,e,n)},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,i=[].slice.call(arguments,e?1:0);return i.length?i.reduce(function(t,e){return e in n&&(t[e]=n[e]),t},{}):n},setMod:function(n,i,o){"undefined"==typeof o&&(o=i,i=n,n=e);var s=this;if(!n||n[0]){var r=(n&&n[0]?t.identify(n[0]):"")+"_"+i;if(this._processingMods[r])return s;var a,u=n?s._getElemMod(i,n,a=s.__self._extractElemNameFrom(n)):s.getMod(i);if(u===o)return s;this._processingMods[r]=!0;var c=!0,l=[i,o,u];n&&l.unshift(n),[["*","*"],[i,"*"],[i,o]].forEach(function(t){c=s._callModFn(a,t[0],t[1],l)!==!1&&c}),!n&&c&&(s._modCache[i]=o),c&&s._afterSetMod(i,o,u,n,a),delete this._processingMods[r]}return s},_afterSetMod:function(t,e,n,i,o){},toggleMod:function(t,n,i,o,s){"string"==typeof t&&(s=o,o=i,i=n,n=t,t=e),"undefined"==typeof o?o="":"boolean"==typeof o&&(s=o,o="");var r=this.getMod(t,n);return(r==i||r==o)&&this.setMod(t,n,"boolean"==typeof s?s?i:o:this.hasMod(t,n,i)?o:i),this},delMod:function(t,n){return n||(n=t,t=e),this.setMod(t,n,"")},_callModFn:function(t,i,o,s){var r=n(t,i,o);return this[r]?this[r].apply(this,s):e},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){}},t.extend(this.BEM,{_name:"i-bem",blocks:l,decl:function(n,i,r){"string"==typeof n?n={block:n}:n.name&&(n.block=n.name),s(i||(i={}));var c=l[n.baseBlock||n.block]||this;if(n.modName){var h=o(n.modName,n.modVal);t.each(i,function(t,n){u(n)&&(i[t]=function(){var o;if(h(this))o=n;else{var s=c.prototype[t];s&&s!==i[t]&&(o=this.__base)}return o?o.apply(this,arguments):e})})}if(r&&"boolean"==typeof r.live){var d=r.live;r.live=function(){return d}}var p,f=c;return n.baseMix&&(f=[f],n.baseMix.forEach(function(t){f.push(l[t])})),n.block==c._name?(p=a.self(f,i,r))._processLive(!0):((p=l[n.block]=a(f,i,r))._name=n.block,delete p._liveInitable),p},declMix:function(t,e,n){return s(e||(e={})),t=l[t]=a(e,n)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new l[t.block](t.mods,e)},getName:function(){return this._name},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==r.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=r.length;t&&r.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,n=e?0:1,i=arguments.length;for(e&&(t=this);i>n;)delete t[arguments[n++]];return this},channel:function(n,i){return"boolean"==typeof n&&(i=n,n=e),n||(n="default"),i?void(h[n]&&(h[n].un(),delete h[n])):h[n]||(h[n]=new t.observable)}}))}(jQuery),function(t,e,n){function i(t){var e=typeof t;return"string"===e||"number"===e||"boolean"===e}function o(t,e,n){null!=e&&e!==!1&&(n.push(u,t),e!==!0&&n.push(u,e))}function s(t,e,n,i){i.push(t),o(e,n,i)}function r(t,e,n,i,r){s(t,a,a,r),r.push(c,e),o(n,i,r)}var a,u="_",c="__",l="[a-zA-Z0-9-]+";t.INTERNAL={NAME_PATTERN:l,MOD_DELIM:u,ELEM_DELIM:c,buildModPostfix:function(t,e,n){var i=n||[];return o(t,e,i),n?i:i.join("")},buildClass:function(t,e,n,o,u){if(i(n)?i(o)||(u=o,o=n,n=e,e=a):"undefined"!=typeof n?(u=n,n=a):e&&"string"!=typeof e&&(u=e,e=a),!e&&"undefined"==typeof n&&!u)return t;var c=u||[];return e?r(t,e,n,o,c):s(t,n,o,c),u?c:c.join("")},buildClasses:function(t,i,o,a){i&&"string"!=typeof i&&(a=o,o=i,i=n);var u=a||[];return i?r(t,i,n,n,u):s(t,n,n,u),o&&e.each(o,function(e,n){n&&(u.push(" "),i?r(t,i,e,n,u):s(t,e,n,u))}),a?u:u.join("")}}}(BEM,jQuery),BEM.decl("framebuster",{onSetMod:{js:{inited:function(){var t=this._getWindow();if(t.top.location!==t.location){var e=this.matchDomain(t.document.referrer);e&&!this.isInWhitelist(e)&&(t.top.location=t.location)}}}},matchDomain:function(t){if(!t)return null;var e=t.match(/^https?:\/\/([^:\/\s]+)\/?.*/);return e&&e[1]},isInWhitelist:function(t){if(!t)return!0;var e=this.defaultWhitelist().concat(this.params.whitelist||[]);return e.some(function(e){return"string"==typeof e?e===t||-1!==t.indexOf(e,t.length-e.length):!!e.test(t)})},defaultWhitelist:function(){return[]},_getWindow:function(){return window}}),x.ns(this,"ya"),x.ns(this,"home"),function(t,e,n){function i(t,n){var i=t[0];e.each(a(i),function(r,a){s(a,i,r,n);var u=f[a.uniqId];u?u.domElem.index(i)<0&&(u.domElem=u.domElem.add(t),e.extend(u._params,a)):o(r,t,a)})}function o(t,i,o,r,u){"boolean"==typeof o&&(u=r,r=o,o=n);var c=i[0];o=s(o||a(c)[t],c,t);var l=o.uniqId;if(f[l])return f[l]._init();p[l]=p[l]?p[l].add(i):i;var h=c.parentNode;h&&11!==h.nodeType||e.unique(p[l]);var d=v[t]||C.decl(t,{},{live:!0});if(!(d._liveInitable=Boolean(d._processLive()))||r||o.live===!1){r&&i.addClass("i-bem");var m=new d(p[l],o,Boolean(r));return delete p[l],u&&u.apply(m,M.call(arguments,4)),m}}function s(t,n,i,o){(t||(t={})).uniqId||(t.uniqId=(t.id?i+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(n),r=m[s]||(m[s]={});return r[i]||(r[i]=t),t}function r(t,e,n){var i=t.find(e);return n?i:i.add(t.filter(e))}function a(t){var n=e.identify(t);return m[n]||(m[n]=u(t))}function u(t){var n,i,o=t.getAttribute("data-bem");return o?JSON.parse(o):(n=t.onclick||t.ondblclick,n||"body"!=t.tagName.toLowerCase()||(i=e(t),o=i.attr("onclick")||i.attr("ondblclick"),o&&(n=new Function(o))),n?n():{})}function c(t){delete m[e.identify(t)]}function l(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}var h=e(window),d=e(document),p={},f={},m={},_={},g={},v=t.blocks,b=t.INTERNAL,y=b.NAME_PATTERN,w=b.MOD_DELIM,k=b.ELEM_DELIM,x=b.buildModPostfix,E=b.buildClass,M=Array.prototype.slice,S=Array.prototype.reverse;e.fn.bem=function(t,e){return o(t,this,e,!0)};var C=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,n,i){var o=this;o.domElem=t,o._eventNameCache={},o._elemCache={},f[o._uniqId=n.uniqId||e.identify(o)]=o,o._needSpecialUnbind=!1,o.__base(null,n,i)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){return this._findBlocks("find",t,e,!0)},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,i,s,r){if(!this.domElem)return[];s||(s=i,i=n);var a=i?"string"==typeof i?this.findElem(i):i:this.domElem,u="string"==typeof s,c=u?s:s.block||s.blockName,l="."+(u?E(c):E(c,s.modName,s.modVal))+(r?":first":""),h=a.filter(l);if(t&&(h=h.add(a[t](l))),r)return h[0]?o(c,h.eq(0),!0):null;var d=[],p={};return e.each(h,function(t,n){var i=o(c,e(n),!0);p[i._uniqId]||(p[i._uniqId]=!0,d.push(i))}),d},bindToDomElem:function(t,n,i){var o=this;return i?t.bind(o._buildEventName(n),function(t){return(t.data||(t.data={})).domElem=e(this),i.apply(o,arguments)}):e.each(n,function(e,n){o.bindToDomElem(t,e,n)}),o},bindToDoc:function(t,e){return this._needSpecialUnbind=!0,this.bindToDomElem(d,t,e)},bindToWin:function(t,e){var n,i,o=e;return"resize"===t&&(e=function(){var t=h.height(),e=h.width();n===t&&i===e||(n=t,i=e,o.apply(this,arguments))}),this._needSpecialUnbind=!0,this.bindToDomElem(h,t,e)},bindTo:function(t,n,i){return!n||e.isFunction(n)?(i=n,n=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,n,i)},unbindFromDomElem:function(t,e){return t.unbind(this._buildEventName(e)),this},unbindFromDoc:function(t){return this.unbindFromDomElem(d,t)},unbindFromWin:function(t){return this.unbindFromDomElem(h,t)},unbindFrom:function(t,e){return e?"string"==typeof t&&(t=this.elem(t)):(e=t,t=this.domElem),this.unbindFromDomElem(t,e)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var n="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+n,e[t];var i=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+i:i+"_"+t}).join("")+n,e[t]},trigger:function(t,e){return this.__base(t=this.buildEvent(t),e).domElem&&this._ctxTrigger(t,e),this},_ctxTrigger:function(t,n){var i=this,o=_[i.__self._buildCtxEventName(t.type)],s={};o&&i.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var u=e.identify(r,!0);if(u){if(s[u])break;var c=o.ctxs[u];c&&(e.each(c,function(e,o){o.fn.call(o.ctx||i,t,n)}),a--),s[u]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:n);return e||(o.length?o.forEach(function(t){i[t]=s[t]}):i=s),s},setMod:function(t,n,i){if(t&&"undefined"!=typeof i&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,n,i)}),o}return this.__base(t,n,i)},_extractModVal:function(t,e,n){var i,o=(e||this.domElem)[0];return o&&(i=o.className.match(this.__self._buildModValRE(t,n||e))),i?i[2]:""},_extractMods:function(t,e){var n={},i=!t.length,o=0;return((e||this.domElem)[0].className.match(this.__self._buildModValRE("("+(i?y:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=(t=t.trim()).lastIndexOf(w),i=t.substr(0,e-1).lastIndexOf(w);n[t.substr(i+1,e-i-1)]=t.substr(e+1),++o}),o<t.length&&t.forEach(function(t){t in n||(n[t]="")}),n},_afterSetMod:function(t,n,i,o,s){if(!this._isDestructing){var r=this.__self,a=r._buildModClassPrefix(t,s),u=r._buildModValRE(t,s),c=""===n;(o||this.domElem).each(function(){var t=this.className;t.indexOf(a)>-1?this.className=t.replace(u,c?"":"$1"+a+n):c||e(this).addClass(a+n)}),s&&this.dropElemCache(s,t,i).dropElemCache(s,t,n)}},findElem:function(t,e,n,i){arguments.length%2?(i=n,n=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=x(n,i),a=[],u=e.map(function(t){return a.push("."+E(o,t,n,i)),t+s}),c=1===u.length,l=r(t,a.join(","));return t===this.domElem&&a.forEach(function(t,n){(this._elemCache[u[n]]=c?l:l.filter(t)).__bemElemName=e[n]},this),l},_elem:function(t,e,n){return this._elemCache[t+x(e,n)]||this.findElem(t,e,n)},elem:function(t,n,i){if(n&&"string"!=typeof n)return n.__bemElemName=t,n;if(t.indexOf(" ")<0)return this._elem(t,n,i);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,n,i))},this),o},dropElemCache:function(t,e,n){if(t){var i=x(e,n);t.indexOf(" ")<0?delete this._elemCache[t+i]:t.split(" ").forEach(function(t){delete this._elemCache[t+i]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),u(t[0])[E(this.__self.getName(),e)]||{}},elemify:function(t,n){return(t=e(t)).__bemElemName=n,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,n){return this.__self.buildSelector(t,e,n)},destruct:function(t){var n=this,i=n.__self;n._isDestructing||(n._isDestructing=!0,n._needSpecialUnbind&&i.doc.add(i.win).unbind("."+n._uniqId),n.dropElemCache().domElem.each(function(t,n){var i=a(n);e.each(i,function(t,e){var i=f[e.uniqId];i?i._isDestructing||l(i,n):delete p[e.uniqId]}),c(n)}),t||n.domElem.remove(),delete f[n.un()._uniqId],delete n.domElem,delete n._elemCache,
n.__base())}},{scope:null,doc:d,win:h,_processLive:function(t){var e=this._liveInitable;if("live"in this){var n="undefined"==typeof e;if(n^t){e=this.live()!==!1;var i=this.getName(),o=this.live;this.live=function(){return this.getName()===i?e:o.apply(this,arguments)}}}return e},init:function(t,n,o){!t||e.isFunction(t)?(o=n,n=t,t=d):"string"==typeof t&&(t=e(t));var s=e.identify();return r(t,".i-bem").each(function(){i(e(this),s)}),n&&this.afterCurrentEvent(function(){n.call(o||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,i,o){"boolean"!=typeof t&&(o=i,i=t,t=n),S.call(r(i,".i-bem",o)).each(function(t,n){var i=a(this);e.each(i,function(t,e){if(e.uniqId){var i=f[e.uniqId];i?l(i,n):delete p[e.uniqId]}}),c(this)}),t||(o?i.empty():i.remove())},update:function(t,e,n,i){return this.destruct(t,!0),this.init(t.html(e),n,i)},replace:function(t,n){return this.destruct(!0,t),this.init(e(n).replaceAll(t))},append:function(t,n){return this.init(e(n).appendTo(t))},prepend:function(t,n){return this.init(e(n).prependTo(t))},before:function(t,n){return this.init(e(n).insertBefore(t))},after:function(t,n){return this.init(e(n).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,n,i,o){var s=this;if(n.indexOf(" ")>-1)n.split(" ").forEach(function(e){s._liveClassBind(t,e,i,o)});else{var r=g[n],a=e.identify(i);r||(r=g[n]={},d.bind(n,s.changeThis(s._liveClassTrigger,s))),r=r[t]||(r[t]={uniqIds:{},fns:[]}),a in r.uniqIds||(r.fns.push({uniqId:a,fn:s._buildLiveEventFn(i,o)}),r.uniqIds[a]=r.fns.length-1)}return this},_liveClassUnbind:function(t,n,i){var o=g[n];if(o)if(i){if(o=o[t]){var s=e.identify(i);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);a>r;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var n=g[t.type];if(n){var i=t.target,o=Object.keys(n);do for(var s,r=" "+i.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){var u=!1;if(n[s].fns.forEach(function(n){n.fn.call(e(i),t)===!1&&(u=!0)}),u&&t.preventDefault(),u||t.isPropagationStopped())return;o.splice(--a,1)}while(o.length&&(i=i.parentNode))}},_buildLiveEventFn:function(t,n){var i=this;return function(s){var r=[i._name,((s.data||(s.data={})).domElem=e(this)).closest(i.buildSelector()),!0],a=o.apply(null,n?r.concat([t,s]):r);return a&&!n&&t?t.apply(a,arguments):void 0}},liveInitOnEvent:function(t,e,n){return this.liveBindTo(t,e,n,!0)},liveBindTo:function(t,i,o,s){i&&!e.isFunction(i)||(o=i,i=t,t=n),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(E(r._name,e,t.modName,t.modVal),i,o,s)}),r):r._liveClassBind(E(r._name,t.elem,t.modName,t.modVal),i,o,s)},liveUnbindFrom:function(t,i,o){i&&!e.isFunction(i)||(o=i,i=t,t=n);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(E(s._name,t),i,o)}),s):s._liveClassUnbind(E(s._name,t),i,o)},_liveInitOnBlockEvent:function(t,e,n,i){var o=this._name;return v[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[i](o);n&&s.forEach(function(t){n.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,n){return this._liveInitOnBlockEvent(t,e,n,"findBlocksOutside")},on:function(t,e,n,i,o){return t.jquery?this._liveCtxBind(t,e,n,i,o):this.__base(t,e,n,i)},un:function(t,e,n,i){return t.jquery?this._liveCtxUnbind(t,e,n,i):this.__base(t,e,n)},liveCtxBind:function(t,e,n,i,o){return this._liveCtxBind(t,e,n,i,o)},_liveCtxBind:function(t,i,o,s,r){var a=this;if("string"==typeof i)if(e.isFunction(o)&&(r=s,s=o,o=n),i.indexOf(" ")>-1)i.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var u=a._buildCtxEventName(i),c=_[u]||(_[u]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),n=c.ctxs[t];n||(n=c.ctxs[t]={},++c.counter),n[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(i,function(e,n){a._liveCtxBind(t,e,n,o)});return a},liveCtxUnbind:function(t,e,n,i){return this._liveCtxUnbind(t,e,n,i)},_liveCtxUnbind:function(t,n,i,o){var s=this,r=_[n=s._buildCtxEventName(n)];return r&&(t.each(function(){var t,n=e.identify(this,!0);n&&(t=r.ctxs[n])&&(i&&delete t[e.identify(i)+(o?e.identify(o):"")],i&&!e.isEmptyObject(t)||(r.counter--,delete r.ctxs[n]))}),r.counter||delete _[n]),s},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t[0].className.match(this._buildElemNameRE());return e?e[1]:n},extractParams:u,_buildModClassPrefix:function(t,e){return E(this._name)+(e?k+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+w+t+w},_buildModValRE:function(t,e,n){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"("+y+")(?=\\s|$)",n)},_buildElemNameRE:function(){return new RegExp(this._name+k+"("+y+")(?:\\s|$)")},buildSelector:function(t,e,n){return"."+E(this._name,t,e,n)},getBlockByUniqId:function(t){return f[t]},getWindowSize:function(){return{width:h.width(),height:h.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(t){var e=t.event.special.leftclick={setup:function(){t(this).bind("click",e.handler)},teardown:function(){t(this).unbind("click",e.handler)},handler:function(e){e.button||(e.type="leftclick",t.event.dispatch.apply(this,arguments),e.type="click")}}}(jQuery),function(t){BEM.decl("i-visibilitychange",{init:function(){var e=t.document,n=this.changeThis(this.normalize);this.hiddenProp="hidden",this.hiddenProp in e?e.addEventListener("visibilitychange",this.changeThis(function(){this.change(e.hidden)})):(this.hiddenProp="mozHidden")in e?e.addEventListener("mozvisibilitychange",n):(this.hiddenProp="webkitHidden")in e?e.addEventListener("webkitvisibilitychange",n):(this.hiddenProp="msHidden")in e?e.addEventListener("msvisibilitychange",n):"onfocusin"in e?e.onfocusin=e.onfocusout=n:t.onpageshow=t.onpagehide=t.onfocus=t.onblur=n},normalize:function(e){var n,i=t.document,o={focus:!1,focusin:!1,pageshow:!1,blur:!0,focusout:!0,pagehide:!0};e=e||t.event,n=e.type in o?o[e.type]:i[this.hiddenProp],i.hidden=n,$(t).trigger("visibilitychange"),this.change(n)},change:function(t){this.channel("sys").trigger("visibilitychange",{hidden:t}),this.channel("sys").trigger(t?"hidden":"visible")}}),BEM.create("i-visibilitychange").init()}(window),function(t){t.home=t.home||{},home.lang=home.lang||{},home.l10n=function(t){return x.query(t,home.lang)||""}}(this),function(t){var e,n;try{e=t.localStorage,n="ya_ls_test",e.setItem(n,"1"),"1"!==e.getItem(n)?e=null:e.removeItem(n)}catch(i){e=null}var o=t.home||(t.home={}),s=t.console&&function(t){console.log(t)}||function(){},r=function(t){var e="localStorage is disabled. "+(t?t:"");s(e)},a=function(t){try{return t()}catch(e){r(e)}};e?o.localStorage={setItem:function(t,n){return a(function(){return e.setItem(t,n)})},getItem:function(t){return a(function(){return e.getItem(t)})},removeItem:function(t){return a(function(){return e.removeItem(t)})},clear:function(){return a(function(){return e.clear()})},key:function(t){return a(function(){return e.key(t)})}}:(o.localStorage={removeItem:r,setItem:r,getItem:r,clear:r},o.disabledLS=!0)}(window),function(t){"use strict";for(var e=["ms","moz","webkit","o"],n=0;n<e.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[e[n]+"RequestAnimationFrame"];if(void 0===t.requestAnimationFrame){var i,o=[],s=+new Date,r=0,a=function(){var t=o;o=[],r=+new Date,i=0;for(var e=0,n=t.length;n>e;e++)t[e](r-s)};t.requestAnimationFrame=function(e){if(o.push(e),!i){var n=+new Date,s=Math.max(0,16-(n-r));i=t.setTimeout(a,s)}return i},t.requestAnimationFrame.fallback=!0}}(this),home.getTouchEvents=function(t){var e=t.originalEvent;return e.touches&&e.touches.length?e.touches:e.changedTouches},home.getTouchEvent=function(t){var e,n,i,o=home.getTouchEvents(t);return e=o&&o.length?o[0]:t.originalEvent,n=e.pageX||e.clientX,i=e.pageY||e.clientY,{x:n,y:i}},function(t,e,n){function i(t,e){var n={},i=t.originalEvent||{};e||(e={});for(var o,s=0;u>s;s++)o=r[s],n[o]=e[o]||t[o]||i[o]||a[s];return n.x=n.clientX,n.y=n.clientY,n.pressure=n.pressure||(n.buttons?.5:0),n.buttons||c||(n.buttons=l[n.which]||0),n.originalEvent=t.originalEvent||null,e.preventDefault?n.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(n.preventDefault=function(){t.preventDefault()},n._preventScroll=function(){}),n}function o(t,e){var i=n.Event(t),o=e.preventDefault,s=i.preventDefault.bind(i);return jQuery.extend(i,e),i.preventDefault=function(){o(),s()},i}var s={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},r=Object.keys(s),a=r.map(function(t){return s[t]}),u=r.length,c=!1,l=[0,1,4,2];try{c=1===new MouseEvent("test",{buttons:1}).buttons}catch(h){}var d=t.Map&&t.Map.prototype.forEach,p=d?new t.Map:{array:[],size:0,set:function(t,e){return void 0===e?this["delete"](t):(this.has(t)||this.size++,void(this.array[t]=e))},has:function(t){return void 0!==this.array[t]},"delete":function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(n,i){t.call(e,n,i,this)},this)}},f={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var n=e.events;n&&(n.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.register.call(e,t)},unregister:function(t){for(var e,n=this.eventSourceList.length,i=0;n>i&&(e=this.eventSourceList[i]);i++)e.unregister.call(e,t)},contains:function(t,e){return t.contains(e)},getCommonAncestor:function(t,n){for(;t&&t!==e.documentElement;){if(t.contains(n))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],n=t.target,i=this.getCommonAncestor(n,t.relatedTarget);for(t.bubbles=!1;n&&n!==i;)e.push(n),n=n.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){n(t).on(e,this.boundHandler)},removeEvent:function(t,e){n(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=o(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var n=this.makeEvent(t,e);return this.dispatchEvent(n)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,i){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=i,this.implicitRelease=this.releaseCapture.bind(this,t),n(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i}))},releaseCapture:function(t){var i=this.captureInfo[t];i&&(this.captureInfo[t]=void 0,n(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(n.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:i})))},dispatchEvent:function(t){var e=this.getTarget(t);return e?n.event.trigger(t,null,e,!t.bubbles):void 0},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};f.boundHandler=f.eventHandler.bind(f);var m,_,g={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,n=this.lastTouches,i=t.clientX,o=t.clientY,s=0,r=n.length;r>s&&(e=n[s]);s++){var a=Math.abs(i-e.x),u=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&u<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return i(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(p.has(this.POINTER_ID)&&this.cancel(t),p.set(this.POINTER_ID,t),f.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||f.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=p.get(this.POINTER_ID);e&&e.button===t.button&&(f.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||f.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||f.leaveOut(this.prepareEvent(t))},cancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){p["delete"](this.POINTER_ID)}},v={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===p.size||1===p.size&&p.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,o=this.currentTouchEvent,s=t.identifier+2;return i(o,n.extend({},t,{pointerId:s,target:f.captureInfo[s]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(o.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var n=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var i,o=0;o<n.length;o++)i=n[o],e.call(this,this.touchToPointer(i))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e=this.scrollTypes;return t===e.EMITTER?"none":t===e.XSCROLLER?"X":t===e.YSCROLLER?"Y":e.SCROLLER.exec(t)?"XY":void 0},shouldScroll:function(t){if(void 0===this.shouldScrollCache){if(this.firstXY){var e,n,i=this.firstTouchTarget;do{if(e=i.getAttribute("touch-action"),null!==e)break;i=i.parentNode}while(i!==document);var o=this.touchActionToScrollType(e);if("none"===o)n=!1;else if("XY"===o||void 0===o)n=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y",u=Math.abs(s["client"+r]-this.firstXY[r]),c=Math.abs(s["client"+a]-this.firstXY[a]);n=u>=c}return this.shouldScrollCache=n,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache}return!0}return this.shouldScrollCache},findTouch:function(t,e){for(var n,i=0,o=t.length;o>i&&(n=t[i]);i++)if(n.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(p.size>=e.length){var n=[];p.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t.out;n.push(o)}},this),n.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){p.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),f.over(t),f.enter(t),f.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=p.get(t.pointerId);if(e){var n=e.out,i=e.outTarget;f.move(t),n&&i!==t.target&&(n.relatedTarget=t.target,t.relatedTarget=i,n.target=i,t.target?(f.leaveOut(n),f.enterOver(t)):(t.target=i,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(f.up(t),f.out(t),f.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){f.cancel(t),f.out(t),f.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){p["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=g.lastTouches;if(this.isPrimaryTouch(t)){var n={x:t.clientX,y:t.clientY};e.push(n);var i=function(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}.bind(null,e,n);setTimeout(i,this.DEDUP_TIMEOUT)}}},b={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){f.listen(t,this.events)},unregister:function(t){f.unlisten(t,this.events)},prepareEvent:function(t){var e=i(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){p["delete"](t)},MSPointerDown:function(t){p.set(t.originalEvent.pointerId,t),f.down(this.prepareEvent(t))},MSPointerMove:function(t){f.move(this.prepareEvent(t))},MSPointerUp:function(t){f.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){f.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){f.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){f.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){f.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){f.fireEvent("lostpointercapture",this.prepareEvent(t))}},y=function(t){if(!p.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(m=function(t,e){t.setPointerCapture(e)},_=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(m=function(t,e){y(e),t.msSetPointerCapture(e)},_=function(t,e){y(e),t.msReleasePointerCapture(e)}):(m=function(t,e){y(e),f.setCapture(e,t)},_=function(t,e){y(e),f.releaseCapture(e,t)}),n.fn.extend({setPointerCapture:function(t){m(this[0],t)},releasePointerCapture:function(t){_(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,n="pointer"+t;e[n]||(e[n]={}),e[n].props=r.concat(e[n].props||[])}):(delete n.event.special.pointerenter,delete n.event.special.pointerleave,t.navigator.msPointerEnabled?f.registerSource("ms",b):(f.registerSource("mouse",g),void 0!==t.ontouchstart&&f.registerSource("touch",v)),f.register(document)))}(window,document,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,n){function i(n){var i,o=n.type;return"mouse"===n.pointerType&&1!==n.which||(n.type=e,i=t.event.dispatch.apply(this,arguments),n.type=o),i}t.event.special[e]={setup:function(){t(this).on(n,i)},teardown:function(){t(this).off(n,i)}}})}(jQuery),$.extend({util:{}}),function(){function t(t){return"[object Object]"===i.call(t)}function e(n,i,o){var s,r;n=Object(n),i=Object(i);for(s in i)r=o&&o(n[s],i[s],s),void 0!==r?n[s]=r:t(n[s])&&t(i[s])?n[s]=e(n[s],i[s],o):n[s]=i[s];return n}function n(t,n){return e(t,n,function(t,e,n){return"mix"===n?[].concat(t,e):void 0})}var i=Object.prototype.toString;$.extend($.util,{merge:e,mergeBemjson:n})}(),jQuery.cookie=function(t,e,n){if("undefined"==typeof e){var i=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){i=decodeURIComponent(r.substring(t.length+1));break}}return i}n=n||{},null===e&&(e="",n.expires=-1);var a="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+24*n.expires*60*60*1e3)):u=n.expires,a="; expires="+u.toUTCString()}var c=n.path?"; path="+n.path:"",l=n.domain?"; domain="+n.domain:"",h=n.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),a,c,l,h].join("")},function(t){function e(t){return t.replace(/%.{2}/g,function(t){return i[t]||t})}function n(t,n){var i="";try{i=t(n)}catch(o){try{i=t(e(n))}catch(s){i=n}}return i}var i={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};t.extend({decodeURI:function(t){return n(decodeURI,t)},decodeURIComponent:function(t){return n(decodeURIComponent,t)}})}(jQuery),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:Lego.isSessionValid()?$.cookie("yandex_login")||"":"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){return"undefined"==typeof e?(this._params||{})[t]:void(this._params&&(this._params[t]=e))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var n=e.indexOf(t+"=");if(-1===n)return!1;n+=t.length+1;var i=e.indexOf(";",n);return decodeURIComponent(-1===i?e.substring(n):e.substring(n,i))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(n){return(n=e.params=t.extend({id:"",login:e.isSessionValid()?e.getCookie("yandex_login")||"":"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":n.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},n,e.params))["show-counters"]=Math.round(100*Math.random())<=n["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},n),n}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(n,i){n=n||document,i=i||".g-js",t(n).find(i).each(function(){var n=t(this),i=this.onclick?this.onclick():{},o=i.name||"",s=e.block[o];s&&!n.data(o)&&(s.call(n,i),n.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t){t||(t=window.Lego={}),t.isSessionValid=function(){return Boolean(t.getCookie("yandex_login"))}}(window.Lego),function(t,e){var n=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?n=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(n=t.devicePixelRatio),"function"==typeof t.matchMedia){var o="only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)";i=t.matchMedia(o).matches}else i=n>=1.3;var s={};/msie|trident/i.test(e)?s.ie=parseInt(e.split(/msie|rv:/i)[1],10):t.opera&&(s.opera=parseInt(t.opera.version(),10));var r,a={},u={};(r=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?a.wp=r[1]:(r=e.match(/Android\s+([\d.]+)/))?a.android=r[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?a.android="2.3":(r=e.match(/iPhone\sOS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),u.iphone=!0):(r=e.match(/iPad.*OS\s([\d_]+)/))?(a.ios=r[1].replace(/_/g,"."),u.ipad=!0):(r=e.match(/Bada\/([\d.]+)/))?a.bada=r[1]:(r=e.match(/MSIE\s9/))?a.wp="7.5":a.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(n){return t[n]&&(e=n)}),this.setMod("platform",e),t.hiDpi&&this.setMod("hi-dpi","yes")}}}},{ios:a.ios,iphone:u.iphone,ipad:u.ipad,android:a.android,bada:a.bada,wp:a.wp,other:a.other,dpr:n,hiDpi:i,ua:e,ie:s.ie,opera:s.opera})}(window,navigator.userAgent),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){return this.hasMod("disabled")?!1:void(this._focused||this._focus())},"":function(){this._focused&&this._blur()}},disabled:{"*":function(t,e){var n=this._getControl(),i=Boolean(e);n.prop("disabled",i).attr("aria-disabled",i),n.attr("tabindex",i?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.delMod("focused").unbindFrom("focusout")}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this._url=this.domElem.attr("href"),this.domElem.removeAttr("href"),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),function(){function t(){n.hasClass("pointerfocus")&&(o=!0,setTimeout(function(){o=!1}))}var e=$(window),n=$(document.documentElement),i=0,o=!1;document.documentMode<=9?n.on("focusin",function(e){var n=e.originalEvent;!n||n.fromElement||n.relatedTarget||t()}):e.on("blur",function(){e.one("focus",t)}),n.addClass("utilityfocus").on({focusin:function(){n.toggleClass("pointerfocus",o).toggleClass("utilityfocus",!o)},keydown:function(){clearTimeout(i),o=!1},"pointerdown pointerup click":function(t){o=!0,clearTimeout(i),i=setTimeout(function(){o=!1},600)}})}(),function(t,e){function n(t){t.isPrimary&&(m.push(t),setTimeout(Array.prototype.shift.bind(m),p))}function i(t,e){return Math.abs(t.clientX-e.clientX)>h||Math.abs(t.clientY-e.clientY)>h}function o(t){var e=t.clientX,n=t.clientY,i="_compat"+t.type;if(!t._sourcePoint){for(var o=0;o<m.length;o++){var s=m[o];if(!s[i]&&!(Math.abs(e-s.clientX)>d||Math.abs(n-s.clientY)>d||s.target!==t.target&&document.elementFromPoint(s.clientX,s.clientY)===s.target)){t._sourcePoint=s,s[i]=t;break}}_.push(t),setTimeout(Array.prototype.shift.bind(_),p)}}function s(t){for(var e=0;e<_.length;e++)if(_[e]===t)return _[e]._sourcePoint}function r(t){var e=s(t);return Boolean(e)&&e.target!==t.target}function a(t){var n,i=t.type;return t.button||(t.type="pointerclick",n=e.event.dispatch.apply(this,arguments),t.type=i),n}if(!e.event.special.pointerclick){var u,c=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,l="touchAction"in document.documentElement.style,h=10,d=25,p=900,f=250,m=[],_=[],g=null,v=null,b=l?function(t){function e(t){return t===document.documentElement?!1:"manipulation"===getComputedStyle(t)["touch-action"]||e(t.parentElement)}return e(t)}:function(){return!1};c?(u={click:function(t){var e=Object(t.originalEvent)._sourcePoint;return e?void(e.isDefaultPrevented()&&t.preventDefault()):a.apply(this,arguments)},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==e&&"pointerup"!==e||!b(t.target)))if("pointerdown"===e)v=t;else if("pointermove"===e&&v&&(v.target!==t.target||i(v,t)))v=null;else if("pointerleave"===e||"pointercancel"===e)v=null;else if("pointerup"===e){if(n(t),!v)return;if(!(t.timeStamp-v.timeStamp>f))return g||(g=setTimeout(function(){g=v=null})),a.apply(this,arguments);v=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){o(t),r(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):u={click:function(t){return a.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(u)},teardown:function(){e(this).off(u)}}}}(window,jQuery),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.afterCurrentEvent(function(){this.trigger("click",this._buildClickEventData(t))})},_onKeydown:function(t){t.shiftKey||t.altKey||BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){t.shiftKey||t.altKey||BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.afterCurrentEvent(function(){
this.trigger("click")}),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"click",function(t){t.preventDefault()}),this.__base()}}),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),window.home=window.home||{},function(t){t.getData=function(e,n){var i,o,s,r,a="export",u=e.split("."),c=u.length;if(c>1){for(o=t[a]||{},s=0;c>s;s++)if(i=u[s],o=o[i],"undefined"==typeof o)return"undefined"==typeof o?n:o;return"undefined"==typeof o?n:o}return a="export",r=t&&t[a]&&t[a][e],"undefined"==typeof r?n:r},t.dataCallbacks=t.dataCallbacks||[],t.subscribeData=function(e){t["export"]?e():t.dataCallbacks.push(e)}}(home),function(){var t,e={isAuthenticated:!1,isFeedbackReceived:!1,isRequestSent:!1},n=function(){};BEM.decl("i-mda-auth",{},{authenticate:function(i){if(t=Lego.params["mda-auth-url"]||home.getData("i-mda-auth.url")||"",""===t)return!1;var o=Lego.params["mda-auth-delay"]||10;n=i||function(){},setTimeout(function(){var n=document.createElement("iframe");n.style.visibility="hidden",n.style.position="absolute",n.setAttribute("src",t),n.name="i-mda-auth"+(Math.random()+"").substr(3,7),n.style.top=n.style.left=n.style.width=n.style.height=0,document.getElementsByTagName("body")[0].appendChild(n),e.isRequestSent=!0},o)},isRequestSent:function(){return e.isRequestSent},isFeedbackReceived:function(){return e.isFeedbackReceived},isAuthenticated:function(){return e.isAuthenticated},getUrl:function(){return t},registerFeedback:function(t){var i="success"===t;e.isFeedbackReceived=!0,e.isAuthenticated=i,n(i)}})}(),function(t,e){function n(t,n){function _(t,e){g&&(h.call(a,g),g=d),setTimeout(function(){t(e)},0)}if(d=null,!t)return void _(n,d);a=e.body,u=e.createElement,c=e.createDocumentFragment,l=a.appendChild,h=a.removeChild;var g=r(t);l.call(a,g);var v=g.children,b=i(v[0]),y=s(v[1],b);if(1!=y)return void _(n,d);var w=s(v[2],b),k=s(v[3],b),x=w+(k<<f);if(m>x)return void _(n,d);for(var E=c.apply(e),M=y+w+k,S=57348,C=0;2*x+1>C;C++)l.call(E,o(S+C));l.call(g,E);for(var T=[],B=p;p+2*x>B;B+=2){var D=s(v[B],b),I=s(v[B+1],b);T.push(D+(I<<f)),M+=D+I}var O=s(v[B],b);if(O!=(15&M))return void _(n,d);for(var P=0,A=0;A<T.length;A++)P+=T[A]*(1<<8*A);_(n,P)}function i(t){return 16/t.offsetWidth}function o(t){var n=u.call(e,"span");return n.innerText=String.fromCharCode(t),n}function s(t,e){return Math.round(t.offsetWidth*e)-1}function r(t){var n=57344,i=u.call(e,"div"),s='position:absolute;left:0;top:0;width:1px;height:1px;opacity:0;overflow:hidden;font:1000px "'+t+'", serif;';i.setAttribute("style",s),i.setAttribute("aria-hidden","true");for(var r=0;p>r;r++)l.call(i,o(n+r));return i}var a,u,c,l,h,d,p=4,f=4,m=4;t.Ya=t.Ya||{},t.Ya.F=t.Ya.F||{},t.Ya.F.calibrate=n}(window,document),function(){"use strict";$(function(){var t=home&&home.getData&&home.getData("fingerprint.data");t&&t.enabled&&setTimeout(function(){var e=t.zmblt;try{window.Ya.F.calibrate("Yandex-UI-Icons-Private",function(n){null!==n&&Number(n)!==Number(e)&&((new Image).src=t.cookieUrl+"&zmblt="+n+"&empty=1")})}catch(n){}},0)})}(),window.ya=window.ya||{},ya.history=window.history&&history.pushState?function(){return{navigate:function(t){t=t||{},t.url&&(t.title||(t.title=""),t.data||(t.data=""),t.replace?history.replaceState(t.data,t.title,t.url):history.pushState(t.data,t.title,t.url))},onchange:function(t){$(window).on("popstate",function(e){t.call(this,e.originalEvent)})}}}():null,function(){"use strict";function t(){var t=home&&home.getData&&home.getData("i-change-url.data");if(t){var e=t.url;e&&ya.history&&ya.history.navigate({data:{page:"morda"},url:e,replace:!0})}}function e(){window.defaultMetrikaCounter?t():+new Date-n>5e3?t():setTimeout(e,100)}var n=+new Date;e()}(),BEM.DOM.decl("xiva-notif",{onSetMod:{js:function(){window.WebSocket&&this.params.url&&(this.isConnected=!1,this.isPageClosed=!1,this.last={},this.connectAttempts=0,this.connectAttemptsTimer=null,this.reconnectTimer=null,this._connect(),this.bindToWin("beforeunload",this._disconnect))}},_update:function(t){this._isFreshMessage(t)&&("insert"!==t.operation&&"update labels"!==t.operation||this.channel("mail").trigger("update",{uid:t.uid,value:t.newCount}))},_isFreshMessage:function(t){var e=t.uid;return e?(e in this.last||(this.last[e]=0),this.last[e]<=t.lcn?(this.last[e]=t.lcn,!0):void 0):!1},_connect:function(){this.last={},this.connectAttempts=0,this.ws=new WebSocket(this.params.url),this.ws.onopen=this._onSocketOpen.bind(this),this.ws.onmessage=this._onSocketMessage.bind(this),this.ws.onclose=this._onSocketClose.bind(this)},_onSocketOpen:function(){this.isConnected=!0,clearTimeout(this.connectAttemptsTimer),this.connectAttemptsTimer=setTimeout(function(){this.isConnected&&(this.connectAttempts=0)}.bind(this),5e3)},_onSocketMessage:function(t){try{var e=JSON.parse(t.data);e.raw_data&&this._update(JSON.parse(e.raw_data))}catch(n){}},_onSocketClose:function(t){if(clearTimeout(this.connectAttemptsTimer),!this.isPageClosed){this.connectAttempts+=1;var e=6e4;this.isConnected=!1,this.connectAttempts<=5?e=3e3:this.connectAttempts<=15&&(e=1e4),4e3===t.code&&(e=3e5),4401!==t.code&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(this._connect.bind(this),e))}},_disconnect:function(){this.isPageClosed=!0,this.ws&&this.ws.close&&this.ws.close(1e3,"unload")}}),function(){var t="//yastatic.net/browser-cookie/_fc.js",e='<div style="height:0;overflow:hidden;" aria-hidden="true"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="1" height="1" id="fco" ><param name="movie" value="//yastatic.net/browser-cookie/flash-cookie.swf"/><param name="allowScriptAccess" value="Always"/><embed src="//yastatic.net/browser-cookie/flash-cookie.swf" allowScriptAccess="Always" width="1" height="1" id="fce"></embed></object></div>';setTimeout(function(){window.mordaCookieCopy&&$.getScript(t,function(){$("body").append(e)})},5e3)}(),BEM.decl("custom-protocol-detect",{},{protocolCheck:function(t,e,n){var i=this._checkBrowser();return i.isMsLaunchUri?this._openUriWithMsLaunchUri(t,e,n):i.isFirefox?this._openUriUsingFirefox(t,e,n):i.isWebkit?this._openUriWithHiddenFrame(t,e,n):i.isIE?this._openUriUsingIEInOlderWindows(t,e,n):void(n&&n())},_openUriWithHiddenFrame:function(t,e,n){this._blurWindowHack(e,n),this._getHiddenIframe().contentWindow.location.href=t},_openUriUsingFirefox:function(t,e,n){var i=this._getHiddenIframe();try{i.contentWindow.location.href=t,e&&e()}catch(o){n()}},_openUriUsingIEInOlderWindows:function(t,e,n){var i={9:"openUriWithHiddenFrame",10:"openUriUsingIe10InWindows7",11:"openUriWithHiddenFrame"}[home.getData("custom-protocol-detect.ieVersion")];this[i||"_openUriInNewWindowHack"](t,e,n)},_openUriUsingIe10InWindows7:function(t,e,n){var i=this._getHiddenIframe(),o=n?setTimeout(n,1e3):null;BEM.DOM.win.on("blur",function(){o&&clearTimeout(o),e&&e()});try{i.contentWindow.location.href=t}catch(s){n&&n(),clearTimeout(o)}},_openUriInNewWindowHack:function(t,e,n){var i=window.open("","","width=0,height=0");i.document.write("<iframe src='"+t+"'></iframe>"),setTimeout(function(){try{i.location.href=t,i.setTimeout(function(){i.close()},1e3),e&&e()}catch(o){i.close(),n&&n()}},1e3)},_openUriWithMsLaunchUri:function(t,e,n){navigator.msLaunchUri(t,e,n)},_checkBrowser:function(){return{isMsLaunchUri:Boolean(navigator.msLaunchUri),isFirefox:"undefined"!=typeof InstallTrigger,isWebkit:Boolean(window.chrome||window.opr||window.safari),isIE:home.getData("custom-protocol-detect.isMSIE")}},_getHiddenIframe:function(){if(!this.iframe){var t=document.createElement("iframe");t.src="about:blank",t.style.display="none",t.name="custom-protocol-detect",document.body.appendChild(t),this.iframe=t}return this.iframe},_blurWindowHack:function(t,e){function n(){clearTimeout(i),BEM.DOM.win.off("blur",n),t&&t()}var i=setTimeout(function(){BEM.DOM.win.off("blur",n),e&&e()},1e3);BEM.DOM.win.on("blur",n)}}),function(){"use strict";var t,e=!1,n=[];home.pseudoReady=function(i){e?setTimeout(i,0):(n.push(i),t||(t=setTimeout(function o(){if(document.body&&home["export"]){e=!0;for(var t=0;t<n.length;++t)setTimeout(n[t],0)}else setTimeout(o,100)},100)))}}(),function(){function t(t,e,n){i||(i=a('<iframe style="display:none" src="'+t+'" name="ga"></iframe>'));var r=function(){i.contentWindow.postMessage&&i.contentWindow.postMessage({type:"params",params:e,labels:n},"*")};s?r():i.onload=function(){s=!0,r()},o||(document.body.appendChild(i),o=!0)}function e(t){u||(u=a('<iframe style="display:none" src="'+t+'" name="ga-ex"></iframe>')),c||(document.body.appendChild(u),c=!0)}function n(){return window.home&&home.getData&&home.getData("ga-counter.data")}var i=null,o=!1,s=!1,r=document.createElement("div"),a=function(t){return r.innerHTML=t,r.firstChild},u=null,c=!1;window.home=window.home||{},window.home.gaCounter={track:function(e){var i=n();i&&i.customLabels&&i.customLabels[e]&&t(i.iframeSrc,null,i.customLabels[e])},trackCancel:function(){this.track("cancel")},trackCancelPopup:function(){this.track("cancelPopup")}},home.pseudoReady(function(){function i(){return d.swb}function o(){if(i())return!0;var t;try{t=localStorage.getItem("gaCounterShowTime")}catch(e){}return!t||Number(t)<d.ignoreLSBefore||+new Date-Number(t)>d.showTimeout}function s(){try{localStorage.setItem("gaCounterShowTime",+new Date)}catch(t){}}function r(){var t=window.performance&&performance.timing&&performance.timing.responseEnd&&performance.timing.responseStart?performance.timing.responseEnd-performance.timing.responseStart:null;if(d.statDownloadTime&&t){if(t>Number(d.statDownloadTime[1]))return"slow=2";if(t>Number(d.statDownloadTime[0]))return"slow=1"}return""}function a(){return d.csc?"csc="+d.csc:""}function u(){return d.refg?"refg=1":""}function c(){return d.swb?"swb=1":""}function l(){for(var t=[],e=0,n=arguments.length;n>e;e++)arguments[e]&&t.push(arguments[e]);return t.length?"?"+t.join("&"):""}function h(){d.iframeSrcEx?e(d.iframeSrcEx+l(r(),a(),u(),c())):d.iframeSrc&&t(d.iframeSrc,d.params,d.labels)}var d=n();d&&o()&&setTimeout(function(){h(),s()},d.timeout)})}(),$(document).ready(function(){var t=home&&home.getData&&home.getData("yandcache.data");t&&window.setTimeout(function(){$.ajaxSetup({cache:!0}),$.getScript(t.url),$.ajaxSetup({cache:!1})},t.timeout)}),home.pseudoReady(function(){var t=home&&home.getData&&home.getData("referers.data");if(t){var e=location.hash?location.hash.replace(/^#/,""):"",n=e&&e.match(/^[1-578]$/),i=home.getData("timing.reqid")||"";n&&t.referer&&((new Image).src="/instant/log?type=clckerror&showid="+i+"&message="+[n[0],t.content,t.page,t.referer].join("_"))}}),$(function(){var t=window.performance&&performance.navigation&&1===performance.navigation.type;t&&home.stat.logPath("tech","refresh")}),function(){"use strict";var t,e,n={},i={};home.stat={},home.stat.attr="data-statlog",home.stat.getCustomPageParams=function(){var t=home&&home.getData&&home.getData("redir-stats.data")||"",e="",n="",i=home.mark?home.mark.time():null;i&&(e="/timefs="+i[0]+"/timefrs="+i[1]);var o=home.getData?home.getData("timing.vars"):"";return o&&(o[1964]?n="/mexp=0":o[1965]&&(n="/mexp=1")),t+e+n};var o,s=function(e){return n.useBeacon&&"sendBeacon"in navigator?navigator.sendBeacon(t,e):void 0},r=function(e,n){var i;if("XDomainRequest"in window?i=new XDomainRequest:"XMLHttpRequest"in window&&(i=new XMLHttpRequest),i){i.open("post",t,!0),i.withCredentials=!0;try{i.setRequestHeader("Accept","text/plain, */*; q=0.01"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}catch(o){}n&&("onreadystatechange"in i?i.onreadystatechange=function(){4===i.readyState&&n()}:i.onload=i.onerror=n),i.send(e)}},a=function(t){return"/dtype=clck"+home.stat.getCustomPageParams()+"/session_id="+n.showId+"/events="+encodeURIComponent(JSON.stringify(t.map(function(t){return{event:t.type,url:t.url,"parent-path":n.statRoot,blocks:t.array}})))+"/*"},u=function(t){if(clearTimeout(o),e){var n=a(e);s(n)?t&&t():r(n,t),e=null}},c=function(){clearTimeout(o),o=setTimeout(u,0)},l=function(t){var e=[];t.replace(/([^.(]+)(?:\(([^)]*)\))?\.?/g,function(t,n,i){e.push({key:n,params:i?i.split(";"):[]})});for(var n=[],i=n,o=0;o<e.length;++o){var s,r=e[o].params,a=e[o].key;s={ctag:a},i.push(s),r.length&&r.forEach(function(t){var e=t.match(/^([^=]+)=(.+)$/);s[e[1]]=e[2]}),o+1<e.length&&(i=s.children=s.children||[])}return n},h=function(t){return t.replace(/\([^\)]+\)/g,"")};home.stat.logPath=function(t,o,s){var r,a;if(!n.enabled||!t||!o)return void(s&&s.callback&&setTimeout(s.callback,0));if("show"===t){if(o in i)return;i[o]=!0}else o=h(o);e||(e=[]),e.push({type:t,url:s&&s.url,array:l(o)}),s&&s.callback?(r=function(){a||(a=!0,s.callback())},u(r),void 0!==s.callbackTimeout&&setTimeout(r,s.callbackTimeout)):c()},home.stat.redirect=function(e,i){if(!n.enabled||!i)return!0;i=h(i);var o,s,u="2"===e.getAttribute("data-app-link"),c=e.href;return n.useBeacon&&"sendBeacon"in navigator&&!u&&(s=a([{type:"click",url:c,array:l(i)}]),navigator.sendBeacon(t,s))?!0:void 0!==n.delayedSend?(home.stat.logPath("click",i,{url:c,callbackTimeout:n.delayedSend,callback:function(){location.href=c}}),!1):"_blank"===e.target?(s=a([{type:"click",url:c,array:l(i)}]),r(s),!0):(e.getAttribute("data-statlog-timeout")||-1!==c.indexOf("/lid="+n.statRoot)||(o=e.getAttribute("data-statlog-url"),o?e.href=o:(e.href=n.redirHost+"redir/dtype=clck"+home.stat.getCustomPageParams()+"/lid="+n.statRoot+"."+i+"/sid="+n.showId+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+"/*data="+encodeURIComponent("url="+encodeURIComponent(c.match(/^http/)?c:location.protocol+"//"+location.host+(c.match("^/")?c:"/"+c))),u&&BEM.blocks["app-opener"]&&BEM.blocks["app-opener"].openEveryLinkWithStats&&BEM.blocks["app-opener"].openEveryLinkWithStats(e.href)),e.setAttribute("data-statlog-timeout",setTimeout(function(){e.href=c,e.removeAttribute("data-statlog-timeout")},500))),!0)};var d=function(t){return t&&(0!==t.offsetWidth||0!==t.offsetHeight)},p=function(t){var e;if(!t.getAttribute&&"length"in t){e=new Array(t.length);for(var n=0;n<t.length;++n)e[n]=t[n];return e}return[t]};home.stat.logDOMShow=function(t,e){if(n.enabled){var i=[];p(t).forEach(function(t){i=i.concat(p(t.querySelectorAll("["+home.stat.attr+"]"))),t.getAttribute(home.stat.attr)&&i.push(t)}),i.forEach(function(t){var n=t.getAttribute(home.stat.attr),i=t.getAttribute("data-statlog-showed");if(n&&!i){if(!(e&&e.visibilityCheck===!1||d(t)))return;home.stat.logPath("show",n)}})}},home.stat.getRoot=function(){return n.enabled&&n.statRoot||""},home.stat.setCounter=function(t,e){p(t).forEach(function(t){t.setAttribute(home.stat.attr,e)})};var f=function(t){for(var e,n=t.target||t.srcElement;n&&n!==document&&!(e=n.getAttribute(home.stat.attr));)n=n.parentNode;if(e&&n){var i=n.getAttribute("data-statlog-redir");"0"!==i&&n.href?n.href&&"click"===t.type&&!t.defaultPrevented&&t.returnValue!==!1&&(home.stat.redirect(n,e)||("preventDefault"in t?t.preventDefault():t.returnValue=!1)):"mousedown"===t.type&&home.stat.logPath("click",e)}},m=function(t,e){"addEventListener"in document?document.addEventListener(t,e,!1):document.attachEvent("on"+t,e)},_=function(){n.enabled&&(m("mousedown",f),m("click",f))};home.subscribeData(function(){n=home.getData("statlog.config",{}),t=n.clckDemonHost+"counter","querySelectorAll"in document||(n.enabled=!1),_()}),home.stat._processClicks=f,home.stat._setConfig=function(e){n=e,t=n.clckDemonHost+"counter",i={},_()}}(),BEM.decl("i-inline-install",{init:function(){if(!this.params||!this.params.url)throw new Error("Inline installation requires url of extension");this.message=null,this.agreement=null,this.inited=null,this.visitParams=this.__self._constructVisitParams(this.params.metrikaParams),this.counters=this.__self._getCounters(this.params.statPath),this.requestDeferred=null,this.reqStart=null;var t=this.params.metrikaParams||{};return t.goals&&t.id&&(this.metrika=this.__self._getPortalMetrika(t.id)),this.curtain=BEM.blocks["promo-curtain"].get(this.params.curtainOpts,this),this.__self._appendInlineUrlToHead(this.params.url),this.inited=!0,this},request:function(){if(this.inited||this.init(),this.requestDeferred&&"pending"===this.requestDeferred.state())return this.requestDeferred.promise();if(this.requestDeferred=$.Deferred(),this.reqStart=Date.now(),!this._checkApi())return home.stat.logPath("tech",this.counters.bad_ua),this.requestDeferred.reject().promise();try{this.trigger("request"),this._requestApi(this.params.url,this._onSuccess.bind(this),this._onFailure.bind(this)),["yes","no","bad_ua","bad_ext_url","fast_reject","install_error","error"].forEach(function(t){home.stat.logPath("show",this.counters[t])},this)}catch(t){this.requestDeferred.reject(),this.trigger("error"),"string"==typeof t&&0===t.indexOf("Invalid")?home.stat.logPath("tech",this.counters.bad_ext_url):(home.stat.logPath("tech",this.counters.error),this.__self._blockError([t&&t.message?"message:"+t.message:"",this.params.statPath?"stat:"+this.params.statPath:""].filter(Boolean).join(", ")))}return this.requestDeferred.promise()},_onSuccess:function(){this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.yes),this._reachGoal("yes"),this._fireExternalCallback("yes"),this.trigger("success"),this.__self._saveToYsCookie(this.params.bannerid)},_onFailure:function(t,e){return this.trigger("cancel"),e&&"userCancelled"!==e?(this.requestDeferred.reject(),void home.stat.logPath("tech",this.counters.install_error)):(this.requestDeferred.resolve(),home.stat.logPath("click",this.counters.no),this._reachGoal("no"),this._fireExternalCallback("no"),Date.now()-this.reqStart<1e3&&home.stat.logPath("tech",this.counters.fast_reject),void window.home.gaCounter.trackCancel())},_fireExternalCallback:function(t){var e=this.params.callbacks||{};e[t]&&e[t]()},_checkApi:function(){},_requestApi:function(){return!1},_reachGoal:function(t){var e=this,n=this.params.metrikaParams;n&&n.goals&&n.goals[t]&&this.metrika.done(function(i){i.reachGoal(n.goals[t],e.visitParams)})}},{_constructVisitParams:function(t){if(t&&t.channel&&t.bannerid){var e={channel:{}};return e.channel[t.channel]={banner_id:t.bannerid},e}},_getPortalMetrika:function(t){var e=$.Deferred();try{window["yaCounter"+t]?e.resolve(window["yaCounter"+t]):(window["yaCounter"+t]=new window.Ya.Metrika({id:t,triggerEvent:!0}),$(document).one("yacounter"+t+"inited",function(){e.resolve(window["yaCounter"+t])}))}catch(n){e.reject()}return e.promise()},_saveToYsCookie:function(t){t&&BEM.blocks["i-bannerid"].save(t)},_getCounters:function(t){return t?{yes:t+".yes",no:t+".no",error:t+".error",fast_reject:t+".fast_reject",bad_ua:t+".bad_ua",bad_ext_url:t+".bad_ext_url",install_error:t+".install_error"}:{}},_appendInlineUrlToHead:function(t){return $(document.head).append($("<link />",{rel:"chrome-webstore-item",href:t}))},_blockError:function(t){home.getData("i-inline-install.logDisabled")||BEM.blocks["error-logger"].logError({block:"i-inline-install",message:t})}}),$(function(){"use strict";var t=home.getData("i-bannerid.csl");BEM.decl("i-bannerid",{},{save:function(e){if(!t)throw new Error("i-bannerid: Cookie set link wasn't passed");if(!e)throw new Error("i-bannerid: Bannerid wasn't passed");var n=$(".i-bannerid"),i=x.stringf(t,e);n.length||(n=$('<iframe class="i-bannerid" name="i-bannerid" style="display:none"/>'),$(document.body).append(n)),n.attr("src")!==i&&n.attr("src",i)}})}),BEM.DOM.decl("promo-curtain",{onSetMod:{js:function(){this.params.langs=this.params.langs||home.getData("promo-curtain.langs"),this.params.offset={top:this.params.offset&&this.params.offset.top||this._getMessageOffsetTop(this.params.gap),left:this.__self.MESSAGE_OFFSET_LEFT},$(home.view("promo-curtain__message",this.params)).appendTo(this.domElem),this.params.owner&&this.params.owner.on({request:this.show,"success cancel error":this.hide},this)}},show:function(){this.afterCurrentEvent(function(){this.setMod("active","yes")}),BEM.DOM.scope.addClass("b-page_overflow_hidden")},hide:function(){this.delMod("active"),BEM.DOM.scope.removeClass("b-page_overflow_hidden")},_getMessageOffsetTop:function(t){var e=this.__self.MESSAGE_OFFSET_TOP,n=this.__self["tr"===navigator.language?"GAP_TOP_OFFSET_COMTR":"GAP_TOP_OFFSET"][t];return n&&(e+=n),e}},{get:function(t,e){if(t&&t.theme){var n={};return e&&(n.owner=e),$(home.view("promo-curtain__layout",{mods:{theme:t.theme}})).appendTo("body").bem("promo-curtain",$.extend(t,n))}},GAP_TOP_OFFSET:{s:20,m:40,l:60},GAP_TOP_OFFSET_COMTR:{s:20,m:70,l:110},SHOW_MESSAGE_TIMEOUT:500,MESSAGE_OFFSET_TOP:335,MESSAGE_OFFSET_LEFT:175}),home.htmlFilter=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},home.getBEMParams=function(t){return home.htmlFilter(JSON.stringify(t))},home.getBEMClassname=function(t,e){var n,i=e.mods,o=t;if(e.mix&&(o+=" "+e.mix),i)for(n in i)i.hasOwnProperty(n)&&(i[n]||0===i[n])&&(o+=" "+t+"_"+n+"_"+i[n]);return o},home.emptyAttr={},home.getAttributes=function(t){if(!t)return"";var e,n="";for(e in t)if(t.hasOwnProperty(e)){var i=t[e];(i||0===i)&&(i===home.emptyAttr?n+=" "+e:(i=i.toString().replace(/"/g,"&quot;"),n+=" "+e+'="'+i+'"'))}return n},BEM.DOM.decl("error-logger",{},{log:function(t){var e=this._prepareLogMessage(t);this._sendErrorMessage(e,t)},logError:function(t,e){e=this._createError(t,e),this.log(e)},logAjaxError:function(t,e,n,i){var o;i=this._createError(t,i),t.url&&(o=home.parseUrl(t.url),i.url=o.host+o.path),i.sourceType="network","timeout"===n?i.timeout=1:e.status&&(i.status=e.status),this.log(i)},_prepareLogMessage:function(t){var e=t.message;if(e+=t.sourceType?",source_type:"+t.sourceType:"",e+=t.source?",source:"+t.source:"","network"===t.sourceType&&(e+=(t.timeout?",timeout:"+t.timeout:"")+(t.status?",status:"+t.status:"")+(t.url?",url:"+t.url:"")),t.meta){var n;try{n=JSON.stringify(t.meta),e+=",meta:"+n}catch(i){}}return e},_createError:function(t,e){var n;return t=t||{},e=e||{},e instanceof Error?n=e:(n=new Error,n.name="blockerror",n.justCreated=!0),n.message=[t.message,e.message].filter(function(t){return t}).join("->"),t.sourceType&&(n.sourceType=t.sourceType),t.block&&(n.block=t.block.replace(/-/g,"_")),t.source&&(n.source=t.source),t.meta&&(n.meta=t.meta),t.timeout&&(n.timeout=t.timeout),n.forceStack=t.forceStack,n},_sendErrorMessage:function(t,e){var n,i="";("blockerror"!==e.name||e.forceStack)&&e.stack&&(n=e.justCreated?2:0,i="&trace="+e.stack.split("\n").slice(1+n,4+n).join("->").replace(/\s+/g," ")),this._awaitReqId().then(function(n){(new Image).src=("/instant/log?type=blockerror&showid=%reqid%&subtype=%block%&message=%message%"+i).replace("%reqid%",n).replace("%message%",t).replace("%block%",e.block||"unknown")})},_awaitReqId:function(){function t(){var n=home.getData("timing.reqid");n?e.resolve(n):home["export"]?e.resolve(null):setTimeout(t,100)}var e;return this._getDataPromise||(e=this._getDataPromise=new $.Deferred,t()),this._getDataPromise},live:!0}),function(){"use strict";var t=/^(?:(.*?):)?\/\/([^\/?#\s]+)(\/?.*)$/,e=/^(\/?[^?#\s]*)(?:\?([^#]+))?(?:#(.*))?$/;home.parseUrl=function(n){var i,o=n.match(t);if(o?i=o[3].match(e):(o=[],i=n.match(e)),!o&&!i)throw new TypeError('Invalid url "'+n+'"');var s={scheme:o[1]||"",host:o[2]||"",path:i&&i[1]||"",search:i&&i[2]||"",hash:i&&i[3]||"",query:{}};return s.search.split("&").forEach(function(t){if(t){var e=t.match(/([^=]*)=(.*)/);e?s.query[decodeURIComponent(e[1])]=decodeURIComponent(e[2]):s.query[decodeURIComponent(t)]=""}}),s},home.makeUrl=function(t){var e="";if(!t.scheme||!t.host&&t.path||(e+=t.scheme+"://"),t.host&&(t.scheme||(e+="//"),e+=t.host),e&&(t.path&&0!==t.path.indexOf("/")||!t.path)&&"/"!==e.charAt(e.length-1)&&(e+="/"),e+=t.path||"",t.query){var n=t.query,i=[];for(var o in n)n.hasOwnProperty(o)&&void 0!==n[o]&&i.push(encodeURIComponent(o)+(""!==t.query[o]?"="+encodeURIComponent(n[o]):""));i.length&&(e+="?"+i.join("&"))}return t.hash&&(e+="#"+t.hash),e},home.addMsidToUrl=function(t,e){try{if(!e||!e.Requestid)return t;if(!home.exp.check("url_msid",e)&&!home.exp.checkEtalon("url_msid",e))return t;var n=home.parseUrl(t);return n.query.msid=e.Requestid,home.makeUrl(n)}catch(i){return home.debug("unable to add msid to url,"+t+", "+(e&&e.Requestid?e.Requestid:"empty")),t}}}(),BEM.DOM.decl("dist-stripe",{onSetMod:{js:function(){this.bindTo("close","pointerclick",function(){return this.hide(),!1}),this.bindTo("button","pointerclick",function(){return this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl),this._action()}),this.params.bkShowUrl&&((new Image).src=this.params.bkShowUrl)},state:{hidden:function(){setTimeout(function(){$(window).trigger("popupredraw.lego")},100),this.params.bkCloseUrl&&((new Image).src=this.params.bkCloseUrl)}}},hide:function(){this.setMod("state","hidden")},_action:function(){return!0}}),BEM.DOM.decl({block:"dist-stripe",modName:"product",modVal:"yabrwin10"},{_action:function(){return this.__base(),this.hide(),!0}}),$.extend({debounce:function(t,e,n,i){var o;return 3===arguments.length&&"boolean"!=typeof n&&(i=n,n=!1),function(){var s=arguments;i=i||this,n&&!o&&t.apply(i,s),clearTimeout(o),o=setTimeout(function(){n||t.apply(i,s),o=null},e)}},throttle:function(t,e,n){var i,o,s;return function(){o=arguments,s=!0,n=n||this,i||function(){s?(t.apply(n,o),s=!1,i=setTimeout(arguments.callee,e)):i=null}()}}}),BEM.DOM.decl("header",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.bindToWin("resize",$.throttle(this._onResize,150)),this._collapseUserIfNeeded()}}},_onResize:function(){this._collapseUserIfNeeded()},_onUserUpdatesName:function(){this._collapseBreakpoint=null,this._collapseUserIfNeeded()},_collapseUserIfNeeded:function(){var t=this._getUser();t&&t.toggleCollapsed(this._getCollapseBreakpoint()>=this.elem("nav").width())},_getCollapseBreakpoint:function(){return this._collapseBreakpoint||(this._collapseBreakpoint=this._getNavItemsWidth()+this.__self.NAV_ITEMS_GAP),this._collapseBreakpoint},_getNavItemsWidth:function(){var t=0;return this.elem("nav").children().each(function(){t+=$(this).outerWidth(!0)}),t},_getUser:function(){return this._user?this._user._isDestructing&&(this._collapseBreakpoint=null,this._user=this.findBlockInside("user")):(this._user=this.findBlockInside("user"),this._user&&this._user.on("update-name",this._onUserUpdatesName,this)),this._user}},{NAV_ITEMS_GAP:10,live:!1}),BEM.DOM.decl("b-time-banner",{onSetMod:{js:function(){this.now=Math.round((new Date).getTime()/1e3),this.params.type&&this.show()}},show:function(){var t=this.params,e=t.type,n=t.typeData;(new Image).src=n.show_url,this.domElem.appendTo($(".b-time-banner__place")),this.setMod("type",e),this.bindTo("close","click",this.close),this.elem("inner").html(home.view("b-time-banner__inner",{type:e,text:n.text,helpUrl:t.helpUrl,helpQuery:t.helpQuery,now:this._convertTimestampToString(1e3*t.now),timestamp:this._convertTimestampToString(home.now())})),this.elem("close").attr("data-statlog","wrong_date."+e+".close"),this.setMod("shown","yes"),this.domElem.parents(".b-stripe-wrapper").show()},close:function(){this.setMod("shown","no"),(new Image).src=this.params.typeData.close_url},getDefaultParams:function(){var t=Math.round((new Date).getTime()/1e3),e=this._params,n=e.alert||{},i=n.show&&(n.till_ts>t||n.from_ts&&n.from_ts<t)?"alert":!1;return{now:t,type:i,typeData:e[i]}},_convertTimestampToString:function(t){var e=new Date(t),n=Math.abs(this.params.now-this.params.timestamp)<15379200?home.l10n("time-alert.date_format_short"):home.l10n("time-alert.date_format_long");return n.replace("%day",e.getDate()).replace("%month",home.l10n("spok_yes.month_accus."+(e.getMonth()+1))).replace("%year",e.getFullYear())}}),BEM.KEYS={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,SPACE:32,ESC:27,TAB:9},function(){var t={};for(var e in BEM.KEYS)BEM.KEYS.hasOwnProperty(e)&&(t[BEM.KEYS[e]]=e);var n={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"},i=function(e){var i=t[e.which]||"";for(var o in n)n.hasOwnProperty(o)&&e[n[o]]&&(i=o+"+"+i);return i},o=function(t){var e={};return t.split(" ").forEach(function(t){var i=t.split("+");i.forEach(function(e){var i=e.toUpperCase();if(!(i in n||i in BEM.KEYS))throw"i-keys.js: Unknown key "+t}),e[t.toUpperCase()]=!0}),e};BEM.DOM.liveBindKey=function(t,e,n){var s;return $.isFunction(e)&&(n=e,e=t,t=void 0),s=o(e),this.liveBindTo(t,"keydown",function(t){var e=i(t);e in s&&n.call(this,t)===!1&&t.preventDefault()})},BEM.DOM.prototype.bindKeyTo=function(t,e,n){function s(t){var e=i(t);e in r&&n.call(this,t)===!1&&t.preventDefault()}var r;return $.isFunction(e)&&(n=e,e=t,t=void 0),r=o(e),t===document?this.bindToDoc("keydown",s):t===window?this.bindToWin("keydown",s):this.bindTo(t,"keydown",s)}}(),BEM.DOM.decl("content-tabs",{onClick:function(t,e){var n=e.closest(".content-tabs__head-item");this.hasMod(n,"active","true")||(this.switchTo(n,!0),t.preventDefault())},toggleTab:function(t,e){var n=t.data("stat"),i=t.find(".content-tabs__link");this.toggleMod(t,"active","true","false",e),i.attr("aria-selected",e?"true":"false"),i.attr("tabindex",e?"0":"-1"),this.saveTab(t),n&&e&&home.stat.logPath("click",n)},togglePanel:function(t,e){this.toggleMod(t,"active","true","false",e),t.attr("aria-hidden",e?"false":"true")},switchTo:function(t,e){var n=t.attr("id");this.toggleTab(this.elem("head-item","active","true"),!1),this.toggleTab(t,!0),this.togglePanel(this.elem("items","active","true"),!1),this.togglePanel(this.domElem.find("#"+n+"c"),!0),e&&t.find(".content-tabs__link").focus(),this.trigger("switch",n),home.stat.logDOMShow(this.domElem),BEM.blocks["tabs-stat"].sendTabStat(t)},getFrame:function(){var t=this.elem("frame");return t&&t.length||(t=$('<iframe style="display:none" class="content-tabs__frame" name="content-tabs__frame"></frame>'),this.domElem.append(t),this.dropElemCache("frame")),t},saveTab:function(t){var e=t.data("save-url");if(e){var n=this.getFrame();n.attr("src",e)}},selectRelative:function(t){var e=this.elem("head-item"),n=this.elem("head-item","active","true"),i=$.inArray(n[0],e)+t;if(!(0>i||i>=e.length))return this.switchTo(e.eq(i),!0),!1}},{_selectedTabs:{},live:function(){$("body").on("click",".content-tabs__link",function(t){var e=$(t.target);e.closest(".content-tabs").bem("content-tabs").onClick(t,e)}),this.liveBindKey("link","left",function(){return this.selectRelative(-1)}),this.liveBindKey("link","right",function(){return this.selectRelative(1)})}}),function(){"use strict";BEM.decl("tabs-stat",{},{sendTabStat:function(t){if(!t.attr("data-tabs-stat-sent")){var e=t.attr("data-tabs-stat"),n="/portal/log/json/?type=morda-topnews",i=!1;if(e&&e.length){if("sendBeacon"in navigator&&"FormData"in window){var o=new FormData;o.append("data",e),i=navigator.sendBeacon(n,o)}i||$.ajax({url:n,type:"POST",data:{data:e}}),t.attr("data-tabs-stat-sent","1")}}}})}(),BEM.DOM.decl("datetime",{onSetMod:{js:{inited:function(){var t=this;this._initDate(),this._prevDay=null,this._settedHour="",this._settedMin="",this._serverDate&&"Invalid Date"!==this._serverDate.toString()&&!isNaN(this._serverDate)&&(this.afterCurrentEvent(this._iterate),this._interval=setInterval(function(){t._iterate(),t._blink()},1e3))}}},destruct:function(){clearInterval(this._interval),this.__base.apply(this,arguments)},_initDate:function(){this._serverDate=new Date(this.params.timestamp+" GMT+0000"),this._loadDate=new Date},_iterate:function(){
var t=new Date,e=new Date(this._serverDate.getTime()+(t.getTime()-this._loadDate.getTime()));this._proceedNewDate(e,t)},_proceedNewDate:function(t){var e,n;0===t.getUTCHours()&&0===t.getUTCMinutes()&&this._proceedNextDay(t),e=this._format(t.getUTCHours()),n=this._format(t.getUTCMinutes()),e===this._settedHour&&n===this._settedMin||(this._settedHour=e,this._settedMin=n,this.elem("hour").text(e),this.elem("min").text(n))},_proceedNextDay:function(t){var e=t.getDay();this._prevDay===e||this.hasMod("time-only","yes")||(this._drawNextDay(t,e),this._prevDay=e)},_drawNextDay:function(t,e){var n=this.findElem("date"),i=home.getData("datetime.data",{}),o=this.hasMod("short","yes")?i.monthShortArr:i.monthArr;n.length&&o&&n.replaceWith(home.view("datetime__date",{day:t.getDate(),month:o[t.getMonth()],wday:i.weekArr[e]}))},_format:function(t){return t>9?""+t:"0"+t},_blink:function(){this.toggleMod("time-hidden","yes")}}),home.decline=function(t,e){return e&&e.length?0===t&&e[3]?e[3]:e[1]||e[2]?e[2]?(t%=100,t>=20&&(t%=10),1===t?e[0]:t>1&&5>t?e[1]:e[2]):t>=0&&1>=t?e[0]:e[1]:e[0]:""},BEM.DOM.decl("inline-stocks",{onSetMod:{js:function(){this.bindMouseEvents(),this.xivainitTimer=setTimeout(this.changeThis(this.initXiva),6e4)}},bindMouseEvents:function(){if(!window.device){var t={root:{name:"hovered",val:"yes"},item:{name:"hint",val:"visible",elem:".inline-stocks__item"}};this.bindTo("mouseenter",this.getOnmouseenter(t.root)),this.bindTo("mouseleave",this.getOnmouseleave(t.root)),this.bindTo("item","mouseenter",this.getOnmouseenter(t.item)),this.bindTo("item","mouseleave",this.getOnmouseleave(t.item))}},getOnmouseenter:function(t){return function(e){var n=this;t.countdown||(t.countdown=setTimeout(function(){if(t.countdown=null,t.elem){var i=$(e.target).closest(t.elem);n.setMod(i,t.name,t.val)}else n.setMod(t.name,t.val)},t.delay||250))}},getOnmouseleave:function(t){return function(e){var n=this;if(clearTimeout(t.countdown),t.countdown=null,t.elem){var i=$(e.target).closest(t.elem);n.delMod(i,t.name)}else n.delMod(t.name)}},initXiva:function(){var t=home.getData("inline-stocks.xivas")||[],e=this;t.forEach(function(t){BEM.blocks["i-xiva"].listen(t.ch,t.ts,function(t){e.updateFunc(t.dt)})})},updateFunc:function(t){if(t&&t.id){var e=t.id,n=this.elem("item","id",e);if(n.length){t=t.data&&t.data[0],$(".inline-stocks__value_inner",n).html(t.value);var i=this.findElem(n,"cell","type","delta"),o=this.findElem(n,"cell","type","delta-label");t.delta?(i.html(t.delta).removeClass("i-hidden"),o.html(t.delta.replace("","-")),this.setMod(i,"delta",t.is_hot?"hot":"small")):(i.addClass("i-hidden"),o.html(""));var s=home.getData("inline-stocks.alts")||{};s[e]&&$(".inline-stocks__item__baloon_inner",n).html(s[e].replace("%d",t.date).replace("%t",t.time))}}}}),function(){var t;t=function(){var t=document,e=window,n={},i=function(){};i.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var i=this._listeners[t];-1===n.arrIndexOf(i,e)&&i.push(e)},i.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var i=this._listeners[t],o=n.arrIndexOf(i,e);return-1!==o?void(i.length>1?this._listeners[t]=i.slice(0,o).concat(i.slice(o+1)):delete this._listeners[t]):void 0}},i.prototype.dispatchEvent=function(t){var e=t.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,n),this._listeners&&e in this._listeners)for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].apply(this,n)};var o=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])};o.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var n=this[e];"function"==typeof n&&(n="[function]"),t.push(e+"="+n)}return"SimpleEvent("+t.join(", ")+")"};var s=function(t){var e=this;e._events=t||[],e._listeners={}};s.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var n=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,n),t in e._listeners)for(var i=0;i<e._listeners[t].length;i++)e._listeners[t][i].apply(e,n)}},s.prototype.on=function(t,e){var n=this;n._verifyType(t),n._nuked||(t in n._listeners||(n._listeners[t]=[]),n._listeners[t].push(e))},s.prototype._verifyType=function(t){var e=this;-1===n.arrIndexOf(e._events,t)&&n.log("Event "+JSON.stringify(t)+" not listed "+JSON.stringify(e._events)+" in "+e)},s.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var r="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(t,e){e=e||r.length;var n,i=[];for(n=0;t>n;n++)i.push(r.substr(Math.floor(Math.random()*e),1));return i.join("")},n.random_number=function(t){return Math.floor(Math.random()*t)},n.random_number_string=function(t){var e=(""+(t-1)).length,i=Array(e+1).join("0");return(i+n.random_number(t)).slice(-e)},n.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},n.isSameOriginUrl=function(t,n){return n||(n=e.location.href),t.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},n.objectExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var a="_jp";n.polluteGlobalNamespace=function(){a in e||(e[a]={})},n.closeFrame=function(t,e){return"c"+JSON.stringify([t,e])},n.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},n.countRTO=function(t){var e;return e=t>100?3*t:t+200},n.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},n.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},n.amendUrl=function(e){var i=t.location;if(!e)throw new Error("Wrong url for SockJS");if(!n.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");return 0===e.indexOf("//")&&(e=i.protocol+e),0===e.indexOf("/")&&(e=i.protocol+"//"+i.host+e),e=e.replace(/[\/]+$/,"")},n.arrIndexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.arrSkip=function(t,e){var i=n.arrIndexOf(t,e);if(-1===i)return t.slice();var o=t.slice(0,i);return o.concat(t.slice(i+1))},n.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},n.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var u,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","\x0B":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","\ufeff":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},h=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(t){return c.lastIndex=0,c.test(t)&&(t=t.replace(c,function(t){return l[t]})),'"'+t+'"'},p=function(t){var e,n={},i=[];for(e=0;65536>e;e++)i.push(String.fromCharCode(e));return t.lastIndex=0,i.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n};n.quote=function(t){var e=d(t);return h.lastIndex=0,h.test(e)?(u||(u=p(h)),e.replace(h,function(t){return u[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var n=f[e];t[n]=E[n]&&E[n].enabled()}return t},n.detectProtocols=function(t,e,n){var i={},o=[];e||(e=f);for(var s=0;s<e.length;s++){var r=e[s];i[r]=t[r]}var a=function(t){var e=t.shift();i[e]?o.push(e):t.length>0&&a(t)};return n.websocket!==!1&&a(["websocket"]),i["xhr-streaming"]&&!n.null_origin?o.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):o.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?o.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):o.push("xdr-polling"),o};var m="_sockjs_global";n.createHook=function(){var t="a"+n.random_string(8);if(!(m in e)){var i={};e[m]=function(t){return t in i||(i[t]={id:t,del:function(){delete i[t]}}),i[t]}}return e[m](t)},n.attachMessage=function(t){n.attachEvent("message",t)},n.attachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.addEventListener(n,i,!1):(t.attachEvent("on"+n,i),e.attachEvent("on"+n,i))},n.detachMessage=function(t){n.detachEvent("message",t)},n.detachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.removeEventListener(n,i,!1):(t.detachEvent("on"+n,i),e.detachEvent("on"+n,i))};var _={},g=!1,v=function(){for(var t in _)_[t](),delete _[t]},b=function(){g||(g=!0,v())};n.attachEvent("unload",b),n.unload_add=function(t){var e=n.random_string(8);return _[e]=t,g&&n.delay(v),e},n.unload_del=function(t){t in _&&delete _[t]},n.createIframe=function(e,i){var o,s,r=t.createElement("iframe"),a=function(){clearTimeout(o);try{r.onload=null}catch(t){}r.onerror=null},u=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),n.unload_del(s))},c=function(t){r&&(u(),i(t))},l=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(n){}};return r.src=e,r.style.display="none",r.style.position="absolute",r.onerror=function(){c("onerror")},r.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},t.body.appendChild(r),o=setTimeout(function(){c("timeout")},15e3),s=n.unload_add(u),{post:l,cleanup:u,loaded:a}},n.createHtmlfile=function(t,i){var o,s,r,u=new ActiveXObject("htmlfile"),c=function(){clearTimeout(o)},l=function(){u&&(c(),n.unload_del(s),r.parentNode.removeChild(r),r=u=null,CollectGarbage())},h=function(t){u&&(l(),i(t))},d=function(t,e){try{r&&r.contentWindow&&r.contentWindow.postMessage(t,e)}catch(n){}};u.open(),u.write('<html><script>document.domain="'+document.domain+'";</script></html>'),u.close(),u.parentWindow[a]=e[a];var p=u.createElement("div");return u.body.appendChild(p),r=u.createElement("iframe"),p.appendChild(r),r.src=t,o=setTimeout(function(){h("timeout")},15e3),s=n.unload_add(l),{post:d,cleanup:l,loaded:c}};var y=function(){};y.prototype=new s(["chunk","finish"]),y.prototype._start=function(t,i,o,s){var r=this;try{r.xhr=new XMLHttpRequest}catch(a){}if(!r.xhr)try{r.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xhr.open(t,i,!0)}catch(u){return r.emit("finish",0,""),void r._cleanup()}if(s&&s.no_credentials||(r.xhr.withCredentials="true"),s&&s.headers)for(var c in s.headers)r.xhr.setRequestHeader(c,s.headers[c]);r.xhr.onreadystatechange=function(){if(r.xhr){var t=r.xhr;switch(t.readyState){case 3:try{var e=t.status,n=t.responseText}catch(t){}1223===e&&(e=204),n&&n.length>0&&r.emit("chunk",e,n);break;case 4:var e=t.status;1223===e&&(e=204),r.emit("finish",e,t.responseText),r._cleanup(!1)}}},r.xhr.send(o)},y.prototype._cleanup=function(t){var e=this;if(e.xhr){if(n.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(i){}e.unload_ref=e.xhr=null}},y.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var w=n.XHRCorsObject=function(){var t=this,e=arguments;n.delay(function(){t._start.apply(t,e)})};w.prototype=new y;var k=n.XHRLocalObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i,{no_credentials:!0})})};k.prototype=new y;var x=n.XDRObject=function(t,e,i){var o=this;n.delay(function(){o._start(t,e,i)})};x.prototype=new s(["chunk","finish"]),x.prototype._start=function(t,e,i){var o=this,s=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var r=s.ontimeout=s.onerror=function(){o.emit("finish",0,""),o._cleanup(!1)};s.onprogress=function(){o.emit("chunk",200,s.responseText)},s.onload=function(){o.emit("finish",200,s.responseText),o._cleanup(!1)},o.xdr=s,o.unload_ref=n.unload_add(function(){o._cleanup(!0)});try{o.xdr.open(t,e),o.xdr.send(i)}catch(a){r()}},x.prototype._cleanup=function(t){var e=this;if(e.xdr){if(n.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(i){}e.unload_ref=e.xdr=null}},x.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},n.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:F.enabled()?3:4};var E=function(t,i,o){if(this===e)return new E(t,i,o);var s,r=this;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},o&&n.objectExtend(r._options,o),r._base_url=n.amendUrl(t),r._server=r._options.server||n.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?s=r._options.protocols_whitelist:(s="string"==typeof i&&i.length>0?[i]:n.isArray(i)?i:null,s&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),r._protocols=[],r.protocol=null,r.readyState=E.CONNECTING,r._ir=H(r._base_url),r._ir.onfinish=function(t,e){r._ir=null,t?(r._options.info&&(t=n.objectExtend(t,r._options.info)),r._options.rtt&&(e=r._options.rtt),r._applyInfo(t,e,s),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};E.prototype=new i,E.version="0.3.4",E.CONNECTING=0,E.OPEN=1,E.CLOSING=2,E.CLOSED=3,E.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},E.prototype._dispatchOpen=function(){var t=this;t.readyState===E.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=E.OPEN,t.dispatchEvent(new o("open"))):t._didClose(1006,"Server lost session")},E.prototype._dispatchMessage=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("message",{data:t}))},E.prototype._dispatchHeartbeat=function(t){var e=this;e.readyState===E.OPEN&&e.dispatchEvent(new o("heartbeat",{}))},E.prototype._didClose=function(t,e,i){var s=this;if(s.readyState!==E.CONNECTING&&s.readyState!==E.OPEN&&s.readyState!==E.CLOSING)throw new Error("INVALID_STATE_ERR");s._ir&&(s._ir.nuke(),s._ir=null),s._transport&&(s._transport.doCleanup(),s._transport=null);var r=new o("close",{code:t,reason:e,wasClean:n.userSetCode(t)});if(!n.userSetCode(t)&&s.readyState===E.CONNECTING&&!i){if(s._try_next_protocol(r))return;r=new o("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:r})}s.readyState=E.CLOSED,n.delay(function(){s.dispatchEvent(r)})},E.prototype._didMessage=function(t){var e=this,n=t.slice(0,1);switch(n){case"o":e._dispatchOpen();break;case"a":for(var i=JSON.parse(t.slice(1)||"[]"),o=0;o<i.length;o++)e._dispatchMessage(i[o]);break;case"m":var i=JSON.parse(t.slice(1)||"null");e._dispatchMessage(i);break;case"c":var i=JSON.parse(t.slice(1)||"[]");e._didClose(i[0],i[1]);break;case"h":e._dispatchHeartbeat()}},E.prototype._try_next_protocol=function(e){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+e),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var o=i.protocol=i._protocols.shift();if(!o)return!1;if(E[o]&&E[o].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return i._protocols.unshift(o),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(E[o]&&E[o].enabled(i._options)){var s=E[o].roundTrips||1,r=(i._options.rto||0)*s||5e3;i._transport_tref=n.delay(r,function(){i.readyState===E.CONNECTING&&i._didClose(2007,"Transport timeouted")});var a=n.random_string(8),u=i._base_url+"/"+i._server+"/"+a;return i._debug("Opening transport:",o," url:"+u," RTO:"+i._options.rto),i._transport=new E[o](i,u,i._base_url),!0}i._debug("Skipping transport:",o)}},E.prototype.close=function(t,e){var i=this;if(t&&!n.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==E.CONNECTING&&i.readyState!==E.OPEN?!1:(i.readyState=E.CLOSING,i._didClose(t||1e3,e||"Normal closure"),!0)},E.prototype.send=function(t){var e=this;if(e.readyState===E.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===E.OPEN&&e._transport.doSend(n.quote(""+t)),!0},E.prototype._applyInfo=function(e,i,o){var s=this;s._options.info=e,s._options.rtt=i,s._options.rto=n.countRTO(i),s._options.info.null_origin=!t.domain;var r=n.probeProtocols();s._protocols=n.detectProtocols(r,o,e)};var M=E.websocket=function(t,i){var o=this,s=i+"/websocket";s="https"===s.slice(0,5)?"wss"+s.slice(5):"ws"+s.slice(4),o.ri=t,o.url=s;var r=e.WebSocket||e.MozWebSocket;o.ws=new r(o.url),o.ws.onmessage=function(t){o.ri._didMessage(t.data)},o.unload_ref=n.unload_add(function(){o.ws.close()}),o.ws.onclose=function(){o.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};M.prototype.doSend=function(t){this.ws.send("["+t+"]")},M.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),n.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},M.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},M.roundTrips=2;var S=function(){};S.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},S.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},S.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},S.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,n){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+n):t.send_schedule_wait()}),t.send_buffer=[]}},S.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var C=function(e,i,o){var s=this;if(!("_send_form"in s)){var r=s._send_form=t.createElement("form"),a=s._send_area=t.createElement("textarea");a.name="d",r.style.display="none",r.style.position="absolute",r.method="POST",r.enctype="application/x-www-form-urlencoded",r.acceptCharset="UTF-8",r.appendChild(a),t.body.appendChild(r)}var r=s._send_form,a=s._send_area,u="a"+n.random_string(8);r.target=u,r.action=e+"/jsonp_send?i="+u;var c;try{c=t.createElement('<iframe name="'+u+'">')}catch(l){c=t.createElement("iframe"),c.name=u}c.id=u,r.appendChild(c),c.style.display="none";try{a.value=i}catch(h){n.log("Your browser is seriously broken. Go home! "+h.message)}r.submit();var d=function(t){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,n.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",o(!0))};return c.onerror=c.onload=d,c.onreadystatechange=function(t){"complete"==c.readyState&&d()},d},T=function(t){return function(e,n,i){var o=new t("POST",e+"/xhr_send",n);return o.onfinish=function(t,e){i(200===t||204===t,"http status "+t)},function(t){i(!1,t)}}},B=function(e,i){var o,s,r=t.createElement("script"),a=function(t){s&&(s.parentNode.removeChild(s),s=null),r&&(clearTimeout(o),r.parentNode.removeChild(r),r.onreadystatechange=r.onerror=r.onload=r.onclick=null,r=null,i(t),i=null)},u=!1,c=null;if(r.id="a"+n.random_string(8),r.src=e,r.type="text/javascript",r.charset="UTF-8",r.onerror=function(t){c||(c=setTimeout(function(){u||a(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},r.onload=function(t){a(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},r.onreadystatechange=function(t){if(/loaded|closed/.test(r.readyState)){if(r&&r.htmlFor&&r.onclick){u=!0;try{r.onclick()}catch(e){}}r&&a(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof r.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))s=t.createElement("script"),s.text="try{var a = document.getElementById('"+r.id+"'); if(a)a.onerror();}catch(x){};",r.async=s.async=!1;else{try{r.htmlFor=r.id,r.event="onclick"}catch(l){}r.async=!0}"undefined"!=typeof r.async&&(r.async=!0),o=setTimeout(function(){a(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var h=t.getElementsByTagName("head")[0];return h.insertBefore(r,h.firstChild),s&&h.insertBefore(s,h.firstChild),a},D=E["jsonp-polling"]=function(t,e){n.polluteGlobalNamespace();var i=this;i.ri=t,i.trans_url=e,i.send_constructor(C),i._schedule_recv()};D.prototype=new S,D.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=I(t.trans_url+"/jsonp",B,e)},D.enabled=function(){return!0},D.need_body=!0,D.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var I=function(t,i,o){var s="a"+n.random_string(6),r=t+"?c="+escape(a+"."+s),u=0,c=function(t){switch(u){case 0:delete e[a][s],o(t);break;case 1:o(t),u=2;break;case 2:delete e[a][s]}},l=i(r,c);e[a][s]=l;var h=function(){e[a][s]&&(u=1,e[a][s](n.closeFrame(1e3,"JSONP user aborted read")))};return h},O=function(){};O.prototype=new S,O.prototype.run=function(t,e,n,i,o){var s=this;s.ri=t,s.trans_url=e,s.send_constructor(T(o)),s.poll=new Q(t,i,e+n,o)},O.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var P=E["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",it,n.XHRCorsObject)};P.prototype=new O,P.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},P.roundTrips=2,P.need_body=!0;var A=E["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",it,n.XDRObject)};A.prototype=new O,A.enabled=function(){return!!e.XDomainRequest},A.roundTrips=2;var j=E["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XHRCorsObject)};j.prototype=new O,j.enabled=P.enabled,j.roundTrips=2;var N=E["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XDRObject)};N.prototype=new O,N.enabled=A.enabled,N.roundTrips=2;var F=function(){};F.prototype.i_constructor=function(t,e,i){var o=this;o.ri=t,o.origin=n.getOrigin(i),o.base_url=i,o.trans_url=e;var s=i+"/iframe.html";o.ri._options.devel&&(s+="?t="+ +new Date),o.window_id=n.random_string(8),s+="#"+o.window_id,o.iframeObj=n.createIframe(s,function(t){o.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),o.onmessage_cb=n.bind(o.onmessage,o),n.attachMessage(o.onmessage_cb)},F.prototype.doCleanup=function(){var t=this;if(t.iframeObj){n.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},F.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var n=t.data.slice(0,8),i=t.data.slice(8,9),o=t.data.slice(9);if(n===e.window_id)switch(i){case"s":e.iframeObj.loaded(),e.postMessage("s",JSON.stringify([E.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(o)}}},F.prototype.postMessage=function(t,e){var n=this;n.iframeObj.post(n.window_id+t+(e||""),n.origin)},F.prototype.doSend=function(t){this.postMessage("m",t)},F.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var R,L=function(t,i){parent!==e?parent.postMessage(R+t+(i||""),"*"):n.log("Can't postMessage, no parent window.",t,i)},q=function(){};q.prototype._didClose=function(t,e){L("t",n.closeFrame(t,e))},q.prototype._didMessage=function(t){L("t",t)},q.prototype._doSend=function(t){this._transport.doSend(t)},q.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,E.bootstrap_iframe=function(){var i;R=t.location.hash.slice(1);var o=function(t){if(t.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=t.origin),t.origin===n.parent_origin)){var o=t.data.slice(0,8),s=t.data.slice(8,9),r=t.data.slice(9);if(o===R)switch(s){case"s":var a=JSON.parse(r),u=a[0],c=a[1],l=a[2],h=a[3];if(u!==E.version&&n.log('Incompatibile SockJS! Main site uses: "'+u+'", the iframe: "'+E.version+'".'),!n.flatUrl(l)||!n.flatUrl(h))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(l)||!n.isSameOriginUrl(h))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([e.location.href,l,h])+")");i=new q,i._transport=new q[c](i,l,h);break;case"m":i._doSend(r);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(o),L("s")};var U=function(t,e){var i=this;n.delay(function(){i.doXhr(t,e)})};U.prototype=new s(["finish"]),U.prototype.doXhr=function(t,e){var i=this,o=(new Date).getTime(),s=new e("GET",t+"/info"),r=n.delay(8e3,function(){s.ontimeout()});s.onfinish=function(t,e){if(clearTimeout(r),r=null,200===t){var n=(new Date).getTime()-o,s=JSON.parse(e);"object"!=typeof s&&(s={}),i.emit("finish",s,n)}else i.emit("finish")},s.ontimeout=function(){s.close(),i.emit("finish")}};var $=function(e){var i=this,o=function(){var t=new F;t.protocol="w-iframe-info-receiver";var n=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var n=JSON.parse(e.substr(1)),o=n[0],s=n[1];i.emit("finish",o,s)}else i.emit("finish");t.doCleanup(),t=null},o={_options:{},_didClose:n,_didMessage:n};t.i_constructor(o,e,e)};t.body?o():n.attachEvent("load",o)};$.prototype=new s(["finish"]);var z=function(){var t=this;n.delay(function(){t.emit("finish",{},2e3)})};z.prototype=new s(["finish"]);var H=function(t){if(n.isSameOriginUrl(t))return new U(t,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new U(t,n.XHRLocalObject);case 2:return new U(t,n.XDRObject);case 3:return new $(t);default:return new z}},V=q["w-iframe-info-receiver"]=function(t,e,i){var o=new U(i,n.XHRLocalObject);o.onfinish=function(e,n){t._didMessage("m"+JSON.stringify([e,n])),t._didClose()}};V.prototype.doCleanup=function(){};var K=E["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};K.prototype=new F,K.enabled=function(){return"EventSource"in e&&F.enabled()},K.need_body=!0,K.roundTrips=3;var W=q["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",Z,n.XHRLocalObject)};W.prototype=new O;var J=E["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};J.prototype=new F,J.enabled=function(){return e.XMLHttpRequest&&F.enabled()},J.need_body=!0,J.roundTrips=3;var X=q["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",it,n.XHRLocalObject)};X.prototype=new O;var G=E["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};G.prototype=new F,G.enabled=function(){return F.enabled()},G.need_body=!0,G.roundTrips=3;var Y=q["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",nt,n.XHRLocalObject)};Y.prototype=new O;var Q=function(t,e,n,i){var o=this;o.ri=t,o.Receiver=e,o.recv_url=n,o.AjaxObject=i,o._scheduleRecv()};Q.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),n=0;e.onmessage=function(e){n+=1,t.ri._didMessage(e.data)},e.onclose=function(n){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===n.reason?t.ri._didClose(1006,"Polling error ("+n.reason+")"):t._scheduleRecv())}},Q.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var Z=function(t){var e=this,i=new EventSource(t);i.onmessage=function(t){e.dispatchEvent(new o("message",{data:unescape(t.data)}))},e.es_close=i.onerror=function(t,s){var r=s?"user":2!==i.readyState?"network":"permanent";e.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){e.dispatchEvent(new o("close",{reason:r}))})}};Z.prototype=new i,Z.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var tt,et=function(){if(void 0===tt)if("ActiveXObject"in e)try{tt=!!new ActiveXObject("htmlfile")}catch(t){}else tt=!1;return tt},nt=function(t){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+i.id);var s,r=et()?n.createHtmlfile:n.createIframe;e[a][i.id]={start:function(){s.loaded()},message:function(t){i.dispatchEvent(new o("message",{data:t}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(t,n){s.cleanup(),i.iframe_close=s=null,delete e[a][i.id],i.dispatchEvent(new o("close",{reason:n}))},s=r(t,function(t){i.iframe_close({},"permanent")})};nt.prototype=new i,nt.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var it=function(t,e){var n=this,i=0;n.xo=new e("POST",t,null),n.xo.onchunk=function(t,e){if(200===t)for(;;){var s=e.slice(i),r=s.indexOf("\n");if(-1===r)break;i+=r+1;var a=s.slice(0,r);n.dispatchEvent(new o("message",{data:a}))}},n.xo.onfinish=function(t,e){n.xo.onchunk(t,e),n.xo=null;var i=200===t?"network":"permanent";n.dispatchEvent(new o("close",{reason:i}))}};return it.prototype=new i,it.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new o("close",{reason:"user"})),t.xo=null)},E.getUtils=function(){return n},E.getIframeTransport=function(){return F},E}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return t}),function(){"use strict";var e,n,i,o={},s=!1,r=0,a=!1,u=!0,c=[],l=!0;
BEM.decl("i-xiva",{},{listen:function(t,e,n,i){var s=!o[t];s&&(o[t]={handlers:[]}),o[t].ts=e,o[t].handlers.push(n),this._init(i),s&&this._updateSubscription()},stopListen:function(t,e){o[t]&&(o[t].handlers=o[t].handlers.filter(function(t){return t!==e}),o[t].handlers.length||(delete o[t],this._updateSubscription()))},send:function(t){var e;this._hasXivaSupport()&&t&&t.ch&&(this._connected||this._init(!0),e=JSON.stringify(t),this._sendQueue.push(e),this._sendDelayed())},_sendQueue:[],_sendDelayed:function(){var t;if(this._connected)for(;this._sendQueue.length;)t=this._sendQueue.pop(),e.send(t)},connect:function(){u=!0,this._connect()},disconnect:function(t){u=t,e&&e.close&&e.close(1e3,"unload")},_deliverReceived:function(){var t,e,n,i=!0;for(t=0,e=c.length;e>t;++t)(n=c[t].handler)(c[t].data,i);c=[]},_toggleFocus:function(t){l=t,l&&this._deliverReceived()},_initFocusEvents:function(){var t=this;$.browser&&$.browser.msie?$(document).bind("focusout",function(){t._toggleFocus(!1)}).bind("focusin",function(){t._toggleFocus(!0)}):$(window).focus(function(){t._toggleFocus(!0)}).blur(function(){t._toggleFocus(!1)})},_bindOnUnload:function(){var t=this;$(window).on("beforeunload",function(){t.disconnect(!1)})},_init:function(t){s&&!t||this._connected||(s=!0,this._initFocusEvents(),this._bindOnUnload(),this._connect=this._connect.bind(this),clearTimeout(this._connectTimeout),t?this._connect():this._connectTimeout=setTimeout(function(){this._connect()}.bind(this),6e4))},_hasXivaSupport:function(){return!!window.WebSocket},_connect:function(){var n=BEM.blocks["i-global"].param("xivaUrl");this._hasXivaSupport()&&n&&(e||(e=new t("//"+n+"/xiva",null,{protocols_whitelist:["websocket"]}),e.onopen=function(){this._connected=!0,this._updateSubscription(),this._checkConnection(),this._sendDelayed()}.bind(this),e.onmessage=this._onMessage,e.onclose=function(){this._connected=!1,this._reconnect()}.bind(this)))},_reconnect:function(){this._stopConnectionTimer(),u&&(r++,5>=r?setTimeout(this._connect,3e3):15>=r?setTimeout(this._connect,1e4):setTimeout(this._connect,6e4))},_stopConnectionTimer:function(){n&&(clearTimeout(n),n=null)},_checkConnection:function(){this._stopConnectionTimer(),n=setTimeout(function(){a&&(r=0)},5e3)},_updateSubscription:function(){i&&clearTimeout(i),i=setTimeout(function(){this._subscribeSend()}.bind(this),100)},_subscribeSend:function(){var t;if(this._connected){t={subscribe:{}};for(var n in o)o.hasOwnProperty(n)&&(t.subscribe[n]=o[n].ts);e.send(JSON.stringify(t))}},_onMessage:function(t){var e,n,i,s,r=$.trim(t.data);try{if(e=JSON.parse(r),i=e.ch+"_"+e.key,o[i]&&(n=parseInt(e.ts),o[i].ts<n)){o[i].ts=n,s=o[i].handlers;for(var a=0,u=s.length;u>a;++a)l?s[a](e):c.push({handler:s[a],data:e})}}catch(h){}}})}()}(),function(){var t=6e4;BEM.DOM.decl({block:"inline-stocks",modName:"new",modVal:"yes"},{onSetMod:{js:function(){this.__base(),this.bindTo("more","pointerclick",this.toggleMore),this.bindTo("more","keydown",this._keydown),this.getPopup()._owner=this.domElem}},_keydown:function(t){if(!(t.altKey||t.metaKey||t.ctrlKey||t.shiftKey))switch(t.which){case 32:t.preventDefault();case 13:this.toggleMore()}},toggleMore:function(){var t=this.getPopup();t.isShown()||this.onShow(t),t.toggle(this.domElem)},getPopup:function(){return this.__self._popup||(this.__self._popup=this.createPopup())},onShow:function(e){var n=this;return!this.data||this.data&&this.datats&&Number(new Date-this.datats)>t?(n.toggleState("load"),$.ajax({url:this.params.stocksUrl,dataType:"json",success:function(t){return t&&t.Stocks?(n.datats=Number(new Date),n.data=t,n.createTable(t,e),void n.onShow(e)):void n.toggleState("error")},error:function(){n.toggleState("error")}})):(this.toggleState("tables"),home.stat.logDOMShow(e.domElem,{visibilityCheck:!1}),this.getPopup()._unbindFocusEvents(),void this.getPopup()._bindFocusEvents())},createPopup:function(){var t=$(BEMHTML.apply({block:"popup",mods:{theme:"ffffff",autoclosable:"yes","has-close":"yes",animate:"yes",adaptive:"yes"},cls:"inline-stocks__popup-wrap",js:{directions:[{to:"bottom",axis:"left",offset:{left:-25,top:-25}}]},content:[{elem:"close",attrs:{"data-statlog":"news_rates_manual.popup.close"}},{elem:"content",mods:{padded:"old"}}]}));return t=this.findBlockOn(t,"popup"),this.__self.popup=this.elem("popup"),t.elem("content").append(this.__self.popup),this.getInstance()&&this.bindTo(this.findElem(t.domElem,"tune"),"click",this.showForm),t.on("show hide",function(){this.isShown()?this.elem("more").attr("aria-expanded","true"):this.elem("more").attr("aria-expanded","false")}),t.on("outside-click",function(t,e){return $(e.target).closest("#widget_pref_form").length?!1:void 0}),t},templates:{val:function(t){return'<td><i class="inline-stocks__cell">'+t.value+"</i></td>"},delta:function(t,e){var n,i=home.getData("inline-stocks.alts");return e&&i&&(n=i.bigdiff.replace(/%d%(%)/,e+"$1")),t.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(t.is_hot?"hot":"small")+'"'+(n&&t.is_hot?' title="'+n+'"':"")+' aria-hidden="true">'+t.delta+'</i><span class="a11y-hidden">'+String(t.delta).replace("","-")+"</span></td>":""},date:function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}},rowsByType:{cash:function(t){return t.map(this.templates.val).join("")},currency:function(t,e){return t.map(function(t,n){return(n?this.templates.delta(t,e):"")+this.templates.val(t)},this).join("")},indexes:function(t,e){var n=t[0];return this.templates.date(n)+this.templates.delta(n,e)+this.templates.val(n)}},createTable:function(t){var e=this,n=home.view("inline-stocks__tables",t.Stocks),i=this.findElem(this.__self.popup,"tables");i.html(n),this.findElem(i,"table").each(function(){e.toggleTommorrowTitleVisibility($(this))})},toggleTommorrowTitleVisibility:function(t){var e=this.getMod(t,"type");if("indexes"!==e){var n=t.find("tr:not(.inline-stocks__head)"),i=0;n.each(function(){var t=$(this).find("td").length;t>i&&(i=t)});var o="hide";(i>3&&"currency"===e||i>2&&"cash"===e)&&(o="show"),t.find(".inline-stocks__head .inline-stocks__cell:last")[o]()}},updateFunc:function(t){this.__base(t)},replaceCaps:function(t){return t.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,n){switch(e){case"c":return'<span class="b-stocks__caps">'+n+"</span>";case"d":return'<span class="b-stocks__numbers">'+n+"</span>";default:return t}})},toggleState:function(t){this.setMod(this.__self.popup,"state",t)},getId:function(){return"_stocks-1"},getInstance:function(){return window.Widget&&Widget.Framework.get("_stocks-1")},showForm:function(t){var e=this;t.preventDefault(),this.toggleMore(),$(".b-wdgt-preferences").bem("b-wdgt-preferences").show($("#wd-wrapper-"+this.getId()).bem("widget"),function(){e.data=null,e.toggleMore()})}})}(),function(t,e,n){function i(t,e,n){(t[e]||(t[e]=[])).unshift(n)}function o(t,e){return e.modName?function(n){(n._curBlock.mods||{})[e.modName]===e.modVal&&t(n)}:t}function s(t,n){var i,o=e.isArray(n);return e.isArray(t)?o?i=t.concat(n):(i=t).push(n):o?(i=n).unshift(t):i=[t,n],i}function r(t){return t.replace(f,function(t){return p[t]})}var a=t.INTERNAL,u=a.ELEM_DELIM,c={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},l=a.buildClass,h=a.buildClasses,d={},p={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},f=/["&<>]/g;t.HTML={decl:function(t,n){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var s=d[t.block]||(d[t.block]={});n.onBlock&&i(s,"_block",o(n.onBlock,t)),n.onElem&&(e.isFunction(n.onElem)?i(s,"_elem",o(n.onElem,t)):e.each(n.onElem,function(e,n){i(s,"_elem"+("*"===e?"":u+e),o(n,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=n},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){var e=this;return"undefined"==typeof t?e._params:(e._params=t,e)},param:function(t,n,i,o){var s=this,r=s._params;return"undefined"==typeof n?r[t]:(!i&&t in r?o&&(r[t]=e.extend(n,r[t])):r[t]=n,s)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.attrs||{})[t];var o=i._params.attrs;return o?(n||!(t in o))&&(o[t]=e):(i._params.attrs={})[t]=e,i},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,n){var i=this;if("undefined"==typeof e)return(i._params.mods||{})[t];var o=i._params.mods;return o?(n||!(t in o))&&(o[t]=e):(i._params.mods={})[t]=e,i},mix:function(t,e){var n=this,i=n._params;return"undefined"==typeof t?i.mix:(!e&&"mix"in i?i.mix=i.mix.concat(t):i.mix=t,n)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this,n=e._params;return t.content=n.content,n.content=t,e},beforeContent:function(t){var e=this,n=e._params;return n.content=s(t,n.content),e},afterContent:function(t){var e=this,n=e._params;return n.content=s(n.content,t),e},wrap:function(t){var e=this,n=e._params;return t.block||(t._curBlock=e._curBlock),t.content=n._wrapper?n._wrapper:n,n._wrapper=t,e},tParam:function(t,e){var n=this,i=n._tParams||(n._tParams={});if("undefined"==typeof e)return i[t];var o=n._tParamsChanges||(n._tParamsChanges={});return t in o||(o[t]=i[t]),i[t]=e,n},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this,n=t._buffer,i=t._params,o=typeof i;if("string"===o||"number"===o)n.push(i);else if(e.isArray(i))for(var s,r,a=0,u=i.length;u>a;)t._params=s=i[a++],r=typeof s,"string"===r||"number"===r?n.push(s):s&&(s._pos=a,s._siblingsCount=u,t._buildByDecl());else i&&(t._params._pos=t._params._siblingsCount=1,t._buildByDecl())},_build:function(){var t,n=this,i=n._buffer,o=n._params,s=o.tag||"div",a=o.block||o.elem,u=a&&(o.block||n._curBlock.block),d=!1;o.js&&((t={})[l(u,o.elem)]=o.js===!0?{}:o.js,d=!o.elem),i.push("<",s),(a||o.cls)&&(i.push(' class="'),a&&(h(u,o.elem,o.mods,i),o.mix&&e.each(o.mix,function(e,n){n&&(i.push(" "),h(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[l(n.block,n.elem)]=n.js===!0?{}:n.js,d||(d=!n.elem)))})),o.cls&&i.push(a?" ":"",o.cls),d&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',r(JSON.stringify(t)),'"'),o.attrs&&e.each(o.attrs,function(t,e){"undefined"!=typeof e&&null!==e&&e!==!1&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),c[s]?i.push("/>"):(i.push(">"),"undefined"!=typeof o.content&&(n._params=o.content,n._buildAll()),i.push("</",s,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this,n=t._curBlock,i=t._params;if(i._curBlock&&(t._curBlock=i._curBlock),i.block&&(t._curBlock=i),!i._wrapper){if(i.block||i.elem){var o=d[t._curBlock.block];if(o){var s;if(i.elem?(s=o["_elem"+u+i.elem],o._elem&&(s=s?s.concat(o._elem):o._elem)):s=o._block,s)for(var r,a=0;(r=s[a++])&&(r(t),!i._isStopped););}}if(i._wrapper)return i._curBlock=t._curBlock,t._params=i._wrapper,t._buildAll()}var c=t._tParamsChanges;if(t._tParamsChanges=null,t._build(),t._curBlock=n,c){var l=t._tParams;e.each(c,function(t,e){"undefined"==typeof e?delete l[t]:l[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,n=t.findBlockOn(t.elem(e.popupElem),"popup"),i=t.elem("switcher"),o=e.switcherBlock;t._popup=n,t._switcher=i,n.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.map(function(e){t[e]=n[e].bind(n)}),o&&(t._switcher=t.findBlockOn(i,o).domElem),i.attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var n="open"===e;this.elem("switcher").attr("aria-expanded",n),this._getButton()&&this._getButton().toggleMod("arrow","up","down",n)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){var t=["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this);t&&!this._popup.isShown()||this._popup.toggle(this._switcher)},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),n=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===n.ENTER||t.keyCode===n.SPACE)&&(t.preventDefault(),this.params.switcherBlock||this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("dropdown",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._switcher=this._switcher||this.elem("switcher")}},_onSwitcherClick:function(t){this._toggle(),t.preventDefault()}}),BEM.DOM.decl("popup",{getDefaultParams:function(){var t={left:15,right:15,top:15,bottom:15};return{directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:t},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,n=this._repackDirParams(t.directions),i=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(i);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],i=n.directions[t];return i||(i=n.directions[e.to]),this._directions[t]=this._mergeParams(i,e,{tail:this._tailParamsHook}),t},this)}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e;var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide()}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var n=this;return this.beforeHide(function(){n.domElem&&n.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild(this),this},addChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),e.push(t)},removeChild:function(t){for(var e=this._childs,n=e.length,i=0;n>i;i++)if(e[i]._uniqId===t._uniqId)return void e.splice(i,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_onHidden:function(){this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));return this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0===this._firstFocusable.length?void(this._skipReturnFocus=!0):void this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown)},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){var t=(this._parent||{})._skipReturnFocus||this._skipReturnFocus;t||this._lastFocused.focus()},_mergeParams:function(t,e,n){var i={},o=Object.prototype.hasOwnProperty;return n||(n={}),t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(n,s)?n[s].call(this,t[s],e[s]):e[s];!r||"object"!=typeof r||Array.isArray(r)?i[s]=r:t[s]?i[s]=this._mergeParams(t[s],r,n):i[s]=r},this),i},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],n=e,i=t.length,o=[],s=0;i>s;s++)for(var r=t[s],a=r.length,u=0;a>u;u++)for(var c=e[s],l=c.length,h=0;l>h;h++)for(var d=n[s],p=d.length,f=0;p>f;f++)o.push({direction:r[u],axis:c[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e={},n=[];return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),n=t.map(function(t){if("string"==typeof t){var n=t.split("-");t={to:n[0],tail:{}},n[1]&&(t.axis=n[1]),n[2]&&(t.tail.axis=n[2])}var i=t.to;return e[i]||(e[i]=t),t.axis&&(i+="-"+t.axis),t.key=i,e[i]=t,i},this),{directions:e,keys:n}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,n=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;n>t;t++){var i=e[t],o=this._directions[i];this._resetPos(i)._pushPos(i,this._calcPos(o))._pushPos(i,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(i)._pushTailPos(i,this._calcTailPos(o))._pushTailPos(i,this._calcTailOffset(o))._pushPos(i,this._calcOffsetByTail(o)),this._pushPos(i,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[i],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),n=this.getOwnerSize(),i=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-i.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+n.width}}return r},_calcTop:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=i.top:"middle"===t?e+=i.top+o.height/2-n.height/2:"bottom"===t&&(e+=i.top+o.height-n.height),e},_calcLeft:function(t){var e=0,n=this.getPlacingSize(),i=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=i.left:"center"===t?e+=i.left+o.width/2-n.width/2:"right"===t&&(e+=i.left+o.width-n.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,n=this._cache.offset||(this._cache.offset={}),i=t.key,o=t.offset;if(n[i])return n[i];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(i){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return n[i]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,n){n!==!1&&("string"==typeof e?this._sum(t[e]||(t[e]={}),n):(n=e,Object.keys(t).forEach(function(e){this._sum(t[e],n)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(n){t[n]=(t[n]||0)+e[n]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,n,i=this._viewport,o=this._getSizeOf(i),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},u=this.hasMod("position","fixed")?{top:0,left:0}:{top:i.scrollTop(),left:i.scrollLeft()},c=r.top+a.top-u.top,l=r.left+a.left-u.left,h=l+s.width-o.width,d=c+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),0>c&&(p.height+=c),0>l&&(p.width+=l),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(n=Math.abs(p.height*p.width),e=s.height*s.width,e!==n&&(f=n/e*100)),f},_findParent:function(t){return this.findBlockOutside(t,"popup")},destruct:function(){return this._childs.forEach(function(t){BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this.__base.apply(this,arguments)},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var n="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(n=""),t.find(n+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),n=!0;return parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility")?!1:($(this).parentsUntil(e).each(function(){var t=$(this);return"none"===t.css("display")?n=!1:void 0}),n)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{_getPosOf:function(t){var e,n=t.offset();return n?(this._getPosOfTmpElem||(this._getPosOfTmpElem=$('<div class="popup__getposoffix" style="position:absolute;left:0;top:0">').appendTo("body")),e=this._getPosOfTmpElem.offset(),n.left-=e.left,n.top-=e.top,n):{left:0,top:0}}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindToDoc("pointerclick",function(t){if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var n,i=this._childs.length;for(n=0;i>n;n++)if(this.containsDomElem.call({domElem:this._childs[n].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,n=this.getCurrPos(),i={opacity:1,top:n.top,left:n.left},o={opacity:0,top:n.top,left:n.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(i,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var n=e.to,i=this.getCurrPos(),o=this.domElem,s={top:i.top,left:i.left,opacity:0};return"bottom"===n?s.top+=10:"top"===n?s.top-=10:"left"===n?s.left-=10:"right"===n&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,n=this._positions[t.key],i=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(i,n):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(i,n)),o},_calcTailTop:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,u=o.top-e.top,c=e.top+r.height-(o.top+i.height);return u>0&&(n+=u,a-=u),c>0&&(a-=c),"middle"===t?(a-=s,n+=a/2):"bottom"===t&&(a-=s,n+=a),0>n&&(n=0),n},_calcTailLeft:function(t,e){var n=0,i=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,u=r.width,c=e.left+r.width-(o.left+i.width);return a>0&&(n+=a,u-=a),c>0&&(u-=c),"center"===t?(u-=s,n+=u/2):"right"===t&&(u-=s,n+=u),n},_calcOffsetByTail:function(t){var e=this.params.tail,n=e.height,i={};switch(t.to){case"top":i={top:-n};break;case"bottom":i={top:n};break;case"right":i={left:n};break;case"left":i={left:-n}}return i},_calcTailOffset:function(t){var e={},n=t.to,i=t.tail,o=i.offset,s=i.axis;return o?("top"===n||"bottom"===n?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==n&&"right"!==n||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e):!1},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("i-menu",{
onElemSetMod:{item:{state:{current:function(t,e,n,i){if("disabled"===i)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),function(t,e){function n(t){return t.replace(/^(?:https?:)?\/\//,"")}t||(t=window.Lego={}),!t.params&&(t.params={}),t.c=function(t,e,i){i=i||{};var o=n(i.host||BEM.blocks["i-global"].param("click-host")||"clck.yandex.ru"),s=function(t,e,n,i){return e=e.replace("'","%27"),e.indexOf("/dtype=")>-1?e:location.protocol+"//"+o+"/"+n+"/dtype="+t+"/rnd="+((new Date).getTime()+Math.round(100*Math.random()))+(i?"/*"+(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e)):"/*data="+encodeURIComponent("url="+encodeURIComponent(e.match(/^http/)?e:location.protocol+"//"+location.host+(e.match("^/")?e:"/"+e))))},r=function(){var n=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],o=document.createElement("script");o.setAttribute("src",s(t,i.useLinkHref&&Object(e).href?e.href:location.href,"jclck")),n.insertBefore(o,n.firstChild)};if(e)if(e.className.match(/b-link_pseudo_yes/)||e.href&&e.href.match(/^mailto:/)||i.noRedirect===!0)r();else if(e.href){var a=e.href;e.href=s(t,a,"redir"),setTimeout(function(){e.href=a},500)}else if(e.form)if(e.type.match(/submit|button|image/)){var a=e.form.action;e.form.action=s(t,a,"redir",!0),setTimeout(function(){e.form.action=a},500)}else r();else{if(!e.action)throw"counter.js: not link and not form!";e.action=s(t,e.action,"redir",!0)}else r()},t.cp=function(n,i,o,s,r,a){"string"==typeof s||(a=r,r=s,s=e),t.c("stred/pid="+n+"/cid="+i+(o?"/path="+o+(s?"/vars="+s:""):""),r,a)},t.ch=function(e,n,i){BEM.blocks["i-global"].param("show-counters")&&t.cp(0,2219,e,n,i)}}(window.Lego),function(t){t.cred=function(t,e,n){var i,o=function(){var e=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],n=document.createElement("script");n.setAttribute("src",t),e.insertBefore(n,e.firstChild)};if(e)if("A"===e.tagname&&!e.href||e.href&&e.href.match(/^mailto:/)||n&&n.noRedirect===!0)o();else if(e.href)i=e.href,e.href=t,setTimeout(function(){e.href=i},500);else if(e.form)e.type.match(/submit|button|image/)?(i=e.form.action,e.form.action=t,setTimeout(function(){e.form.action=i},500)):o();else{if(!e.action)throw"counter.js: not link and not form!";e.action=t}else o()}}(window.Lego),window.csh_ifgsid=csh_ifmsid,BEM.DOM.decl("home-tabs2",{onSetMod:{js:function(){var t=this;this._searchInput=this.findBlockOutside($(".suggest2-form__input"),"input"),this._popup=this.findBlockInside("popup"),this._$elems=this.elem("search"),this._searchInput.on("change",$.debounce(function(){t._updateUrls(this.val())},300)),this._popup&&this._popup.on("show",function(){home.stat.logDOMShow(t._popup.domElem),this.afterCurrentEvent(function(){t._popup.findBlockInside("columns")})})}},_updateUrls:function(t){var e=this.params[t?"search":"href"],n=encodeURIComponent(t);this._$elems.each(function(t,i){$(i).attr("href",x.stringf(e[$(i).data("id")],n))})}}),BEM.DOM.decl("columns",{onSetMod:{js:function(){var t=this.params,e=this;this.__self.hasCSSColumnSupport()||(this.hasMod("count")?this._count=this.getMod("count"):(this._count=t.count,this.setMod("count",this._count)),this._popup=this.findBlockOutside("popup"),this._items=null,this._visibleItems=null,this._visibleItemsLen=null,this._cols=null,this._colLen=null,this._balancer=$.debounce(function(){e._updateItems()},100),this._items||(this._items=this.domElem.children()),this._getItems(),this._pushItems(),this._bindBalancer(),this._popup.on("show",this._bindBalancer),this._popup.on("hide",this._unbindBalancer))}},_getItems:function(){this._visibleItems=this._items.children(":visible").parent(),this._colLen=Math.ceil(this._visibleItems.length/this._count)},_hasChanges:function(){return this._visibleItemsLen===this._visibleItems.length?!1:(x.log("update"),this._visibleItemsLen=this._visibleItems.length,!0)},_pushItems:function(){this._cols=[];for(var t=0;t<this._count;t++)this._cols[t]=this._visibleItems.slice(t*this._colLen,(t+1)*this._colLen),this._cols[t].wrapAll('<div class="columns__col"/>');setTimeout(function(){this._popup.repaint()}.bind(this),200)},_updateItems:function(){this._getItems(),this._hasChanges()&&(this._cols.forEach(function(t){$(t).unwrap()}),this._pushItems())},_bindBalancer:function(){$(window).bind("resize",this._balancer)},_unbindBalancer:function(){$(window).unbind("resize",this._balancer)}},{hasCSSColumnSupport:function(){var t=$("<div/>")[0],e=["columnCount","MozColumnCount","WebkitColumnCount"].some(function(e){return e in t.style});return e},live:function(){return!0}}),function(){"use strict";var t=function(){$("[data-statlog-autoshow]").each(function(){var t=$(this),e=t.data("statlog");t.is(":visible")&&home.stat.logPath("show",e)})},e=function(e){e.enabled&&(t(),$(window).on("resize",$.debounce(t,150)))};$(function(){var t=home.getData("statlog.config",{});e(t)});var n=home.stat._setConfig;home.stat._setConfig=function(t){n(t),e(t)}}(),BEM.DOM.decl("search2",{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside("input"),this.input&&this.input.setMod("no-sample-focus","true"),this.input&&this.input.on("sample-click",function(){var e=t.domElem.find("input[name='nl']");t.params.nl&&!e.length&&(e=$('<input type="hidden" name="nl" value="1"/>').insertAfter(t.input.domElem));var n=$("body").hasClass("edit-mode");n||setTimeout(function(){t.domElem.submit()},500)})}}}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.decl("i-common__string",{},{cleverSubstring:function(){var t="";return function(e,n,i){return e.length>n+i?e.substring(0,n-1)+t:e}}(),escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},highlight:function(t,e){if(!$.isArray(e))return t;var n,i=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a="?",u=~t.indexOf(a),c=function(){for(var e,n=/\&#\d+;/gi;e=n.exec(t);)r.push(e[0]),t=t.replace(e[0],a)},l=function(t){if(u)return t;for(;~t.indexOf(a)&&r.length;)t=t.replace(a,r[0]),r.shift();return t};return!u&&c(),s.forEach(function(e){n=o>e[0]?o:e[0],i.push({tag:"span",elem:"span",content:l(t.slice(o,n))}),i.push({tag:"em",elem:"em",content:l(t.slice(n,o=e[1]))})},this),i.push({tag:"span",elem:"span",content:l(t.slice(o))}),i}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").attr("disabled","yes"===e)},yes:function(){this.delMod("focused")}},focused:function(t,e){if(this.hasMod("disabled","yes"))return!1;var n="yes"===e;n?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.trigger(n?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var n="undefined"!=typeof t,i=this.elem("control");return t=n?null===t?"":t.toString():i.val(),this._val!==t&&(this._val=t,i.val()!==t&&i.val(t),this.trigger("change",e)),n?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){return this.hasMod("disabled","yes")?!1:void this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_onIOSTouchStart:function(t){this.hasMod("type","textarea")||this.hasMod("focused")||(t.preventDefault(),this.setMod("focused","yes"))},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","touchstart",function(t){this._onIOSTouchStart(t)})}}),function(){var t,e=[],n=function(){e.forEach(function(t){t.val(t.elem("control").val())})};BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._instanceIndex=e.push(this)-1;var i=this.elem("control"),o=$.dom.getActiveElement(),s=this.params.autoFocus&&!o.is("input, textarea");(o[0]===i[0]||s)&&(this.setMod("focused","yes")._focused=!0),t||(t=this.channel("sys").on({tick:n,idle:this._onSysIdle,wakeup:this._onSysWakeup})),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(this.__base()===!1)return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},_onSysIdle:function(){t.un("tick",n)},_onSysWakeup:function(){t.on("tick",n)},destruct:function(){this.__base.apply(this,arguments),this.params.shortcut&&this.unbindFromDoc("keydown"),e.splice(this._instanceIndex,1),e.slice(this._instanceIndex).forEach(function(t){t._instanceIndex--}),t.un({idle:this._onSysIdle,wakeup:this._onSysWakeup})},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}})}(),BEM.DOM.decl("input",{_onIOSTouchStart:function(){}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("clear","pointerclick",function(t){t.preventDefault()})}}),function(){var t,e=0,n=!1,i=0,o=BEM.channel("sys"),s=window.setTimeout,r=50;BEM.decl("i-system",{},{start:function(){$(document).bind("mousemove keydown",function(){i=0,n&&(n=!1,o.trigger("wakeup"))}),this._tick()},_tick:function a(){o.trigger("tick",{counter:e++}),!n&&(i+=r)>3e3&&(n=!0,o.trigger("idle")),t=s(a,r)}}).start()}(),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){return this.__base.apply(this,arguments)===!1?!1:void(this._hasHint&&this._updateHint())}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),function(){var t=/^[a-z-]$/i,e=/^[0-9]$/,n=function(n){var i,o,s=n.charCode||n.keyCode||n.which||0,r=n.ctrlKey||n.altKey||n.metaKey;return n.originalEvent&&n.originalEvent.key?(o=t.test(n.originalEvent.key),i=e.test(n.originalEvent.key)):(o=[s>=65&&90>=s,s>=1025&&1071>=s,0===s,231===s,186===s,188===s,190===s,String.fromCharCode(s).toLowerCase()!==String.fromCharCode(s).toUpperCase()].some(Boolean),i=s>=48&&57>=s||s>=96&&105>=s),!r&&(i||o)};BEM.DOM.decl({name:"input",modName:"autofocus",modVal:"capture"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindToDoc("keydown",this._autoFocusBind)},autofocus:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},"":function(){this.unbindFromDoc("keydown")}},listen:{yes:function(){this.bindToDoc("keydown",this._autoFocusBind)},no:function(){this.unbindFromDoc("keydown")}}},_autoFocusBind:function(t){var e;if(!$(".popup_visibility_visible").filter(":not(.b-topbar__popup, .suggest2)").length&&(e=$(".v_sform_bg"),(!e.length||"none"===e.css("display"))&&!$(".left-banner-opened").length&&this.domElem.is(":visible"))){var i,o;try{i=document.activeElement.tagName.toLowerCase(),o=document.activeElement.getAttribute("contenteditable")}catch(s){}if(n(t)&&"input"!==i&&"textarea"!==i&&!o){var r=this.elem("control")[0],a=this.val();if(a.length>0&&" "!==a.slice(-1)&&(a+=" ",this.val(a)),r.createTextRange){var u=r.createTextRange();u.collapse(!1),u.select()}else r.selectionStart&&(r.focus(),r.setSelectionRange(a.length,a.length));this.setMod("focused","yes")}}}})}(),BEM.DOM.decl({name:"input",modName:"ahead",modVal:"yes"},{onSetMod:{js:function(){var t=$.browser&&$.browser.opera&&$.browser.version<12.1?"keypress":"keydown";this.__base(),this._leftPadding=parseInt(this.elem("input").css("border-left-width"),10),this._buildAhead(),this._intent=!1,this._preventAhead=!1,this._lastBackspace=0,this.on("change",this._onTextChange).bindTo("click",this._onClickOver).bindTo(t,this._onKeyDown)}},_onClickOver:function(t){var e=this;if(!this._preventAhead&&this.elem("input").is(t.target)){var n=t.pageX-this.domElem.offset().left-this._leftPadding,i=this.elem("ahead-filler").width(),o=this.elem("ahead-hintholder").width();n>i&&o>n&&(this.trigger("ahead-click"),setTimeout(function(){e._fill({usage:"mouse"})},0))}},_onKeyDown:function(t){switch(this.__base.apply(this,arguments),new Date-this._lastBackspace>this.params.backspaceDelay&&(this._preventAhead=!1),t.which){case 8:if(!this.params.hideOnBackspace)break;this._preventAhead=!0,this._lastBackspace=new Date,this._intent=this._clearAhead();break;case 9:this.hasMod("focused","yes")&&this._intent&&!t.ctrlKey&&!t.altKey&&(t.preventDefault(),this._fill({usage:"tab"}));break;case 39:this.val().length===this.getSelectionEnd()&&this._fill({usage:"arrow"})&&t.preventDefault()}},setAhead:function(t){var e;return this._preventAhead?!1:(e=this.val(),0!==t.indexOf(e)?this._clearAhead():void(this._intent=this._setAhead(e,t.slice(e.length))))},unsetAhead:function(){this._clearAhead(),this._intent=!1},_onTextChange:function(){var t=this.val().length;this.shiftAhead(t),this._intent&&0!==this._intent.indexOf(this.val())&&this._clearAhead()},_fill:function(t){var e=this.val(),n=$.extend(t,{chars:this._intent.length-e.length});if("string"==typeof this._intent&&n.chars>0&&0===this._intent.indexOf(e)){try{var i=document.createEvent("TextEvent");i.initTextEvent("textInput",!0,!0,null,this._intent.slice(this.val().length),9),this._input.selectionEnd=this._input.selectionStart=this._intent.length,this._input.dispatchEvent(i)}catch(o){var s=this.elem("control").get(0);if(this.val(this._intent),s.createTextRange){var r=s.createTextRange();r.moveEnd("character",this._intent.length),r.collapse(!1),r.select()}else try{s.selectionEnd=s.selectionStart=this._intent.length}catch(a){}}this.trigger("ahead-fill",n)}return n.chars>0},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var n=document.selection.createRange();if(n&&n.parentElement()===t){var i=t.value.length,o=t.createTextRange();o.moveToBookmark(n.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?i:-o.moveEnd("character",-i)}}return e},getDefaultParams:function(){return $.extend(this.__base(),{backspaceDelay:100,hideOnBackspace:!0})},_buildAhead:function(){this._ahead=$(home.view("input__ahead")),BEM.DOM.before(this.elem("control"),this._ahead)},_setAhead:function(t,e){var n=this.elem("ahead-filler");return this._preventAhead?(t="",e=""):(t=t||"",e=e||""),n.text(t),this.elem("ahead-hintholder").text(t+e),this.elem("ahead-hint").val(t+e),this.elem("ahead").css("clip","rect(auto auto auto "+(n.width()+this._leftPadding)+"px)"),t+e},_clearAhead:function(){return this._setAhead("",""),!1},shiftAhead:function(t){if(this._intent){var e=this._intent.slice(0,t),n=this._intent.slice(t);this._setAhead(e,n)}}}),BEM.DOM.decl({block:"input",modName:"keyboard",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).bind("keyboardOpened.lego",this.changeThis(function(){this.setMod("focused","yes")._focused=!0}))}},onElemSetMod:{clear:{visibility:function(t,e,n){this.__base.apply(this,arguments),this.hasMod("clear","yes")&&this.toggleMod("keyboard-visibility","hidden","visible"===n)}}}}),BEM.DOM.decl("keyboard-loader",{onSetMod:{js:function(){var t=this;Lego.block["keyboard-loader"].call(this.domElem,this.params),$(window).on("keyboardOpened.lego",function(){home.stat.logPath("click",t.params.statOpen),t.getVkbd().removeAttr("disabled")}).on("keyboardClosed.lego",function(e){"lego"===e.namespace&&home.stat.logPath("click",t.params.statClose),t.getVkbd().attr("disabled","disabled")})}},getVkbd:function(){return this._vkbd?this._vkbd:this._vkbd=$('<input type="hidden" name="vkbd" value="1"/>').appendTo(this.domElem)}}),function(t,e){e.block["keyboard-loader"]=function(n){function i(n){t("body").removeClass("b-page_keyboard");var i=n?"addClass":"toggleClass",o=a.find(".b-keyboard-popup");if(o.length){if(a.find(".b-keyboard-popup__gap")[i]("i-hidden"),a.find(".b-keyboard-popup")[i]("i-hidden").hasClass("i-hidden")){u.trigger("keyboardClosed"),t(document).trigger("popupsClose.lego");var s=e.block["b-keyboard"]._lastFocusedIn;void 0!==s&&s.focus()}else u.trigger("keyboardOpened.lego");o.data("isHidden",!1)}}function o(t){return s()[t]}function s(){var e={};return t.each(window.name.split("&"),function(){if(this.toString()){var t=this.split("=");e[t[0]]=t[1]}}),e}function r(e,n){var i=s(),o=[];i[e]=n,t.each(i,function(t,e){o.push(t+"="+e)}),window.name=o.join("&")}var a=t(document.body),u=t(window),c=this,l=t(".b-topbar__popup.popup_behavior_snap"),h=l.length?l.bem("popup"):null;c.click(function(o){o.preventDefault(),h&&h._unbindFromResize();var s=(this.className.match(/keyboard-loader_lang_(\w+)/)||["",""])[1];if(a.find(".b-keyboard")[0])i(),h&&h._bindToResize();else{var r=BEM.blocks["i-global"].param("keyboard-path"),c=[r+"b-keyboard/_keyboard.js"],l=t.browser&&t.browser.msie&&(!document.documentMode||document.documentMode<9)?".ie":"",d=[r+"b-keyboard/_keyboard"+l+".css"];t.xLazyLoader({name:"b-keyboard",js:c,css:d,success:function(){e.block["b-keyboard-popup"]({lang:s,"for":n["for"]}),a.append('<div class="b-keyboard i-bem" data-bem=\'{&quot;b-keyboard&quot;: { &quot;lang&quot;:&quot;'+s+"&quot;}}'></div>"),BEM.DOM.init(t(".b-keyboard")),u.trigger("keyboardOpened.lego",{afterLoad:!0}),t(".b-keyboard").on("click",".b-keyboard__key",function(){var e,n=t("*:focus").offset();n&&(e=n.top,t(".b-keyboard-popup").offset().top<e+30&&window.scrollTo(0,e-20))})}})}}),u.bind("keyboardOpen.lego",function(){c.click()}).bind("keyboardClose.lego",i),n["for"]&&u.bind("keyboardOpened.lego",function(e,i){!(i&&i.afterLoad&&n.autoLoad)&&t(n["for"]).focus()}),u.bind("keyboardLangChanged.lego keyboardSetLang.lego",function(t,e){var n=c.find(".keyboard-loader__flag");n[0]&&("tt"===e&&(e="ru"),n.attr("src",n.attr("src").replace(/[a-z]+\.png$/,e+".png")))}),n.storeState=n.storeState!==!1,n.storeState&&u.bind("keyboardOpened.lego",function(){r("keyboard_state","open");var e=o("keyboard_lang");e&&t(window).trigger("keyboardSetLang.lego",e)}).bind("keyboardClosed.lego",function(){t("body").removeClass("b-page_keyboard"),r("keyboard_state","close")}).bind("keyboardLangChanged.lego",function(t,e){r("keyboard_lang",e)});var d="#kb"===window.location.hash;(n.autoLoad||n.storeState&&"open"===o("keyboard_state")||d)&&c.click(),u.bind("keyboardOpened.lego",function(){t("input:focus").focus(),t("body").addClass("b-page_keyboard")})}}(jQuery,window.Lego),function(t){function e(){function e(t,e){l[t](e,function(t){"error"===t?d.push(e):h.push(e)&&r.each(e),o()},"lazy-loaded-"+(r.name?r.name:(new Date).getTime()))}function i(t){r.complete(t,h,d),r[t]("error"===t?d:h),clearTimeout(a),clearTimeout(u)}function o(){h.length===p.length?i("success"):h.length+d.length===p.length&&i("error")}function s(){d.push(this.src),o()}var r,a,u,c,l=this,h=[],d=[],p=[];this.init=function(n){if(n){if(r=t.extend({},t.xLazyLoader.defaults,n),c={js:r.js,css:r.css,img:r.img},t.each(c,function(t,e){"string"==typeof e&&(e=e.split(",")),p=p.concat(e)}),!p.length)return void i("error");r.timeout&&(a=setTimeout(function(){var e=h.concat(d);t.each(p,function(n,i){-1===t.inArray(i,e)&&d.push(i)}),i("error")},r.timeout)),t.each(c,function(n,i){t.isArray(i)?t.each(i,function(t,i){e(n,i)}):"string"==typeof i&&e(n,i)})}},this.js=function(e,i,o){var r=t('script[src*="'+e+'"]');if(r.length)return void(r.attr("pending")?r.bind("scriptload",i):i());var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("charset","utf-8"),a.setAttribute("src",e),a.setAttribute("pending",1),a.onerror=s,t(a).bind("scriptload",function(){t(this).removeAttr("pending"),i(),setTimeout(function(){t(a).unbind("scriptload")},10)});var u=!1;a.onload=a.onreadystatechange=function(){u||this.readyState&&!/loaded|complete/.test(this.readyState)||(u=!0,a.onload=a.onreadystatechange=null,t(a).trigger("scriptload"))},n.appendChild(a)},this.css=function(e,i,o){if(t('link[href*="'+e+'"]').length)return void i();var s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("href",e),t.browser&&t.browser.msie?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&i()}:t.browser&&t.browser.opera?s.onload=i:!function(){s&&s.sheet?i():u=setTimeout(arguments.callee,20)}(),n.appendChild(s)},this.img=function(t,e){var n=new Image;n.onload=e,n.onerror=s,n.src=t},this.disable=function(e){t("#lazy-loaded-"+e,n).attr("disabled","disabled")},this.enable=function(e){t("#lazy-loaded-"+e,n).removeAttr("disabled")},this.destroy=function(e){t("#lazy-loaded-"+e,n).remove()}}t.xLazyLoader=function(t,n){"object"==typeof t&&(n=t,t="init"),(new e)[t](n)},t.xLazyLoader.defaults={js:[],css:[],img:[],name:null,timeout:2e4,success:function(){},error:function(){},complete:function(){},each:function(){}};var n=document.getElementsByTagName("head")[0]}(jQuery),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var n="yes"===e,i=this.domElem;n&&this.delMod("hovered"),this._href&&(n?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i.attr("disabled",n)})},pressed:function(t,e){return this.isDisabled()?!1:void this.trigger("yes"===e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return"undefined"==typeof t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("click",function(t){var e=this.hasMod("pseudo","yes")&&this._href;(this.isDisabled()||e)&&t.preventDefault()}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){return this.isDisabled()?!1:(this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),void this.trigger("focus"))},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),"yes"===e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){return this.isDisabled()?!1:void(""===e&&this.delMod("pressed"))},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,n=t.keyCode;!this._keyDowned&&e.is(n,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,n===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),BEM.DOM.decl("suggest2",{onSetMod:{js:{inited:function(){this.params.form||this.findBlockOutside("suggest2-form"),this._lastSubmitTime=0,this._lastBlurTime=0,this._clear()}}},_bodyHandler:function(t){if(!this._isDestructing){var e=$(t.target),n=this.containsDomElem(e)||this.params.form.containsDomElem(e);n||(this._freezeInputFocus=!1)}},getDefaultParams:function(){return{submitBySelect:!1,updateOnEnterByKeyboard:!0,onFocus:"request",requestOnEmptyInput:!1,abortQueries:!1,sequentialQueriesTimeout:!1}},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},init:function(){var t=this;return t.params.form.on("submit",function(e,n){t._lastSubmitTime=(new Date).getTime(),t._isActualSearchCGIParams?t._isActualSearchCGIParams=!1:"suggest2-counter"!==n.data.block&&n.data.prevent!==!1&&this.removeHiddenInputs(),t._clear(),t._popup.hide()}),t._input=t.params["suggest2-input"],t._popup=t.params["suggest2-popup"],t._inputValue=t._input.val(),t._model=t.initModel(),t._view=t.initView(),t._counter=t.initCounter(),t._model.on({response:this.setItems,reject:function(e,n){2===n.code&&(t._popup.hide(),t._clear())}},t),t.bindToDoc("click tap leftclick",t._bodyHandler),t.bindEvents(),this._input.isFocused()&&this._doRequest(),this._toggleHistory(),t},initModel:function(){return BEM.create("suggest2-model",this.params)},getModel:function(){return this._model},initView:function(t,e){var n=this.getMod("type");return t=t||{},"simple"!==n&&"all"!==n||(t.simple="yes"),"advanced"!==n&&"all"!==n||(t.advanced="yes"),BEM.create({block:"suggest2-view",mods:t||{}},e||{})},getView:function(){return this._view},initCounter:function(){return this.params.counter?this.params.counter.initValues().bindEvents():void 0},getCounter:function(){return this._counter},setDataConverter:function(t){return this.getModel().getProvider().convert=t,this},setRequestData:function(t){return this.getModel().getProvider().getRequestData=t,this},setRequestUrl:function(t){return this.getModel().getProvider().getRequestUrl=t,this},setOwner:function(t){return this._popup.owner(t),this},bindEvents:function(){var t=this;return t._input.bindEvents({change:t._onChange,focus:t._onFocus,blur:t._onBlur},t),t._popup.on({preshow:function(){t.trigger("preshow")},show:function(){t._onShow()},hide:function(e,n){t._onHide(n)}}),t.params.form&&t.params.form.on("button-press",t._onSearchButtonMousedown,t),BEM.blocks["suggest2-item"].on(t.domElem,{"link-click":function(e,n){t._counter&&"_self"===$(n.$e.target).attr("target")&&n.$e.preventDefault()}}),t},_onShow:function(){this.trigger("show")},_onHide:function(t){this.trigger("hide",t)},_onSearchButtonMousedown:function(){this._input.realVal(this._input.val()),this._popup.hide()},unbindAllEvents:function(){var t=this;return t.unbindFromDoc("click tap leftclick"),t._input.unbindAllEvents(),t.params.form.un("submit"),t._model.un("response").un("reject"),t._popup.un("preshow").un("show").un("hide"),t.params.form&&t.params.form.un("button-press",t._onSearchButtonMousedown,t),t},setItems:function(t,e){var n=this,i=e.data.items||[];return n._isFormSubmitDurinQuery()||!i.length?(n._popup.hide(),n._clear()):this.params.sequentialQueriesTimeout||n._input.val()===e.val?(n._text=e.val,n._pos=e.pos,n._meta=e.data.meta||{},n._popup.show(n._view.html(i,n._meta)).width(n.getPopupWidth()),n._items=n.findBlocksInside("suggest2-item"),n._clearItems().trigger("update",{val:n._text,pos:n._pos,items:n._items}),n):n._clear()},getItems:function(){return this._items||[]},isBlur:function(){return this._isBlur&&!this._isMouseDown},getPopupWidth:function(){},getInputWidth:function(){return 0},isNeedSubmitFormOnSelectItem:function(t){return this.params.submitBySelect&&"link"!==t.getMod("interact")},_isFormSubmitDurinQuery:function(){return this._lastSubmitTime?(this._model.filterRequestsByVal(this._input.realVal()),this._model.isTimeInRequestInterval(this._lastSubmitTime)):!1},_onChange:function(t,e){this._inputValue!==this._input.val()&&(this._inputValue=this._input.val(),this._doRequest(e))},_doRequest:function(t){var e=this.getCounter();this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition(),t,e&&e.getCurrentReqId())},_onFocus:function(){!this._popup.isShown()&&this._isBlur&&this.params.onFocus&&this._isLastBlurTimeLater(50)&&(this.getItems().length&&this._input.val()===this._text?(this._clearItems(),this._popup.show()):this._isMouseDown||"request"!==this.params.onFocus||this._doRequest())},_onBlur:function(){this._isBlur?(this._clear(),this._popup.hide()):this._freezeInputFocus?(this._clear(),this._input.focus()):this._isMouseDown&&this._input.focus(),this._lastBlurTime=(new Date).getTime(),this._isBlur=!0},_getItemIndex:function(t){return this.getItems().indexOf(t)},_clear:function(){return this._isBlur=!0,this._freezeInputFocus=!1,this._clearItems()},_clearItems:function(){return this._isMouseDown=!1,this._enterItemIndex=-1,this._unselectItems()},_isLastBlurTimeLater:function(t){return(new Date).getTime()-this._lastBlurTime>t},_unselectItems:function(t){var e=t?[].slice.call(arguments):this.getItems();return e.forEach(function(t){t.onLeave()}),this},_onSelectItem:function(t,e){var n=this,i=n._getItemIndex(t),o=t.onSelect(e),s=t.valOnSelect();return n._text=n._input.realVal(s),n._isBlur=!0,n._freezeInputFocus=!1,n._setSearchCGIParams(t),n.trigger("select",{val:n._text,pos:n._pos,item:t,
meta:n._meta,itemIndex:i,byKeyboard:e,callbackOnSelect:o}),s!==!1&&(n._items=[],this.isNeedSubmitFormOnSelectItem(t)&&n.params.form.submit()),i},_isActualSearchCGIParams:!1,_setSearchCGIParams:function(t){this.params.form.removeHiddenInputs(),t.params.searchCGI&&(this._isActualSearchCGIParams=!0,this.params.form.appendHiddenInputs(t.params.searchCGI.map(function(t){return{name:t[0],value:t[1]}})))},_onDownItem:function(){this._isBlur=!1,this._isMouseDown=!0},_toggleHistory:function(){}}),BEM.DOM.decl("suggest2",{getInputLeft:function(){return 0},getInputWidth:function(){return 0},getContainerWidth:function(){return 0},getMetrics:function(){var t=this.getInputLeft(),e=this.getInputWidth(),n=this.getContainerWidth()-t;return{marginLeft:t,minWidth:e>=n?n:e,maxWidth:n}},adjustView:function(){return this.getMetrics()},_resizeHandler:function(){}}),BEM.DOM.decl("suggest2",{bindEvents:function(){var t=this;return t._input.bindEvents({keydown:t._onKeyDown,keyup:t._onKeyUp,keypress:t._onKeyPress,mousedown:function(){t._input.isFocused()&&t._onFocus()}},t),BEM.blocks["suggest2-item"].on(t.domElem,{mouseover:function(e){t._onEnterItem(e.block,!1)},mouseout:function(e,n){var i=e.block.domElem[0];i===n.relatedTarget||$.contains(i,n.relatedTarget)||t._onLeaveItem(e.block,!1)},mousedown:function(){t._onDownItem()},leftclick:function(e){t._onSelectItem(e.block,!1)}}),t.__base.apply(t,arguments)},_onKeyDown:function(t){var e=this.__self.keyboard,n=t.which;!this._popup.isShown()||n!==e.up&&n!==e.down||(t.preventDefault(),this._enterByKeyboard(n))},_onKeyUp:function(t){var e=this.__self.keyboard;if(t.which!==e.left&&t.which!==e.right||(this.trigger("change-cursor-pos"),this._model.request(this._input.realVal(this._input.val()),this._input.getCaretPosition())),t.which===e.right&&~this._enterItemIndex&&this._enterItemByKeyboard){var n=this._items[this._enterItemIndex];n&&this.trigger("ahead",{item:n,val:"link"===n.getMod("interact")?n.elem("text").text():n.val()})}},_onKeyPress:function(t){if(t.which===this.__self.keyboard.enter&&~this._enterItemIndex&&this._enterItemByKeyboard){var e=this._items[this._enterItemIndex];e&&(t.preventDefault(),this._onSelectItem(e,!0))}},_enterByKeyboard:function(t){var e=t-39,n=this._items.length,i=this._enterItemIndex+e;return-1===i||i===n?(this._enterItemIndex=i,this._unselectItems(this._items[i]),this.trigger("out",{val:this._text,byKeyboard:!0})):(0>i?i=n-1:i>=n&&(i=0),void this._onEnterItem(this._items[i],!0))},_onEnterItem:function(t,e){this._enterItemIndex=this._getItemIndex(t),this._enterItemByKeyboard=e,this._unselectItems(),t.onEnter(e)},_onLeaveItem:function(t,e){this._clearItems()._unselectItems(t)}},{keyboard:{enter:13,left:37,up:38,right:39,down:40},live:function(){this.liveBindTo("mousedown",function(){this._onDownItem()})}}),BEM.DOM.decl("suggest2",{_doRequest:function(){(this._ignoredFirstRequest||"request"===this.params.onFocus||this._input.val())&&this.__base.apply(this,arguments),this._ignoredFirstRequest=!0}}),BEM.decl("suggest2",{bindEvents:function(){function t(){e._popup&&e._popup.isShown()&&e._popup.hide()}var e=this;e.__base.apply(e,arguments),e._input.bindEvents({click:function(){e._popup.isShown()||(e._tabChange=!1,e._doRequest())}}),BEM.blocks["suggest2-item"].on(e.domElem,{mousedown:function(){e.bindToDoc("mouseup.suggest2",function(){e._isBlur=!0,e._isMouseDown=!1,e.unbindFromDoc("mouseup.suggest2")})}}),$(window).bind("keyboardOpened.lego",function(){e._popup&&e._popup.isShown()&&e._popup.get()&&e._popup.get().repaint()});var n=!0;$(window).on("focus",function(){var i;try{i=document.activeElement}catch(o){}n||(n=!0,i&&e._input.getControl()&&e._input.getControl().is(i)&&(e._tabChange=!0),t())}).on("blur",function(){n=!1,t()})},init:function(){this.__base.apply(this,arguments),this.trigger("model-ready")},_onChange:function(){return this._tabChange=!1,this.__base.apply(this,arguments)},_onFocus:function(){this._tabChange||this.__base.apply(this,arguments)}}),BEM.decl("suggest2-model",{onSetMod:{js:{inited:function(){this._requests=[]}}},destruct:function(){this._provider&&this._provider.destruct(),this.__base.apply(this,arguments)},getProvider:function(){return this._provider?this._provider:(this._provider=this.setProvider(this.params),this._provider)},setProvider:function(t){return this._provider=BEM.create("suggest2-provider",t),this._provider},getCancelRequestConditions:function(){return[{block:"suggest2",show:!1},{block:"suggest2",event:"select"},{block:"suggest2-item",event:"select"},{block:"suggest2",event:"out"},{block:"suggest2-item",show:!1},{block:"suggest2-popup",event:"hide"},{suggest:!1},{source:"sample"}]},request:function(t,e,n,i){var o=this,s={val:t,caretPosition:e,reqId:i,data:n};o._requests.push(s);var r=o._isNeedRequest(t,n);return r.need?(s.requestTime=(new Date).getTime(),o.lastSendedRequest=s,o.trigger("request",{val:t,pos:e,request:s}),o.getProvider().get(t,e,i,function(t,e,n,i){s.responseTime=(new Date).getTime(),$.extend(s,{duration:s.responseTime-s.requestTime,error:n.error,fromCache:i,itemsCount:n.items?n.items.length:0}),o._onResponse(t,e,n,s);var r=o._requests[o._requests.length-1];o.params.sequentialQueriesTimeout&&r.val!==t&&o.request(r.val,r.caretPosition,r.data)}),o):o.trigger("reject",{val:t,pos:e,code:r.code,reason:r.reason||{}})},isTimeInRequestInterval:function(t){for(var e=this._requests.length-1;e>=0;e--)if(t>this._requests[e].requestTime&&t<this._requests[e].responseTime)return!0;return!1},filterRequestsByVal:function(t){this._requests=this._requests.filter(function(e){return e.val===t})},_isNeedRequest:function(t,e){if(""===t&&!this.params.requestOnEmptyInput)return{need:!1,code:2};var n;if(this.lastSendedRequest&&this.lastSendedRequest.val===t)return{need:!1,code:4};if(this.params.sequentialQueriesTimeout)for(n=this._requests.length-1;n>=0;n--){var i=this._requests[n];if(void 0===i.responseTime&&(new Date).getTime()-i.requestTime<this.params.sequentialQueriesTimeout)return{need:!1,code:3,reason:{request:i}}}if(!e)return{need:!0};var o,s=this.getCancelRequestConditions();t:for(n=0;n<s.length;n++){o=s[n];for(var r in o)if(o.hasOwnProperty(r)&&o[r]!==e[r])continue t;return{need:!1,code:1,reason:{condition:o}}}return{need:!0}},_onResponse:function(t,e,n,i){var o={val:t,pos:e,data:n||[],request:i};BEM.channel("suggest2").trigger("response",o),this.trigger("response",o)}}),BEM.DOM.decl("suggest2-detect",{onSetMod:{js:{inited:function(){this.bindToDoc("keydown",function(t){this.__self._pressedKeyCode=t.which},this).bindToDoc("keyup",function(){this.__self._pressedKeyCode=null},this),this.__self.isSupportInlineSVG()||this.setMod("inlinesvg","no")}}}},{_pressedKeyCode:null,isPressedEscape:function(){return 27===this._pressedKeyCode},_isSupportInlineSVG:null,isSupportInlineSVG:function(){if(null!==this._isSupportInlineSVG)return this._isSupportInlineSVG;var t=document.createElement("div");return t.innerHTML="<svg/>",this._isSupportInlineSVG="http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI),this._isSupportInlineSVG}}),function(){"use strict";BEM.DOM.decl("suggest2-detect",{},{isSupportInlineSVG:function(){return void 0===this._isSupportInlineSVG2&&(this._isSupportInlineSVG2=$("html").hasClass("i-ua_inlinesvg_yes")),this._isSupportInlineSVG2}})}(),function(t){if(t.support.cors||!t.ajaxTransport||!window.XDomainRequest)return t;var e=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");return t.ajaxTransport("* text html json",function(o,s,r){if(o.crossDomain&&o.async&&n.test(o.type)&&e.test(o.url)&&i.test(o.url)){var a=null;return{send:function(e,n){var i="",r=(s.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(s.timeout)&&(a.timeout=s.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,i={code:200,message:"success"},o={text:a.responseText};try{if("html"===r||/text\/html/i.test(a.contentType))o.html=a.responseText;else if("json"===r||"text"!==r&&/\/json/i.test(a.contentType))try{o.json=t.parseJSON(a.responseText)}catch(s){i.code=500,i.message="parseerror"}}catch(u){throw u}finally{n(i.code,i.message,o,e)}},a.onprogress=function(){},a.onerror=function(){n(500,"error",{text:a.responseText})},s.data&&(i="string"===t.type(s.data)?s.data:t.param(s.data)),a.open(o.type,o.url),a.send(i)},abort:function(){a&&a.abort()}}}}),t}(jQuery),BEM.decl("suggest2-provider",{getDefaultParams:function(){return{cache:!1,type:"GET",dataType:"jsonp",timeout:2e3}},_cachedResponses:Object.create?Object.create(null):{},_cachingTime:6e4,_lastQuery:null,get:function(t,e,n,i){"function"==typeof n&&(i=n,n=void 0);var o=this,s=this.params.abortQueries,r=this._extendParamsData(this.getRequestData(t,e,n));i=i.bind(this,t,e),s&&null!==this._lastQuery&&this._lastQuery.abort(),this._lastQuery=$.ajax(r).done(function(t){i(o.convert(t),o._validateCache(this.url))}).fail(function(t,e){!s&&i({error:e||"error"})})},convert:function(t){return{orig:t[0],items:t[1],meta:t[2]}},getRequestData:function(t,e,n){return $.extend({part:t,pos:e},n&&{suggest_reqid:n},BEM.blocks["suggest2-detect"].isSupportInlineSVG()&&{svg:1})},getRequestUrl:function(){return this.params.url},_extendParamsData:function(t){return this.params.url=this.getRequestUrl(),this.params.data=$.extend(this.params.data||{},t),this.params},_validateCache:function(t){var e=Boolean(this._cachedResponses[t])&&this._cachedResponses[t]>Date.now();return!e&&this._addToCache(t),e},_addToCache:function(t){this._cachedResponses[t]=Date.now()+this._cachingTime,setTimeout(function(){delete this._cachedResponses[t]}.bind(this),this._cachingTime)}}),BEM.decl("suggest2-view",{html:function(t,e){return BEMHTML.apply(this.build(t,e))},build:function(t,e){return{block:"suggest2",elem:"content",elemMods:{theme:"normal"},content:this.buildItems(t,e)}},buildItems:function(t,e){return t.reduce(function(t,e){return t.push(this.buildItem(e)),t}.bind(this),[])},buildItem:function(t){var e=this.__self._getPrefs(t),n=this.__self._getType(t,e),i="html"===n||"bemjson"===n?{}:{type:n};return this._getItemByType(t,e,n,{text:{elem:"text",content:this.__self._highlight(this.__self._getText(t,e),e)},mods:i,js:e.js||{},props:{},content:[]})},_getItemByType:function(t,e,n,i){var o=i.text,s=i.mods,r=i.js,a=i.props,u=i.content;return e.pers&&(s.personal="yes"),e.url&&(s.interact="link",a.url=this.__self._resolveUrl(e.url),e.target&&(a.target=e.target)),e.search_cgi&&(r.searchCGI=e.search_cgi),0===u.length&&u.push(o),e.attrs&&(a.attrs=e.attrs),$.extend({block:"suggest2-item",mods:s,js:r,content:u},a)}},{_getPrefs:function(t){if(!Array.isArray(t))return{};var e=t[t.length-1];return $.isPlainObject(e)?e:{}},_getType:function(t,e){var n=Array.isArray(t)?t[0]||"text":"text";return"icon"!==n||e.icon?n:"text"},_getText:function(t){return Array.isArray(t)?t[1]:t},_highlight:function(t,e){if(!e.hl)return t;var n,i=e.hl.sort(function(t,e){return t[0]-e[0]}).filter(function(t){return t[0]>=0}),o=[],s=0;return i.length?(i.forEach(function(e){n=s>e[0]?s:e[0],o.push(t.slice(s,n)),o.push({elem:"highlight",content:t.slice(n,s=e[1])})},this),o.push(t.slice(s)),o.filter(function(t){return!!t})):t},_resolveUrl:function(t){return(/[\/]{2}/.test(t)?"":"http://")+t}}),BEM.decl("suggest2-view",{},{_getGroupType:function(t,e){return t.pers?"nah":~["nav"].indexOf(e)?e:"text"},_getTextLabel:function(t){return BEM.I18N("suggest2",t)}}),BEM.decl({block:"suggest2-view"},{_getItemByType:function(t,e,n,i){return"history"!==n?this.__base.apply(this,arguments):(i.mods.personal="yes",$.extend({block:"suggest2-item",mods:i.mods,js:i.js,content:[{elem:"text",content:t[1]},{elem:"delete",content:BEM.I18N("suggest2-view","delete")}]},i.props))}}),BEM.decl("suggest2-view",{_getItemByType:function(t,e,n,i){var o,s;return"email"===n?(o=[],s=i.js,s.email=t[1],o.push({elem:"name",content:BEM.blocks["i-common__string"].escapeHTML(t[2]||t[1])}),t[2]&&o.push({elem:"email",content:BEM.blocks["i-common__string"].escapeHTML(t[1])}),$.extend({block:"suggest2-item",mods:i.mods,js:s,content:o},i.props)):this.__base.apply(this,arguments)}}),BEM.decl("suggest2-popup",{onSetMod:{js:{inited:function(){this._popup=this.params.popup,this._popupContent=this.params.popupContentElem&&this._popup.findElem(this.params.popupContentElem),this.bindSuggestEvents()}}},show:function(t){return this._popup.domElem?(t&&this.setContent(t),this.isShown()?this:(this.trigger("preshow"),this._setPosition(),this.trigger("show"),this)):this},_setPosition:function(){throw new Error("       _for")},hide:function(t){throw new Error("       _for")},setContent:function(t){return this._popupContent?BEM.DOM.update(this._popupContent,t):this._popup.setContent(t),this},isShown:function(){throw new Error("       _for")},owner:function(t){return t?(this.params.owner=t,this):this.params.owner},get:function(){return this._popup},width:function(t){return void 0===t?this._popup.domElem.outerWidth():(this._popup.domElem.outerWidth(t),this)},destruct:function(){this._popup&&(this.unbindAllEvents(),this.__base.apply(this,arguments))},bindSuggestEvents:function(){return this.params.suggest.on({select:this._onSuggestSelect,update:this._onSuggestUpdate},this),this},_onSuggestSelect:function(t,e){this.hide(e)},_onSuggestUpdate:function(t,e){e.items.length||this.hide({response:"empty"})},unbindAllEvents:function(){return this.params.suggest.un("select").un("update"),this}}),BEM.decl("suggest2-popup",{pos:function(){return this.isShown()&&this._popup.repaint(),this}}),BEM.decl({block:"suggest2-popup",modName:"for",modVal:"popup"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._popup.on("hide",function(){BEM.blocks["suggest2-detect"].isPressedEscape()&&this.trigger("hide",{})},this)}}},_setPosition:function(){this._popup.show(this.params.owner)},hide:function(t){return this.isShown()&&(this._popup.hide(),this.trigger("hide",t||{})),this},isShown:function(){return this._popup?this._popup.isShown():!1}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t._input=t.params.input,t.disableBrowserAutocomplete(),t.realVal(t.val()),t.bindEvents({change:function(e,n){t._onChange(e,n)},clear:$.throttle(function(e,n){t._onClear(e,n)},300)}),t.bindSuggestEvents()}}},_onChange:function(t,e){this.trigger("change",e)},_onClear:function(t,e){this.trigger("clear",e)},destruct:function(){this.unbindAllEvents(),this.__base.apply(this,arguments)},get:function(){return this._input},isFocused:function(){return this._input.hasMod("focused")},focus:function(){return this._input.setMod("focused","yes"),this},blur:function(){return this._input.delMod("focused"),this},getControl:function(){return this._input.elem("control")},val:function(t,e){return this._input.val.apply(this._input,arguments)},valWithoutSuggest:function(t,e){return this._input.val.call(this._input,t,$.extend(e,{suggest:!1}))},realVal:function(t){return void 0===t?this._realVal:("string"==typeof t&&(this._realVal=t),this._realVal)},width:function(){return this._input.domElem.width()},getCaretPosition:function(){var t,e=this.getControl()[0],n=this.val().length;return document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),t.text.length):"number"==typeof e.selectionStart?e.selectionStart:n},moveCaretToEnd:function(){var t=this.getControl()[0],e=t.value.length;if("undefined"!=typeof t.createTextRange){var n=t.createTextRange();n.collapse(!1),n.select()}else"number"==typeof t.selectionStart&&(t.scrollLeft=999999,t.setSelectionRange(e,e));return this},disableBrowserAutocomplete:function(){this.getControl().attr({autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-autocomplete":"list"})},_bindedEventsNames:[],bindEvents:function(t,e){return Object.keys(t).forEach(function(n){-1===this._bindedEventsNames.indexOf(n)&&this._bindedEventsNames.push(n),this._eventsFilter(n).on(n,t[n].bind(e||this))},this),this},bindSuggestEvents:function(){var t=this.params.suggest;return t.on({out:function(t,e){this.a11yDeactive(),this._changeValueByEvent(t,e)}},this),BEM.blocks["suggest2-item"].on(t.domElem,{tpah:this._onSuggestItemTpah,select:this._onSuggestItemSelect,enter:this._onSuggestItemEnter},this),this},_onSuggestItemTpah:function(t,e){this._changeValueByEvent(t,e),this.moveCaretToEnd()},_onSuggestItemSelect:function(t,e){"link"!==t.block.getMod("interact")&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},_onSuggestItemEnter:function(t,e){this.a11yActive(e.id),e.byKeyboard&&this.params.updateOnEnterByKeyboard&&(this._changeValueByEvent(t,e),this.moveCaretToEnd())},unbindAllEvents:function(){return this._input.domElem&&this._bindedEventsNames.forEach(function(t){var e=this._eventsFilter(t);e[e instanceof BEM.DOM?"un":"off"](t)},this),this._bindedEventsNames=[],this.params.suggest.un("out"),this},a11yActive:function(t){this.getControl().attr("aria-activedescendant",t)},a11yDeactive:function(){this.getControl().removeAttr("aria-activedescendant")},_eventsFilter:function(t){return~["blur","focus","change","clear"].indexOf(t)?this._input:this.getControl()},_changeValueByEvent:function(t,e){var n=e&&void 0!==e.val?e.val:this.realVal();this.val(n,$.extend({block:t.block.__self.getName(),event:t.type},e))}}),BEM.decl("suggest2-input",{onSetMod:{js:{inited:function(){var t=this;t.__base.apply(this,arguments),t.bindEvents({keydown:function(e){t._onKeyDown(e)}},t)}}},_onKeyDown:function(t){t.which===this.params.suggest.__self.keyboard.enter&&this.trigger("enter")}}),BEM.decl("suggest2-input",{disableBrowserAutocomplete:function(){}}),BEM.DOM.decl("suggest2-item",{val:function(){if(void 0!==this.params.val)return this.params.val;var t=this.elem("text");return(t.length?t:this.domElem).text()},valOnSelect:function(){return this.val()},valOnEnter:function(){return this.val()},valOnLeave:function(){return this.val()},onEnter:function(t){return this.setMod("selected","yes").triggerEvent("enter",{val:this.valOnEnter(),byKeyboard:t})},onLeave:function(t){return this.domElem?this.delMod("selected").triggerEvent("leave",{val:this.valOnLeave(),byKeyboard:t}):this},onSelect:function(t){this.triggerEvent("select",{val:this.valOnSelect(),byKeyboard:t})},triggerEvent:function(t,e){return this.trigger(t,{val:e.val,id:this.domElem.attr("id"),show:!1,byKeyboard:e.byKeyboard})}}),BEM.DOM.decl("suggest2-item",{},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("mouseover mouseout mousedown leftclick",function(t){this.trigger(t.type,t)}).liveBindTo("link","leftclick",function(t){this.trigger("link-click",{$e:t})})}}),BEM.DOM.decl("suggest2-item",{onLeave:function(){return this.domElem?this.__base.apply(this,arguments):void 0}}),Date.now||(Date.now=function(){return(new Date).getTime()}),BEM.DOM.decl("suggest2-counter",{pointerStartEvent:"mousedown",onSetMod:{js:{inited:function(){this.clear()}}},destruct:function(){this.unbindAllEvents()},getDefaultParams:function(){return{submitBySelect:!1,suggestReqID:!1,preventSubmit:!0,host:"//yandex.ru",path:"clck/jclck",dataUrl:"http://ya.ru",params:{},timeout:300}},metaProps:{exprt:"exprt",r:"region",log:"log"},clear:function(){return this._params={user_input:"",text:""},this._renderTimes=[],this._renderTime=0,this._path={service:this.params.service,state:"not_shown",index:0,personal:"nah_not_shown",submit:""},this._ratio={len:0,queryLen:0,actionsCount:0},this._firstChange=0,this._lastChange=0,this._sinceChange={first:0,last:0},this._selectedText="",this._session=0,this._reqID=this.__self._generateReqID(),this._meta={},this._afterSendAjaxCallback,this._startClickTime=null,this._startInputTime=null,this._requests=[],this._clicksCount=0,this},submit:function(t){var e=this,n=e.params.suggest.params["suggest2-input"],i=n.val();e._params.text=i,e._params.pos=n.getCaretPosition(),e._params.times=this._requests.map(function(t){return!t.error&&t.duration?t.duration:0}).join("."),e.params.suggestReqID&&e.attachReqID(),e.sendAjax(e.getUrl(),$.extend({submitForm:!0,afterSendAjaxCallback:function(){}},t)),e.trigger("submit",e._getSubmitEventData()).clear(),e._params.prev_query=i},_getSubmitEventData:function(){var t=this;return{path:t._path,times:t._params.times,render_times:t._renderTimes,prev_query:t._params.prev_query,user_input:t._params.user_input,text:t._params.text,pos:t._params.pos,ratio:t._ratio,since_first_change:t._sinceChange.first,since_last_change:t._sinceChange.last,session:t._session,suggest_reqid:t._reqID,meta:t._meta,url:t.getUrl()}},sendAjax:function(t,e){return $.ajax({type:"GET",url:t,dataType:"script",timeout:this._getAjaxTimeout()}).always(this._sendAjaxAlways.bind(this,e)),this},_getAjaxTimeout:function(){return this.params.timeout},afterSendAjax:function(t){return this._afterSendAjaxCallback=t,this},getUrl:function(){return this.params.host+["/",this.params.path].concat(this._getUrlParams()).join("/").replace(/(\/+)/g,"/")},_sendAjaxAlways:function(t){t||(t={}),this.params.preventSubmit&&t.submitForm&&this.params.form.submit({block:this.__self.getName(),prevent:!1}),t.afterSendAjaxCallback&&t.afterSendAjaxCallback(),this._afterSendAjaxCallback&&this._afterSendAjaxCallback()},_getUrlParams:function(){var t=this;return this._getParamsList().concat(t._getData()).reduce(function(e,n){return e.concat(t._getParams(n))},[]).concat(["/"])},_getParamsList:function(){var t=this;return[t.params.params,t._getPath(),t._params,t._getRatio(),t._getSinceChange(),t._getSession(),t._getResponsesShows(),{suggest_reqid:t._reqID}]},initValues:function(){return this._params.prev_query=this.params.suggest.params["suggest2-input"].val(),this},attachReqID:function(){this.params.form.appendHiddenInputs([{name:"suggest_reqid",value:this._reqID}])},getCurrentReqId:function(){return this._reqID},bindEvents:function(){var t=this,e=t.params,n=e.suggest,i=e.form,o=n.getModel(),s=n.params["suggest2-input"],r=n.params["suggest2-popup"];return i.on({"button-click":t._onFormButtonClick,submit:t._onFormSubmit},t),o.on({request:t._onModelRequest,response:t._onModelResponse},t),s.on({change:t._onInputChange,enter:t._onInputEnter},t),r.on({show:t._onPopupShow},t),BEM.blocks["suggest2-item"].on(n.domElem,"enter",t._onSuggestItemEnter,t),n.on({update:t._onSuggestUpdate,select:t._onSuggestSelect},t),this._input=s._input,this._input.bindTo(this.pointerStartEvent,this._onInputClick.bind(this)).on("focus",this._onInputFocus,this),this._input.findElem("control").on("blur",this._onInputBlur.bind(this)),t},_onInputClick:function(){this._startInputTime||(this._startClickTime=Date.now())},_onClickPopup:function(){this._clicksCount++},_onInputFocus:function(){this._timeoutInputTime&&clearTimeout(this._timeoutInputTime),this._startInputTime=this._startClickTime},_onInputBlur:function(t){this._timeoutInputTime=setTimeout(function(){this._startClickTime=null,this._startInputTime=null}.bind(this),300)},_onFormButtonClick:function(){"keyboard"!==this._path.submit&&(this._path.submit="button_by_mouse")},_onFormSubmit:function(t,e){e.data.block!==this.__self.getName()&&e.data.prevent!==!1&&(this.params.preventSubmit&&(e.stopImmediatePropagation(),e.preventDefault()),this._doSubmit())},_doSubmit:function(){this.submit()},_onModelRequest:function(t,e){this._requests.push(e.request)},_onModelResponse:function(t,e){if(e.data&&e.data.items){var n=e.data.items;this._path.personal=this._hasPersonal(n)?"nah_not_used":"nah_not_shown",this._meta=e.data.meta||{},this._renderTime=new Date,this._setMetaProps(e),delete this._requests[e.val.toLowerCase()]}},_onInputChange:function(t,e){e&&"clear"!==e.source||(this._params.user_input=t.block.val(),this[this._firstChange?"_lastChange":"_firstChange"]=new Date,this._startInputTime||(this._startInputTime=this._firstChange.getTime())),this._selectedText&&(this._path.state="edit"),this._ratio.actionsCount++},_onInputEnter:function(){this._path.submit="keyboard"},_onPopupShow:function(){"not_shown"===this._path.state&&(this._path.state="not_used")},_onSuggestItemEnter:function(t,e){e.byKeyboard&&this.params.suggest.params.updateOnEnterByKeyboard&&(this._selectedText=e.val,this._path.state="suggest")},_onSuggestUpdate:function(){this._addRenderTime(new Date-this._renderTime)},_onSuggestSelect:function(t,e){var n=this;n._path.state=e.byKeyboard?"keyboard":"mouse",n._path.index=e.itemIndex+1,n._selectedText=e.val,e.item.hasMod("personal")&&(n._path.personal="nah_used"),n.params.submitBySelect&&(n._path.submit=e.byKeyboard?"keyboard":"click_by_mouse",n._params.pos=e.pos,n._params.text=this._selectedText),n.params.suggest.isNeedSubmitFormOnSelectItem(e.item)||n.submit({submitForm:!1,afterSendAjaxCallback:e.callbackOnSelect})},unbindAllEvents:function(){var t=this.params,e=t.suggest,n=t.form,i=e.params["suggest2-popup"];return n.un("button-click").un("submit"),e.getModel().un("request").un("response"),e.params["suggest2-input"].un("change").un("enter"),i.un("show").un("hide"),e.un("select"),this},_hasPersonal:function(t){return t.some(function(t){return 1===BEM.blocks["suggest2-view"]._getPrefs(t).pers})},_setMetaProps:function(t){t.data.meta&&Object.keys(this.metaProps).forEach(function(e){this._params[this.metaProps[e]]=t.data.meta[e]||""},this)},_getParams:function(t){return Object.keys(t).reduce(function(e,n){return""===t[n]?e:(e.push(n+"="+encodeURIComponent(t[n]).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%2C/g,",")),e)},[])},_getPath:function(){return{path:[this._path.service,this._path.state,"p"+this._path.index,this._path.personal,this._path.submit].join(".")}},_getSession:function(){return this._session=(new Date).getTime()+Math.round(1e4*Math.random()),{session:this._session}},_getSinceChange:function(){var t=this._getSinceTime("first"),e=this._startInputTime&&Date.now()-this._startInputTime||0;return{since_first_change:t,since_last_change:this._getSinceTime("last"),total_input_time:e}},_getSinceTime:function(t){var e="_"+t+"Change";return this._sinceChange[t]=this[e]?(new Date).getTime()-this[e]:0,this._sinceChange[t]},_getResponsesShows:function(){return this._requests.reduce(function(t,e){return t.rqs++,e.error||(e.responseTime&&t.rsp++,0===e.itemsCount&&t.ersp++,e.fromCache&&t.cchd++),t},{rqs:0,rsp:0,rndr:this._renderTimes.length,ersp:0,clks:this._clicksCount,cchd:0})},_getRatio:function(){return this._ratio.len=this._params.user_input.length,this._ratio.queryLen=this._params.text.length,{ratio:[this._ratio.len,this._ratio.queryLen,this._ratio.actionsCount].join(".")}},_addRenderTime:function(t){return this._renderTimes.push(t),this._params.render_times=this._renderTimes.join("."),this},_getData:function(){return{"*data":"url="+this.params.dataUrl}}},{_generateReqID:function(){var t=BEM.blocks["i-global"]&&BEM.blocks["i-global"].param("yandexuid")?BEM.blocks["i-global"].param("yandexuid"):this._random(9)+this._random(9);return t+(+new Date).toString().slice(-7)+this._random(7)},_random:function(t){return Math.random().toString().slice(2,Math.min(t,10)+2)}}),BEM.DOM.decl("suggest2-counter",{bindEvents:function(){this.__base.apply(this,arguments);var t=this.params.suggest;BEM.blocks["suggest2-item"].on(t.domElem,"leftclick",this._onClickPopup.bind(this))}}),BEM.DOM.decl("suggest2-counter",{clear:function(){return this.__base.apply(this,arguments),this._path.submit="button_by_mouse",this}}),BEM.DOM.decl({block:"suggest2",modName:"theme",modVal:"flat"},{getPopupWidth:function(){var t=this._input.width();return this._input.get().hasMod("theme","normal")?t-2:t}}),BEM.decl({block:"suggest2-view",modName:"advanced",modVal:"yes"},{_getItemByType:function(t,e,n,i){var o=i.js,s=i.content;switch(n){case"html":o.val=t[1],s.push(e.body);break;case"bemjson":o.val=t[1],s.push.apply(s,Array.isArray(e.bemjson)?e.bemjson:[e.bemjson])}return this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"suggest2-item",modName:"interact",modVal:"link"},{onSelect:function(t){var e=this;e.__base.apply(e,arguments);var n=e.elem("link");return t||"_self"===n.attr("target")?function(){e._locationChange(n.attr("href"))}:void 0},_locationChange:function(t){window.location=t},valOnSelect:function(){return!1}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{init:function(){this.__base.apply(this,arguments),this._boundResizeHandler=this._resizeHandler.bind(this),this.__self._bindToWinResize(this._boundResizeHandler)},_resizeHandler:function(){this._popup.width(this.getPopupWidth())},destruct:function(){this.__self._unbindFromWinResize(this._boundResizeHandler),this._boundResizeHandler=null,this.__base.apply(this,arguments)}},{_resizeCallbacks:[],_bindToWinResize:function(t){return this._resizeCallbacks.push(t),this},_unbindFromWinResize:function(t){for(var e=0;e<this._resizeCallbacks.length;e++)if(this._resizeCallbacks[e]===t)return this._resizeCallbacks.splice(e,1),this;return this},_getResizeCallback:function(){return $.throttle(function(){var t=arguments;this._resizeCallbacks.forEach(function(e){e.apply(this,t)},this)},300,this)},live:function(){this.__base.apply(this,arguments),this._resizeCallback=this._getResizeCallback(),BEM.DOM.win.on("resize",this._resizeCallback)}}),BEM.DOM.decl({block:"suggest2",modName:"adaptive",modVal:"yes"},{_minWidth:0,_maxWidth:0,_resizeHandler:function(){this.__base.apply(this),this.afterCurrentEvent(function(){this.adjustView()})},_onShow:function(){this.__base.apply(this),this.hasMod("theme","large")&&this._applyMetricsToContent()},adjustView:function(){var t=this.__base.apply(this,arguments),e=t.minWidth,n=t.maxWidth,i=!1;return e!==this._minWidth&&(this._minWidth=e,i=!0),n!==this._maxWidth&&(this._maxWidth=n,i=!0),i&&this._popup.isShown()&&this._applyMetricsToContent(),t},_applyMetricsToContent:function(){this.__base.apply(this,arguments);var t=this.findElem("content");this._minWidth&&t.css("min-width",this._minWidth),this._maxWidth&&t.css("max-width",this._maxWidth)}}),BEM.DOM.decl({block:"suggest2",modName:"ahead",modVal:"yes"},{init:function(){var t=this.__base.apply(this,arguments),e=this;return e._model.on("response",function(t,n){var i=n.data,o=i.items&&i.items[0],s=e._input.val(),r="object"==typeof o?o[1]:o,a="string"==typeof r&&0===r.indexOf(s.toLowerCase())&&r.slice(n.val.length);i.val=n.val,e.params.aheadFromServer?e._input.get().setAhead(n.val+(i.meta&&i.meta["continue"]||"")):a&&s.length>=e.params.showOverChars?e._input.get().setAhead(n.val+(e.params.showFullPhrase?a[1]:a[1].split(" ")[0])):e._input.get().unsetAhead()}),t},getDefaultParams:function(){return $.extend(this.__base(),{aheadFromServer:!1,showOverChars:3,showFullPhrase:!1})}}),BEM.DOM.decl("suggest2-form",{onSetMod:{js:{inited:function(){this._isReady=!1,this._nodes=this.initNodes()}}},getDefaultParams:function(){return{inputName:"input",buttonName:"button",popupName:"popup"}},destruct:function(){this._nodes.forEach(function(t){t.suggest.domElem&&BEM.DOM.destruct(t.suggest.domElem),this.unbindFormEvents(t),t.counter&&t.counter.destruct(),t.proxies.input.destruct(),t.proxies.popup.destruct()},this),this.__base.apply(this,arguments)},getOwner:function(t){},isReady:function(){return this._isReady},initNodes:function(){var t=this.getNodes();return t.forEach(function(t){t.suggest.init()}),this._isReady=!0,this.trigger("ready",{nodes:t}),t},getNodes:function(){return this.getNodeList().map(function(t){var e=t.suggest,n=e.params;return n.form=this,n.input=t.input,n.popup=t.popup,n.button=t.button,t.proxies={},t.proxies.popup=n["suggest2-popup"]=BEM.create({block:"suggest2-popup",mods:$.extend({"for":this.params.popupName},this.params.popupMods)},this._getNodePopupParams(e,n)),t.proxies.input=n["suggest2-input"]=BEM.create({block:"suggest2-input",mods:this.params.inputMods},this._getNodeInputParams(e,n)),t.counter&&(t.counter.params.form=this,t.counter.params.suggest=e,n.counter=t.counter),this.bindFormEvents(t),t},this)},_getNodeInputParams:function(t,e){return{suggest:t,input:e.input,updateOnEnterByKeyboard:e.updateOnEnterByKeyboard
}},_getNodePopupParams:function(t,e,n){return{suggest:t,popup:e.popup,popupContentElem:this.params.popupContentElem,owner:this.getOwner(n)||e.input}},bindFormEvents:function(t){var e=this;return t.button&&t.button.bindTo("click press",function(t){e._onButtonClick(t)}),e.bindTo("submit",function(t,n){e.onSubmit(t,n)}),e},_onButtonClick:function(t){this.trigger("button-click",t)},unbindFormEvents:function(t){var e=this;return t.button&&t.button.un("click press"),e.unbindFrom("submit"),e},submit:function(t){return this.domElem.trigger("submit",t||{}),this},onSubmit:function(t,e){t.data=e||{},this.trigger("submit",t)},getNodeList:function(){var t=this,e=[];return t.elem("node").each(function(n,i){var o=$(i),s=t._getFormNodeElems(o);e.push(t._getFormNodeBlocks(s,o))}),e},_getFormNodeElems:function(t){return{input:this.findElem(t,"input"),button:this.findElem(t,"button")}},_getSuggestForNode:function(t){return this.findBlockInside(t,"suggest2")},_getFormNodeBlocks:function(t,e){var n=this._getSuggestForNode(e);return{node:e,suggest:n,counter:this.findBlockOn("suggest2-counter"),input:this.findBlockOn(t.input,"input"),button:this.findBlockOn(t.button,this.params.buttonName),popup:n.findBlockOn(this.params.popupName)}},appendHiddenInputs:function(t){return BEM.DOM.append(this.domElem,BEMHTML.apply(t.map(function(t){return{block:this.__self.getName(),elem:"hidden-input",tag:"input",attrs:{type:"hidden",name:t.name,value:t.value}}},this))),this},removeHiddenInputs:function(){return BEM.DOM.destruct(this.findElem(this.domElem,"hidden-input")),this}},{live:function(){this.liveInitOnBlockInsideEvent("click tap change focus","input")}}),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"stats",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._bindCounters()}}},_prepareCounterStats:function(t){var e=[];try{e.push(t.since_last_change),e.push(t.since_first_change),e.push(t.user_input.length),e.push(t.ratio.actionsCount),e.push(t.path.index),e.push("button_by_mouse"===t.path.submit?"1":"0"),e.push("edit"===t.path.state?"1":"0")}catch(n){return""}return e.join(",")},_bindCounters:function(){var t,e=this,n=e.findBlockInside("suggest2"),i=n.getCounter();i&&i.on("submit",function(n,i){var o;t&&t.remove(),o=e._prepareCounterStats(i),o&&(t=$("<input>",{type:"hidden",name:"csg",value:o}),e.domElem.append(t))})}})}(),function(){"use strict";BEM.DOM.decl({block:"suggest2-form",modName:"prefetch",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.domElem.append('<input type="hidden" name="suggest_reqid" value="'+BEM.blocks["suggest2-counter"]._generateReqID()+'">'),this._bindPrefetch()}}},_prefetchQuery:function(t){var e=this._getParams(t),n=this;n._prefetchStarted[t]||(n._prefetchStarted[t]=!0,$.ajax({url:n.domElem.attr("action")+n._serializeFormParams(e),success:function(){n._prefetchLoaded[t]=!0},cache:!0}))},_bindPrefetch:function(){var t=this,e=!1;t._input=t.findBlockInside("input"),t._prefetchStarted={},t._prefetchLoaded={};try{if(window.sessionStorage.setItem("test","1"),"1"!==window.sessionStorage.getItem("test"))return;window.sessionStorage.removeItem("test")}catch(n){return}t.domElem.on("submit",function(){var n=t._input.val();t._prefetchStarted[n]&&(e||(e=!0,t.domElem.append('<input type="hidden" name="prefetch" value="1">'),t._prefetchLoaded[n]||t.domElem.append('<input type="hidden" name="unfinished" value="1">')));try{window.sessionStorage.setItem("x",(new Date).getTime())}catch(i){}}),t.findBlockInside("suggest2").getModel().on("response",function(e,n){var i=n&&n.data,o=i&&i.meta&&"yes"===i.meta.instant;if(o&&i.meta.prefetch)for(var s=0,r=i.meta.prefetch.length;r>s;++s)t._prefetchQuery(i.meta.prefetch[s])})},_getParams:function(t){var e=this.domElem.find("input"),n=[];return e.each(function(){var e=$(this),i=e.prop("name");i&&n.push({name:e.prop("name"),value:"text"===i?t:e.val()})}),n.push({name:"prefetch",value:1}),n},_serializeFormParams:function(t){for(var e=[],n=0;n<t.length;++n)e.push(encodeURIComponent(t[n].name)+"="+encodeURIComponent(t[n].value));return"?"+e.join("&")}})}(),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(n){n.setMod(t,e)})}},_onSampleClick:function(t,e){var n=this.elemParams(t);this.val("val"in n?n.val:t.text(),{source:"sample"})}},{live:function(){return this.liveBindTo("sample","pointerclick",function(t){this._onSampleClick(t.data.domElem,t)}),this.__base()}}),function(){"use strict";var t={SPACE:32,ENTER:13};BEM.DOM.decl("input",{_onSampleClick:function(t){var e=this.elemParams(t);this.val("val"in e?e.val:t.text(),{source:"sample"}),this.hasMod("no-sample-focus")||(this.noSuggest=!0,this.setMod("focused","yes"),this.noSuggest=!1),this.trigger("sample-click")},_onSampleKeyDown:function(e){return e.which===t.SPACE||e.which===t.ENTER?(this._onSampleClick($(e.target).closest(".link")),!1):void 0}},{live:function(){this.__base.apply(this,arguments),this.liveBindTo("sample","keydown",function(t){return this._onSampleKeyDown(t)})}})}(),function(t){function e(t){var e=[];return t.replace(/(\d+)|\.|[^.\d]+/g,function(t,n){n?e.push(Number(n)):e.push(t)}),e}t.compareVersions=function(t,n){if(t===n)return 0;if(void 0===t||void 0===n||null===t||null===n)return NaN;for(var i=e(String(t)),o=e(String(n)),s=Math.max(i.length,o.length),r=0;s>r;++r){var a=i[r],u=o[r];if(void 0===a)return-1;if(void 0===u)return 1;if("."===a&&"."!==u)return-1;if("."===u&&"."!==a)return 1;if(typeof a!=typeof u&&(a=String(a),u=String(u)),a!==u)return a>u?1:-1}return 0}}(home),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),function(){"use strict";BEM.DOM.decl({name:"popup",modName:"focus",modVal:"capture"},{_onShown:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex","0").focus()},_onHidden:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("tabindex")}})}(),BEM.DOM.decl({block:"popup",modName:"expand",modVal:"simple"},{afterShow:function(){var t=this.domElem,e=this;this._addBg(),t.stop(!0).css(this._getTransitionParams()),setTimeout(function(){t.addClass("popup_expand_transition-on").css(e._getClearParams()),setTimeout(function(){e._addContent()},e.params.duration)},0),(new Image).src=this.params.banner.showStat,this._addResizeEvent()},beforeHide:function(t){var e=this.domElem,n=this;e.stop(!0,!0).css(this._getTransitionParams()),setTimeout(function(){e.css(n._getClearParams()).removeClass("popup_expand_transition-on"),n._removeContent(),t()},this.params.duration),(new Image).src=this.params.banner.closeStat},_moveToContainer:function(){this._inContainer=!0},_getBannerCoords:function(){return $(".banner-iframe")[0].getBoundingClientRect()},_getPopupCoords:function(){return this.domElem[0].getBoundingClientRect()},_addBg:function(){$(".banner__expand_popup-inner",this.domElem).css({"background-color":this.params.banner.bg})},_addResizeEvent:function(){var t=this,e=function(){t.hide(),$(window).unbind("resize orientationchange",e)};$(window).bind("resize orientationchange",e)},_addContent:function(){var t=$(".banner__expand_popup-inner",this.domElem),e=location.protocol||"http:",n="100%",i="100%",o=this.params.banner.src,s=this.params.banner.vars,r="";r=this.params.banner.html5?'<iframe class="banner-iframe" name="bannerhtml5" src="'+o+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="100%"></iframe>':"<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+e+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+n+" height="+i+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+o+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+s+'" ><EMBED src="'+o+'"  flashvars="'+s+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+n+" HEIGHT="+i+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+e+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>',t.children().length||t.append(r)},_removeContent:function(){this.params.banner.eraseContent&&$(".banner__expand_popup-inner",this.domElem).html("")},_getTransitionParams:function(){var t=this._getBannerCoords(),e=this._getPopupCoords(),n=t.height/e.height,i=t.left+t.width/2-(e.left+e.width/2),o=t.top+t.height/2-(e.top+e.height/2);return{transform:"translate3d("+i+"px, "+o+"px, 0) scale("+n+","+n+")",opacity:0}},_getClearParams:function(){return{transform:"translate3d(0, 0, 0) scale(1, 1)",opacity:1}}});var AwapsJsonAPI={Json:{}};AwapsJsonAPI.Json=function(t,e,n,i,o,s,r,a){"undefined"==typeof a&&(a=""),a&&a.length>2&&a.indexOf(":")<0&&(a+=":"),this.w=e,this.h=n;for(var u=String(n);u.length<4;)u="0"+u;for(u=e+u;u.length<8;)u="0"+u;o||(o="awaps.yandex.ru"),i=i?"&charset="+i:"",s=s?"&subsection="+s:"",this.object_name=r?r:"aw_json";var c=Math.round(65535*Math.random());this.json_awaps_url=a+"//"+o+"/10/"+t+"/"+u+".?charset="+i+"&callback="+this.object_name+".awaps_callback&rnd="+c+i+s,this.gif_code='<a href="'+a+"//"+o+"/1/"+t+"/"+u+'.gif" target="_blank"  ><img src="'+a+"//"+o+"/0/"+t+"/"+u+".gif?rnd="+c+'" width="'+e+'" height="'+n+'" border="0" ></A>',this.awaps_div_code='<div id="awaps_ad_div" width="'+e+'" height="'+n+'"></div>'},AwapsJsonAPI.Json.prototype.setID=function(t){t&&(this.html_cont_id=document.getElementById(t))},AwapsJsonAPI.Json.prototype.refreshAd=function(){this.callJson(this.json_awaps_url)},AwapsJsonAPI.Json.prototype.callJson=function(t){if(t){var e=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=t,e.appendChild(n)}},AwapsJsonAPI.Json.prototype.showAwapsJson=function(t){var e=t.media[0],n=this.getHTML(e);this.html_cont_id&&(this.html_cont_id.innerHTML=n)},AwapsJsonAPI.Json.prototype.awaps_callback=function(t){var e=t.media,n=e&&e[0]&&(e[0].bnImg||e[0].bnHtm);n&&this.showAwapsJson(t)},AwapsJsonAPI.Json.prototype.sendCounts=function(t){window.home=window.home||{},window.home.bnCounts||(window.home.bnCounts=[]);var e=this;t.bnCounts&&t.bnCounts.length?t.bnCounts.forEach(function(n){e.sendCount(n,1e3*t.stat_delay_sec)}):t.bnCount&&this.sendCount(t.bnCount,1e3*t.stat_delay_sec)},AwapsJsonAPI.Json.prototype.sendCount=function(t,e){var n=Math.round(65535*Math.random()),i=String(t).replace("%aw_random%",n);i&&(setTimeout(function(){(new Image).src=i},e),home.bnCounts.push(i))},AwapsJsonAPI.Json.prototype.getHTML=function(t){this.sendCounts(t);var e=t.html5_iframe_src||t.small_swiffy_iframe_src||t.bnHtm||t.small_iframe_src;if(e)return home.view("b-banner__iframe",{src:e,name:"b"+(Math.random()+"").substr(3,7)});var n="";if(t.image)n=home.view("b-banner__img",{attrs:{src:window.detector.isRetina()&&t.hidpi_image?t.hidpi_image:t.image,width:t.width,height:t.height,border:0,alt:t.image_alt}}),t.click_url&&(n=home.view("b-banner__link",{url:t.click_url,content:n}));else if(this.checkFlash(t)){var i=location.protocol||"http:";0===i.toLowerCase().indexOf("https")&&(t.bnFlash+="&cache=1"),n="<object classid=clsid:D27CDB6E-AE6D-11cf-96B8-444553540000 codebase="+i+"//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab width="+t.bnW+" height="+t.bnH+' ><param name="allowScriptAccess" value="Always" ><param name=movie value="'+t.bnFlash+'" ><param name=menu value=false><param name=quality value=high><param name=wmode value=opaque><param name="flashvars" value="'+t.flashvars+'" ><EMBED src="'+t.bnFlash+'"  flashvars="'+t.flashvars+'" quality=high  allowScriptAccess=Always wmode=opaque menu=false swLiveConnect=FALSE WIDTH='+t.bnW+" HEIGHT="+t.bnH+' TYPE="application/x-shockwave-flash" PLUGINSPAGE="'+i+'//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash"></EMBED> </object>'}else n=home.view("b-banner__img",{attrs:{src:t.bnImg,width:t.bnW,height:t.bnH,border:0,alt:t.bnAlt}}),t.gif_tizer||(n=home.view("b-banner__link",{url:t.bnHref,content:n}));return n},AwapsJsonAPI.Json.prototype.addImageContent=function(t,e){this.sendCounts(e);var n=home.view("b-banner__link",{url:e.href,content:home.view("b-banner__imgrnd",{src:e.img,cls:home.getData("banner.cls.banner__size"),alt:e.alt})});t.append(n)},AwapsJsonAPI.Json.prototype.addIframeContent=function(t,e,n){this.sendCounts(n);var i=document.createElement("iframe");i.className=home.getData("banner.cls.banner__size"),i.src="data:text/html;charset=utf-8,"+encodeURI(t),e.append(i)},AwapsJsonAPI.Json.prototype.checkFlash=function(t){var e=new CAWBrowser,n=e.flash>=t.flashV&&(t.bnFlash||t.swf_big_show_url);return t.minFlashVersion&&e.full_version&&home.compareVersions(e.full_version,t.minFlashVersion)<0&&(n=!1),n},AwapsJsonAPI.Json.prototype.expand=function(t){if((t.swf_big_show_url||t.big_iframe_src)&&($("#banner").append('<div class="banner__expand_innerclick"></div>'),$(".banner__expand_innerclick").click(function(){window.open(t.click_url,"_blank")}),!(t.swf_big_show_url&&!this.checkFlash(t)||t.big_iframe_src&&!t.show_big))){$("#banner").addClass("banner__expand").append('<div class="banner__expand_inner"></div>');var e=$(".banner__expand_popup"),n=e?e.bem("popup"):null;if(home.expandableBannerAPI={close:function(){n&&n.hide()}},n){var i;n.on({show:function(){i=Date.now()},hide:function(){i&&(t.show_big_seconds_stat_url&&((new Image).src=t.show_big_seconds_stat_url+Math.round((Date.now()-i)/1e3)),i=null)}}),$(window).on("message",function(t){t=t.originalEvent;var i=$(".banner-iframe",e)[0];if(i&&t.source===i.contentWindow){var o;try{o=JSON.parse(t.data)}catch(s){return}o&&o.command&&"close"===o.command&&setTimeout(function(){n.hide()},500)}})}$(".banner__expand_inner").click(function(){if(n){var i=$(window).height(),o=$(window).width(),s=Math.min(1200,Math.floor(o-t._gapW)),r=Math.floor(9*s/16);return r>i-t._gapH&&(s=s*(i-t._gapH)/r,r=i-t._gapH),640>s||360>r?void window.open(t.click_url,"_blank"):($(".banner__expand_popup-inner",e).css({width:s,height:r}),n.show(),!1)}$(window).trigger("bannerpopup.show")})}},AwapsJsonAPI.Json.prototype.checkTime=function(t){function e(){var e={};e[t.name]={},e[t.name][t.nameStart]=1,window.defaultMetrikaCounter.params(e),setTimeout(n,t.timeout)}function n(){var e={};e[t.name]={},e[t.name][t.nameEnd]=1,window.defaultMetrikaCounter.params(e)}function i(){window.defaultMetrikaCounter?e():setTimeout(i,100)}t&&i()},BEM.DOM.decl("etrains",{toggle:function(){var t=this;this.toggleMod("direction","rev"),home.stat.logPath("click","rasp."+t.params.counterType+".changeway")}},{live:function(){this.liveBindTo("direction","click",function(){this.toggle()})}}),BEM.DOM.decl({block:"etrains",modName:"client",modVal:"yes"},{init:function(){var t=this.domElem.data("widget"),e=this.params;if(t&&e.host){var n=e.host+"widgets/suburban/next_trains",i={};["rasp_to","rasp_direction","rasp_from","minutes_forward","minutes_backward","n"].forEach(function(e){var n=t.getValue(e);n&&(i[e]=n)}),$.ajax({url:n,data:i,dataType:"jsonp",success:this.changeThis(function(e){this.draw(e),$(window).trigger({type:"widgetLoaded",id:t.id})}),error:this.changeThis(function(){this.clear(),$(window).trigger({type:"widgetLoaded",id:t.id})})})}},draw:function(t){var e,n;if(t){var i=!0,o=this.params.counterType;t.routes_forward.length||(i=!1),e=home.view("etrains__draw",{from:t.from.name,to:t.to.name,today:t.routes_forward,host:this.params.host,direction:i,counterType:o}),n=home.view("etrains__draw",{from:t.to.name,to:t.from.name,today:t.routes_backward,host:this.params.host,direction:!i,counterType:o}),e||n||(e=n="")}else e=n="";this.elem("tracks").append(e,n),home.stat.logDOMShow(self.domElem)},clear:function(){this.elem("tracks").empty()}},{live:function(){this.__base.apply(this,arguments),this.liveInitOnEvent("init",function(t,e){this.init(e)})}}),function(){"use strict";home.ltgtFilter=function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;")},home.urlFilter=function(t){return t.replace(/./g,function(t){return t.match(/[&@\/;:=+?$]/)?t:encodeURIComponent(t)})},home.capitalize=function(t){return t?t[0].toUpperCase()+t.substr(1):""},home.isXivaSupported=function(t){return!t.EditMode&&t.XivaUrl&&!t.isOldIE&&!t.isMSIE9},home.encodeParams=function(t){return JSON.stringify(t).replace(/"/g,"'")},home.getJPathValue=function(t,e){for(var n=t,i=e.split("."),o=0;n&&void 0!==n[i[o]];)n=n[i[o++]];return n instanceof Object?"":n},home.formatNumber=function(t,e,n){if(isNaN(t))return t;t+="",e=e||",",n=n||"&nbsp;";var i=t.lastIndexOf("."),o=[],s="",r=0,a="";for(-1!==i?s=e+t.substr(i+1):i=t.length;--i>-1;)a=t[i]+a,r++,3===r&&(o.push(a),a="",r=0);return a&&o.push(a),o.reverse().join(n)+s},home.deepExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(e[n]instanceof Array||"object"!=typeof e[n]?t[n]=e[n]:(t[n]=t[n]||{},home.deepExtend(t[n],e[n])));return t},home.rnd=function(){return String(Math.random()).substr(2)},home.randomInteger=function(t,e){var n=t+Math.random()*(e+1-t);return Math.floor(n)},home.getJPathValue=function(t,e){for(var n=t,i=e.split("."),o=0;n&&void 0!==n[i[o]];)n=n[i[o++]];return n instanceof Object?"":n}}(),function(){"use strict";var t=150,e="undefined"!=typeof detector&&!!detector.getCSS3TransformProperty();BEM.DOM.decl("domik2",{onSetMod:{js:function(){this.__base(this),this._shown=this.hasMod("expanded","yes"),this._logged=this.hasMod("logged","yes"),$(this.changeThis(function(){0===this.domElem.find(".domik2__dropdown-wrapper").length&&BEM.DOM.append(this.domElem,".domik2__dropdown-wrapper"),this._bindEvents()}))}},_bindEvents:function(){this._initUsermenu(),this._initSizes(),this._initToggle(),this._initSocial(),this._initMultiauthPromo(),this._initStale(),this._initMailCountUpdate()},_initToggle:function(){this.bindTo("toggler","mousedown",this._preventSelection),this.bindTo("toggler","click",this._toggleExpanded)},_initSocial:function(){this.bindTo("social-more","mousedown",this._preventSelection),this.bindTo("social-more","click",this._toggleSocialExpander),this.bindTo("dropdown-wrapper","scroll",function(){this.elem("dropdown-wrapper").scrollLeft(0)})},_preventSelection:function(t){t.preventDefault()},_initMultiauthPromo:function(){var t,e,n="doNotShowMultiAuthPromo",i=home.getData("domik2.multiauth");i&&(i.close&&((new Image).src=i.close),home.localStorage.getItem(n)||(t=$(i.html),this._appendSlide(t),e=function(){home.localStorage.setItem(n,1),this._nextSlide()},this.bindTo("dropdown-skip-multiauth","click",e),this.bindTo("dropdown-multiauth-close","click",e),this._afterAnimation(function(){home.stat.logDOMShow(t)})))},_initStale:function(){var t=this.findBlockInside("stale-not-me","button");t&&t.on("click",this.changeThis(function(){var t=this.findBlockInside("auth");t.logout(),this._nextSlide()}))},_initMailCountUpdate:function(){$(window).on("mailcount",this.changeThis(this._updateMailCounter)),this.params.uid&&this.channel("mail").on("update",this.changeThis(function(t,e){this.params.uid===e.uid&&this._updateMailCounter(t,e)}))},_initUsermenu:function(){this._usermenu=this.findBlockInside("usermenu-popup","popup"),this._usermenu&&this._usermenu.on("hide",this.changeThis(function(){this.elem("usermenu-trigger").attr("aria-expanded","false")}))},_initSizes:function(){!this.hasMod("expanded","yes")&&this.hasMod("logged","yes")?this._collapsedNotificationsWidth=this.elem("collapsed-notifications").width():this._collapsedNotificationsWidth=0},_afterAnimation:function(n,i){var o=this;!e||void 0!==i&&i!==!0?n.call(this):setTimeout(function(){n.call(o)},t)},_toggleExpanded:function(){var t,e=this.hasMod("expanded","yes");e=!e,this._shown=e,e&&!this._collapsedNotificationsWidth&&this.hasMod("logged","yes")&&(this._collapsedNotificationsWidth=this.elem("collapsed-notifications").width()),this._collapsedNotificationsWidth&&this.elem("collapsed-notifications").css("max-width",e?0:this._collapsedNotificationsWidth),this.toggleMod("expanded","yes",e),this._toggleBodyClass(),e||(t=this.findBlockInside("auth"),t&&t.hideError(),this.delMod(this.elem("collapsed-notifications"),"clickable")),this.trigger(e?"expanded":"collapsed"),this._afterAnimation(function(){this.elem("user-block").attr("tabindex",e?-1:null),e&&this.setMod(this.elem("collapsed-notifications"),"clickable","no"),this._saveState(e),this._sendStat(e?"expand":"collapse")})},_saveState:function(t){var e=t?"setOn":"setOff",n=this.params[e];if(n)try{var i=$(".domik2__frame");i.length||(i=$('<iframe class="domik2__frame" name="domik2__frame" style="display:none"></iframe>'),$("body").append(i)),i.attr("src",n)}catch(o){}},_sendStat:function(t){home.stat.logPath("click",this.params.counters&&this.params.counters[t])},_toggleSocialExpander:function(){var t=!this.hasMod("social-expanded","yes");return this.toggleMod("social-expanded","yes"),this._sendStat("socialExpand"),this.setMod("social-expanded",t?"yes":"no"),this.elem("social-more").attr("aria-checked",t?"true":"false"),this.elem("auth-button").attr("tabindex",t?-1:106),!1},_nextSlide:function(){var t=this.elem("slide","type","current"),e=t.next();this.delMod(t,"type"),this.setMod(t,"animated","yes"),this.setMod(e,"visible","yes"),this._afterAnimation(function(){this.setMod(t,"hidden","yes"),this.setMod(e,"type","current")})},_appendSlide:function(t){if(t){var e=this.elem("slider"),n=this.elem("slide","type","current");t.prependTo(e),this.setMod(t,"type","current"),this.setMod(n,"type","next")}},_updateMailCounter:function(t,e){var n=!1,i=e.value;isNaN(i)||this._count===i||(this._count=i,n=!0),n&&this.elem("notification","type","mail").find(".domik2__notification-info").text(i)},_toggleBodyClass:function(){var t=this.hasMod("expanded","yes");$("body").toggleClass("b-page_domik_visible",t)},_showUserMenu:function(t){return this._usermenu?(this._usermenu.toggle(this.domElem),$(t.target).closest(".domik2__usermenu-trigger").attr("aria-expanded","true"),this._sendStat("userMenu"),!1):void 0}},{live:function(){return this.liveBindKey("social-more","space",function(){return this._toggleSocialExpander()}),this.liveBindTo("usermenu-trigger","click",function(t){return this._showUserMenu(t)}),this.liveBindKey("usermenu-trigger","space",function(t){return this._showUserMenu(t)}),!1}})}(),BEM.DOM.decl({block:"input",modName:"forgot",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateForgot)._updateForgot()}}},_updateForgot:function(){this.toggleMod(this.elem("forgot"),"visible","no","yes",!!this._val)}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},focused:{yes:function(){return this.__base.apply(this,arguments)===!1?!1:(this.setMod(this.elem("box"),"focused","yes"),void this.afterCurrentEvent(function(){this.trigger("focus")}))},"":function(){this.__base.apply(this,arguments),this.delMod(this.elem("box"),"focused"),this.afterCurrentEvent(function(){this.trigger("blur")})}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",Boolean(e)),this.afterCurrentEvent(function(){this.trigger("change",{checked:Boolean(e)})}),this.setMod(this.elem("box"),"checked",e)},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return this.hasMod("checked","yes")},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return"undefined"==typeof t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),function(){"use strict";BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base(),this.params.stat&&this.on("change",function(){home.stat.logPath("click",this.params.stat)})}}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("click",function(t){$(t.target).hasClass("checkbox")&&this.toggle()}),!1}})}(),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._button||(this._button=this.findBlockInside("button","button")),this._register||(this._register=this.findBlockInside("register","button")),this._remember||(this._remember=this.findBlockInside("remember","button")),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var n=t();return Array.isArray(n)?(e.showError(n[0],BEM.I18N("auth",n[1])),n[0].elem("control").attr("aria-invalid",!0),!1):!0});return i&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),i},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){return this._username.val(this._username.val().trim()),this._checkInput(!0)?(this._onSubmit(t),void this.trigger("submit",t)):!1},_onSubmit:function(t){this.disableButton().setRetpath(this.getRetpath(),!0),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var n=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,n.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_fromName:"from",_retpathName:"retpath",_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[---A-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=t.trim(),t=t.replace(/-\)/,"+)"),t=t.replace(/(\d)-/g,"$1"),t=t.replace(/\((\d+)\)/,"$1"),t=t.replace(/(^|\d+)\(/,"$1"),t=t.replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_getRetpath:function(){return BEM.blocks["i-global"].param("retpath")},_getPassportURL:function(t){var e=BEM.blocks["i-global"],n=e.param("passport-host"),i=e.param("passport-msg"),o=this._getRetpath();return[n,"/passport?mode=",t,i?"&"+this._fromName+"="+encodeURIComponent(i):"",o?"&"+this._retpathName+"="+encodeURIComponent(o):""].join("")},_getRegisterURL:function(){return this._getPassportURL("register")},_getRememberURL:function(){return this._getPassportURL("restore")},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,n,i){var o=i.checkEmpty,s=this;return[function(){return o&&0===e.length?[t._username,"fill-input"]:!0},function(){return o&&0===n.length?[t._password,"fill-input"]:!0},function(){return/[--]/.test(n)?[t._password,"wrong-keyboard-layout"]:!0},function(){return s._isUsernameValid(e,!o)?!0:[t._username,"wrong-characters"]},function(){return s._isPasswordValid(n)?!0:[t._password,"wrong-characters"]},function(){return n&&n===e?[t._password,"wrong-password"]:!0}]}}),BEM.DOM.decl("auth",{logout:function(){if(this.params.logout){var t="frame"+parseInt(1e4*Math.random(),10),e=$('<form style="display:none" target="'+t+'" method="post" action="'+this.params.logout+'"></form>'),n=$('<iframe style="display:none" name="'+t+'"></iframe>');$("body").append(e,n),e.submit()}}}),BEM.DOM.decl("auth",{_onInputChange:function(){this.__base.apply(this),this._silentCheckInput(!0)?this.setMod(this.elem("button"),"color","yellow"):this.delMod(this.elem("button"),"color")},_silentCheckInput:function(t){var e=this,n=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}),i=n.every(function(t){var e=t();return!Array.isArray(e)});return i}}),BEM.DOM.decl("auth",{
onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),n=this;if(e)n._createSocial(e);else{var i=t.param("social-host");if(!i)return;n._getSocialProviders(i,function(t){n._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){return t.length?(BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),void(this._socialDropdown=this.findBlockInside("social","dropdown"))):(this.elem("social").remove(),void this.dropElemCache("social"))},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),n=this.__self._getTopWindow().location;t&&n.href!==t?n.href=t:n.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){var e=t.keyCode===BEM.blocks.keycodes.SPACE;!e||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var n,i,o,s=[];return t=t.filter(function(t){return t.enabled}),i=this._buildSocialPrimary(t),s=s.concat(i),o=this._buildSocialSecondary(t),n=this._buildSocialMore(i,o,e,t),n&&s.push(n),s},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:BEM.blocks["i-common__string"].escapeHTML(t.display_name)}}})},_buildSocialMore:function(t,e,n,i){if(t.length<i.length){var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"  "},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:n}}],content:e}}]}}return!1},_getTopWindow:function(){return window.top},_socialStubHeight:24}),function(){"use strict";var t={SPACE:32};BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),Lego.params.statRoot&&this._socialDropdown&&this._socialDropdown.bindTo("switcher","click",function(){home.stat.logPath("click","mail.logout.domik.social_more")})}}},_onSocialClick:function(t){t.preventDefault();var e=BEM.blocks["i-global"],n=this.elemParams(t.data.domElem),i=n.provider;return this._socialDropdown&&this._socialDropdown.hide(),home.stat.logPath("click","mail.logout.domik.social_login."+i),n.url?(window.location=n.url,!1):void BEM.blocks["social-broker"].start(function(){var t,n=e.param("retpath");return n&&top.location.href!==n?(t=setTimeout(function(){top.location.href=n},5e3),void $.ajax({url:Lego.params["pass-host"]+"/services",data:{locale:BEM.blocks["i-global"].param("lang"),yu:$.cookie("yandexuid")},dataType:"jsonp",success:function(e){clearTimeout(t);for(var i=0,o=e.length;o>i;i++){var s=e[i].url&&(e[i].url.match(/^(?:https?:)?\/\/([^\/]+)/)||[])[1]||"";if(-1!==n.indexOf(s))return void(top.location.href=n)}top.location.reload()}})):void top.location.reload()},function(){},{provider:i})}},{live:function(){return this.__base.apply(this,arguments),this.liveBindTo("social-link","keydown",function(e){e.which===t.SPACE&&this._onSocialClick(e)}),!1},_buildSocial:function(t){var e=this.__base.apply(this,arguments),n=e[e.length-1];"dropdown"===n.block&&(n.content[0].content="",n.content[0].attrs={"aria-haspopup":"true","aria-expanded":"false","aria-label":BEM.I18N("auth","more")},n.content[1].js={directions:{to:"bottom",axis:"right",offset:{left:10}}});var i={};return x.each(t,function(t){i[t.code]=t.display_name}),x.each(e,function(t){"social-link"===t.elem&&(t.attrs=t.attrs||{},t.attrs.title=t.attrs["aria-label"]=i[t.js.provider],t.attrs.role="button")}),e}})}(),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._salt=0}}},start:function(t,e,n){var i,o,s,r,a=this;if(this._onSuccess=t,this._onFailure=e,!this._hasLocalStorage())return void this.onFailure({status:"error"});this._cleanup(),n=$.extend({},a._getDefaultParams(),n),i=n.startUrl+"?",r=n.popupName,delete n.startUrl,delete n.popupName,o=n.display,s=n.retpath,this._salt=Math.floor(1e9*Math.random()).toString(16);var u=r+"_"+this._salt;return o&&"popup"!==o&&(n.retpath=n.retnopopup||n.retpath||window.location.href,delete n.retnopopup),n.retpath+=(-1!==n.retpath.indexOf("?")?"&":"?")+"social-broker_seed="+encodeURIComponent(u),i+=Object.keys(n).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e])),t},[]).join("&"),o&&"popup"!==o?void this._navigate(i):(this._lsLoginStatusKey="login_status_from_"+u,this._window=window.open(i,u,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),void(this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(a._lsLoginStatusKey)}catch(e){}if(a.isClosed()&&(clearInterval(a._timer),!t))return void a.onFailure({status:"error"});if(t){var n=a._deserialize(t);a._handleStatus(n)===!1&&a.onFailure({status:"error"})}},500))):void this.onFailure({status:"error"}))},_hasLocalStorage:function(){return!!window.localStorage},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(n){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status?(this.onFailure(t),!0):!1},isClosed:function(){return this._window?this._window.closed:!0},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,n,i){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",n,", height=",i].join("")},_getPopupParams:function(){var t,e,n=this._windowWidth,i=this._windowHeight;return window.opera?(t=(screen.availWidth-n)/2,e=(screen.availHeight-i)/2):(t=(window.innerWidth-n)/2,e=(window.innerHeight-i)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,n,i)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}},{start:function(){this._current&&this._current.destruct(),this._current=BEM.create("social-broker"),this._current.start.apply(this._current,arguments)},onSuccess:function(){this._current.onSuccess.apply(this._current,arguments)},onFailure:function(){this._current.onFailure.apply(this._current,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"serverside",modValue:"yes"},{onSetMod:{js:function(){var t=this;t._button=t.findBlockInside("button","button"),t._username=t.findBlockInside("username","input"),t._password=t.findBlockInside("password","input"),t._password.on("change",t._onInputChange,t),t._username.on("change",t._onInputChange,t),t.redraw(),t._errorOn=null,t.bindTo("submit",t._onBeforeSubmit)}},_createSocial:function(){}})}(),function(){"use strict";BEM.DOM.decl({block:"auth",modName:"hint",modValue:"yes"},{_checkInput:function(t){var e=this,n=e.__self,i=e._username.val(),o=e._password.val();if(t){if(0===i.length)return e.showError(e._username,BEM.I18N("auth","fill-input")),!1;if(0===o.length)return e.showError(e._password,BEM.I18N("auth","fill-input")),!1}return n._isUsernameValid(i)?(e.hideError(),!0):(e.showError(e._username,BEM.I18N("auth","wrong-characters")),!1)}},{_isUsernameValid:function(t){return!/\s/.test(t)},_buildError:function(){var t=this.__base();return t.mods.theme="hint",t.mods["tail-size"]="xs",t.js.directions={to:"left",axis:"middle",offset:{left:-15}},t}})}(),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),n=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",n?"&yu="+n:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=window.devicePixelRatio,this._isRetina>1&&this.updateIcon()}}},_getIconPath:function(){var t=this.params.avatarHost,e=this.params.uid||BEM.blocks["i-global"].param("uid"),n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n,o=[t,"/get-yapic/",e,i,"?rnd=",+new Date].join("");return o},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){var t=this._getIconPath();this._setIconBackground(t)},getDefaultParams:function(){return{avatarHost:"//avatars.yandex.net"}},_getIconSize:function(){return"middle"},redraw:function(){return this}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){return this.hasMod("disabled")?!1:void this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),n.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,n=BEM.blocks.keycodes;n.is(e,this.params.pressKeys)&&(this.delMod("pressed"),n.is(e,this.params.clickKeys)&&this.trigger("click",this._buildClickEventData(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base()}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e,n=this.__self,i=n._buildTypePopup(this._uniqId,this.params.mods,this.params.js),o=$(BEMHTML.apply(i)),s=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,o),e=this._popup=o.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),s){var r=s.domElem;t.getUsernameBlock().val(r.find("input[name=login]").change().val()),t.getPasswordBlock().val(r.find("input[name=passwd]").change().val()),delete this.params.hidden,s.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw()}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,n){var i=(n||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},n),mods:$.extend({type:"popup"},e),content:[i?{elem:"explain",content:i}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=60;this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,t,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){return this._menu||(this._menu=!0,this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keyup",function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.SPACE&&this.domElem.click()})),this.__base(),!1}}),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this._dropdown&&this._dropdown.on("show",function(){this.unbindFromWin("scroll")}.bind(this))}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,n,i){return $.isFunction(n)||(i=n,n=this.params.onError),this._get(t,e,n,$.extend({},this.params,i)),this},_get:function(e,n,i,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){n.call(this.params.callbackCtx,r.data[s])},this):this._do(e,n,i,o)},_do:function(t,e,n,i){},_onSuccess:function(t,e,n,i){i.cache&&!this._preventCache&&this.putToCache(i,t,n),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,n,i){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(n,e);return o.data[s]=i,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),function(t){t.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,n,i){this._number++,this._requestNumber++,this._retryCount=i.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,n,i){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:i.data?$.extend({},i.data,t):t},a=o._wrapCallback(function(n,s,r){o._onSuccess(o._buildCacheKey(t,i),t,n[0],i),o._allowCallback(s,r)&&e.apply(i.callbackCtx,n)}),u=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},i.retryInterval):n&&n.apply(i.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(i.paramsToSettings||[]),function(t,e){r[e]=i[e]}),$.ajax(r).done(a).fail(u)}},_wrapCallback:function(t){var e=this._requestNumber,n=this._number;return function(i){null!==i&&t(arguments,e,n)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}})}(BEM),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(n){n&&n.counters&&void 0!==n.counters.unread?t.call(this,n.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,n=this.params.unreadMax;e&&n&&e>n&&(e=n+"+");var i=e?e+" ":"";BEM.DOM.update(this.domElem,i+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"login",modVal:"known"},{onSetMod:{js:function(){this.channel("auth").on("notme",function(){this.delMod("login")},this)}}}),function(){var t,e={};BEM.DOM.decl("notice",{onSetMod:{js:function(){var e=home.getData("notice.enabled");if(e){var n=this.getUid();n&&(this.updateByInit(),t||(t=!0,this.channel("mail").on("fresh",this.changeThis(this.updateByXiva))),this.valueFromCache(),this.channel("notice").on("up",this.changeThis(this.valueFromCache)))}}},getUid:function(){if(!this.uid){var t=this.findBlockOutside("user");this.uid=String(t.domElem.data("uid")||t.params.uid||"")}return this.uid},updateByInit:function(){var t=this.getUid();e[t]=this.params.count||0,this.channel("notice").trigger("up")},updateByXiva:function(t,n){if(n){var i=n.uid;i in e&&(e[i]=n.value,this.channel("notice").trigger("up"))}},needShowDot:function(){for(var t in e)if(e.hasOwnProperty(t)&&e[t]>0)return!0;return!1},valueFromCache:function(){var t=this.getUid();this.value(e[t])},value:function(t){t?this.delMod("state"):this.hasMod("mode","all")&&this.needShowDot()?this.setMod("state","dot"):this.setMod("state","off"),this.domElem.html(t||"")}})}(),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this._isRetina&&this.updateIcon()}}},_getIconPath:function(t){var e=this.params.avatarHost,n=this._getIconSize(),i=(this._isRetina?"/islands-retina-":"/islands-")+n;return[e,"/get-yapic/",t,i].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("usermenu",{_getEmbeddedAuth:function(){return this.auth?this.auth:this.auth=BEM.create("i-embeddedauth",this.params.auth)},_selectUser:function(t){var e=t.closest(".usermenu__user").data("uid");if(e)return this._getEmbeddedAuth().setData({uid:e},this.changeThis(this._switchResponse,this)).submit(),!1},_switchResponse:function(t){switch(t.status){case"ok":case"action-not-required":return void window.location.reload();default:window.location.href=this.params.passport}}},{live:function(){var t=function(t){return this._selectUser($(t.target))};this.liveBindTo({elem:"user",modName:"clickable",modVal:"yes"},"pointerclick",t),this.liveBindKey({elem:"user",modName:"clickable",modVal:"yes"},"enter",t)}}),BEM.decl("i-embeddedauth",{addCallback:function(t){var e="cb"+Math.random();return this.callbacks||(this.callbacks={}),this.callbacks[e]=t,e},addQueryParam:function(t,e){var n=t.split("?"),i=n[1]?n[1].split("&"):[];return i.push(e),n[1]=i.join("&"),n.join("?")},bindCallback:function(){var t=this;window.mordaAuth={onResponse:function(e){if(!e)return void t.processResponse();for(var n=e.split("?")[1].split("&"),i={},o=0,s=n.length;s>o;o++){var r=n[o].split("=");i[r.shift()]=decodeURIComponent(r.join("="))}t.processResponse(i)}}},submit:function(){this.getForm().trigger("submit")},setData:function(t,e){if(t=$.extend({},this.params.params||{},t),this.idkey&&(t.idkey=this.idkey),e){var n=this.addCallback(e);t.retpath=this.addQueryParam(t.retpath,"from="+n)}return this.getForm().html(this.stringifyParams(t)),this},setDomain:function(){var t=document.domain.match(/([^.]+(?:\.com?)?\.)?[^.]+$/)[0];try{document.domain=t}catch(e){}},stringifyParams:function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=this.getInputHtml(n,t[n]));return e},getInputHtml:function(t,e){return'<input name="'+t+'" value="'+e+'"/>'},getForm:function(){if(this.form)return this.form;this.setDomain(),this.bindCallback();var t="embeddedauthframe"+parseInt(1e4*Math.random(),10);return this.form=$('<form style="display:none" target="'+t+'" method="'+(this.params.method||"post")+'" action="'+this.params.action+'"></form>'),this.frame=$('<iframe style="display:none" name="'+t+'"></iframe>'),$("body").append(this.form,this.frame),this.form},processResponse:function(t){var e=function(){};if(!t)return void this.trigger("no-data");switch(t.from&&this.callbacks[t.from]&&(e=this.callbacks[t.from],this.callbacks[t.from]=!1),this.idkey=t.idkey,t.status){case"login-empty":case"password-empty":case"account-not-found":case"password-invalid":case"action-not-required":case"ok":case"uid-empty":case"sessionid-invalid":case"session-no-uid":case"yu-empty":case"yu-invalid":case"captcha-invalid":case"captcha-required":return e(t),void this.trigger("data-received",t);case"internal-exception":return this.idkey="",this._interr?(e(t),void this.trigger("data-received",t)):(this._interr=!0,t.from&&(this.callbacks[t.from]=e),void this.submit());default:t.url?window.location=t.url:(e(t),this.trigger("data-received",t))}}}),$(function(){function t(t){var e;i=!0,e=t.bem("popup"),e.show(n)}function e(e,o){var s=$(".geosuggest"),r=$(o),a=$(e),u=s.find(".geosuggest__header")[0],c=u?u.onclick():{};s.length>0&&setTimeout(function(){var e;if("1"===c.ispopup){if(n=a,0===n.length)return!1;t(s)}else if(n=r,0===n.length)return!1;e=function(){t(s)},n.click(e),$(document).keydown(function(t){"27"===t.keyCode&&s.bem("popup").hide()}),s.bem("popup").on("hide",function(){i=!1}),"1"===c.ispopup&&s.bem("popup").on("hide",function(){n.unbind("click",e)}),$(window).resize(function(){setTimeout(function(){if(i){s.bem("popup")._isShowed=!1,s.bem("popup").show(n),i=!0;try{document.body.focus()}catch(t){}}},142)}),$(".b-region__ajax-action").click(function(){return $(document.body).append('<iframe style="display:none" src="'+this.href+'"></iframe>'),s.bem("popup").hide(),!1})},1e3)}var n,i=!1;e(".link_geosuggest_yes",".link_geosuggest_yes")}),BEM.DOM.decl("mts-stripe",{_closeStripe:function(){this.domElem.hide()}},{live:function(){return this.liveBindTo("close","click",function(){this._closeStripe()}),this.liveBindKey("close","space enter",function(){this._closeStripe()}),!1}}),$(document).ready(function(){!function(){function t(){return $(".b-mobile-balloon")[0].onclick()}$(".b-mobile-balloon__button_yes").click(function(){document.location.href=t().url}),$(".b-mobile-balloon__button_no").click(function(){var e=t().statNo;(new Image).src=t().closeurl,e&&home.stat.logPath("click",e),$(".b-mobile-balloon").hide(),setTimeout(function(){$(window).trigger("popupredraw.lego")},100)})}()}),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:{inited:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function n(t,e){return" "+t+'="'+e+'"'}function i(t,e,n){var i=t.match(e);return i&&i[n+1?n:1]||""}function o(){return i(d.cookie,new RegExp("fuid"+u+"=([^;]+)"))}function s(){var t=d.domain;return t&&i(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,u,c,l=t.host||"kiks.yandex",h=window,d=document,p=navigator,f=p.userAgent,m=p.mimeTypes,_=9,g=f&&/gecko/i.test(f),v=f&&/MSIE/.test(f)&&/Win/.test(f),b=g?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",k="//"+l+".ru/fu",x="//"+l+".ru/fu",E="application/x-shockwave-flash",M="style",S="position:absolute;margin-left:-999em;top:0;",C=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',T="allowScriptAccess",B="always",D="height",I="wmode",O="window",P="width",A="bgcolor",j="#FFFFFF",N="ya_fc",F=n(M,S)+n(P,1)+n(D,1)+n("id",N)+n("tabindex","-1")+n("aria-hidden","true"),R=!1;h.ya_fc_external=function(t,i,l,h){r=t,a=i,u=l,c=h||"fc";var d,p=m&&m[E]?m[E].enabledPlugin:0,f=R,y=0,M=o()?w.replace("%d",a).replace("%s",c):k.replace("%s",s());if(p)y=p.description.split("Shockwave Flash ")[1],f=parseInt(y,10)>=_;else if(v){f=R;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_)}catch(D){}}return d=f?g?'<div style="'+S+'"><'+b+F+n("src",M)+n(I,O)+n(A,j)+n(T,B)+n("type",E)+"/></div>":(v?"<"+b+C+F+">"+e("movie",M):"<"+b+F+n("type",E)+n("data",M)+">")+e(I,O)+e(A,j)+e(T,B)+"</"+b+">":'<img src="'+x.replace("%s",s())+'" style="'+S+'" />'},h.ya_fc_requestData=function(){var t=d.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},h.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),d.cookie="fuid"+u+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},h.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),n=d.createElement("iframe"),i=d.getElementsByTagName("body")[0],o="40px;";n.src=e,n.style.cssText=P+o+D+o+"border:0;"+S,n.frameBorder=0,n.setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),i&&i.insertBefore(n,i.firstChild)},h.ya_fc_complete=function(){setTimeout(function(){var t=document.getElementById(N);t&&t.parentNode.removeChild(t)},0)};var L=this,q=arguments.callee.load=function(t){var e,n;t.mode?(e="00",n="kfc"):e="07",L.replaceWith(h.ya_fc_external("07_2",e,"01",n))};L.hasClass("i-flashcookie_autoload_no")||q(t)};Lego.block["i-flashcookie"]=function(n){var i=this.hasClass("i-flashcookie_type_inline")?e:t;i&&i.call(this,n)}}(),BEM.DOM.decl({name:"i-flashcookie",modName:"type",modVal:"inline"},{onSetMod:{js:{inited:function(){Lego.block["i-flashcookie"].call(this.domElem,this.params)}}}}),function(){var t=Lego.block["i-flashcookie"],e=function(t){function e(t,e){return'<param name="'+t+'" value="'+e+'" />'}function n(t,e){return" "+t+'="'+e+'"'}function i(t,e,n){var i=t.match(e);return i&&i[n+1?n:1]||""}function o(){return i(d.cookie,new RegExp("fuid"+u+"=([^;]+)"))}function s(){var t=d.domain;return t&&i(t,/[^.]+\.[^.]{2,3}(\.tr)?$/,0)}t||(t={});var r,a,u,c,l=t.host||"kiks.yandex",h=window,d=document,p=navigator,f=p.userAgent,m=p.mimeTypes,_=9,g=f&&/gecko/i.test(f),v=f&&/MSIE/.test(f)&&/Win/.test(f),b=g?"embed":"object",y="//"+l.split(".").slice(0,-1).join(".")+".%s/system/fc%d.html",w="//"+l+".ru/system/%s%d.swf",k="//"+l+".ru/fu",x="//"+l+".ru/fu",E="application/x-shockwave-flash",M="style",S="position:absolute;top:0;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);",C=' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"',T="allowScriptAccess",B="always",D="height",I="wmode",O="window",P="width",A="bgcolor",j="#FFFFFF",N="ya_fc",F=n(M,S)+n(P,1)+n(D,1)+n("id",N)+n("tabindex","-1")+n("aria-hidden","true"),R=!1;
h.ya_fc_external=function(t,i,l,h){r=t,a=i,u=l,c=h||"fc";var d,p=m&&m[E]?m[E].enabledPlugin:0,f=R,y=0,M=o()?w.replace("%d",a).replace("%s",c):k.replace("%s",s());if(p)y=p.description.split("Shockwave Flash ")[1],f=parseInt(y,10)>=_;else if(v){f=R;try{f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_)}catch(D){}}return d=f?g?'<div style="'+S+'"><'+b+F+n("src",M)+n(I,O)+n(A,j)+n(T,B)+n("type",E)+"/></div>":(v?"<"+b+C+F+">"+e("movie",M):"<"+b+F+n("type",E)+n("data",M)+">")+e(I,O)+e(A,j)+e(T,B)+"</"+b+">":'<img src="'+x.replace("%s",s())+'" style="'+S+'" />'},h.ya_fc_requestData=function(){var t=d.getElementById("ya_fc");try{t.setLocation(s(),o())}catch(e){}},h.ya_fc_setCookie=function(t){var e=new Date;e.setTime(e.getTime()+31536e7),d.cookie="fuid"+u+"="+t+";expires="+e.toGMTString()+";path=/;domain="+s()},h.ya_fc_getIFrame=function(t){var e=y.replace("%s",t).replace("%d",r),n=d.createElement("iframe"),i=d.getElementsByTagName("body")[0],o="40px;";n.name="i-flash-cookie"+(Math.random()+"").substr(3,7),n.src=e,n.style.cssText=P+o+D+o+"border:0;"+S,n.frameBorder=0,n.setAttribute("tabindex","-1"),n.setAttribute("aria-hidden","true"),i&&i.insertBefore(n,i.firstChild)},h.ya_fc_complete=function(){setTimeout(function(){var t=document.getElementById(N);t&&t.parentNode.removeChild(t)},0)};var L=this,q=arguments.callee.load=function(t){var e,n;t.mode?(e="00",n="kfc"):e="07",L.replaceWith(h.ya_fc_external("07_2",e,"01",n))};L.hasClass("i-flashcookie_autoload_no")||q(t)};Lego.block["i-flashcookie"]=function(n){var i=this.hasClass("i-flashcookie_type_inline")?e:t;i&&i.call(this,n)}}(),$(function(){function t(){var t=n.height(),e=i.height(),a=$(window).height();o||(o=t,s=t-e),o+r>a?i.css({height:Math.max(a-r-s,200),overflowY:"auto",marginRight:7}):i.css({height:"auto",overflowY:"visible",marginRight:0})}function e(e){var i=e.is(".b-disaster")?e:$(".b-disaster",e);i.bind("pointerclick",function(){if(n){var e=n.bem("popup");e.isShown()?e.hide():(e.show(),home.stat.logDOMShow(e.domElem)),e.on("hide",function(){home.stat.logPath("show","head.disaster.popup.closed")})}t(),$(window).trigger("disasterpopup.show")})}var n=$(".b-disaster-popup"),i=$(".b-disaster-popup__content"),o=0,s=0,r=70;n.find(".b-disaster-content").each(function(){$(this).replaceWith(home.getData("b-disaster-popup.text",""))}),window.initDisasterPopup=e,$(window).resize(function(){t()})}),BEM.DOM.decl("dist-popup",{onSetMod:{js:function(){this.__base(),setTimeout(function(){BEM.blocks["i-message-locker"].acquireLock("dist-popup",this._hide.bind(this)).then(this._onShow.bind(this),this.destruct.bind(this))}.bind(this),this.__self.SHOW_TIMEOUT)}},_getPopupPosition:function(){return{top:12,left:18}},_onShow:function(){var t=this.params,e=t.counters;this.popup=this.findBlockOn("popup").show(this._getPopupPosition()),this.popup.on({"before-hide":this._onBeforeHide,hide:this._onHide},this),this.popup._unbindFocusEvents(),this._sendCounter(e.show),this.bindTo("no close","click",this._onNoClick),this.bindKeyTo("close","space enter",this._onNoClick),this.bindTo("yes","click",this._onYesClick)},_onBeforeHide:function(t,e){e&&"esc-key"===e.source&&this.afterCurrentEvent(this._countCancel)},_onHide:function(){BEM.blocks["i-message-locker"].releaseLock("dist-popup"),setTimeout(this.destruct.bind(this),this.__self.DESTRUCT_TIMEOUT)},_onYesClick:function(){this._closeFlag(this.params.close_url)},_onNoClick:function(){return this.popup.hide(),this._countCancel(),!1},_hide:function(){this.popup.hide()},_countCancel:function(){this._closeFlag(this.params.close_url),this._closeFlag(this.params.quarantineUrl),this._sendCounter(this.params.counters.no),window.home.gaCounter.trackCancelPopup()},_closeFlag:function(t){t&&((new Image).src=t)},_sendCounter:function(t){t&&t.length&&t.forEach(function(t){"path"===t.type?csh_ifmsid(t.content):"image"===t.type&&((new Image).src=t.content)})},destruct:function(){return this.popup&&this.popup.destruct(),this.__base.apply(this,arguments)}},{SHOW_TIMEOUT:1e3,DESTRUCT_TIMEOUT:1e3}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"inline"},{_onYesClick:function(){this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes);var t=this,e=this.params;return this._inlineInstall||(this._inlineInstall=BEM.create({block:"i-inline-install",mods:{api:e.api}},$.extend(e,{callbacks:{yes:function(){this._sendCounter(e.counters.install),this.popup.hide()}.bind(this),no:function(){this.popup.hide()}.bind(this)}}))),this._inlineInstall.request().fail(function(){t.popup.hide()}),!1}}),BEM.decl({block:"i-inline-install",modName:"api",modVal:"chrome"},{_checkApi:function(){return!!window.chrome&&window.chrome.webstore&&window.chrome.webstore.install},_requestApi:function(t,e,n){window.chrome.webstore.install(t,e,n)}}),BEM.decl({block:"i-inline-install",modName:"api",modVal:"opera"},{_checkApi:function(){return!!window.opr&&window.opr.addons&&window.opr.addons.installExtension},_requestApi:function(t,e,n){window.opr.addons.installExtension(t,e,n)}}),BEM.DOM.decl({block:"dist-popup",modName:"install",modVal:"download"},{_onYesClick:function(){return this.__base.apply(this,arguments),this._sendCounter(this.params.counters.yes),this._downloadInstance||(this._downloadInstance=BEM.create("i-install-download",this.params)),this._downloadInstance.download(),this._hide(),!1}}),BEM.decl("i-install-download",{init:function(){var t=home.view("popup",{mods:{type:"download",position:"fixed","has-close":"yes"},mix:"i-install-download__popup i-bem",attrs:{"bem-js":home.getBEMParams({popup:{}})},content:home.view("i-install-download__content",this.params)});this._popup=BEM.DOM.append(BEM.DOM.scope,t).bem("popup"),this._popup.on("show",function(){$("body").addClass("b-page_overflow_hidden")}),this._popup.on("hide",function(){$("body").removeClass("b-page_overflow_hidden")}),this.inited=!0},download:function(){return this.inited||this.init(),this._download(),setTimeout(function(){this._popup.show({top:0})}.bind(this),500),this},_countDownload:function(){this.params.counters.click&&((new Image).src=this.params.counters.click)},_download:function(){var t=document.createElement("iframe");$(t).addClass("i-install-download__frame-hidden").attr("aria-hidden",!0).attr("name","install").attr("src",this.params.url).appendTo(BEM.DOM.scope),this._countDownload()}}),BEM.DOM.decl({block:"dist-popup",modName:"flat",modVal:"yes"},{_getPopupPosition:function(){return"right-bottom"===this.params.location?{bottom:12,right:18}:"left-bottom"===this.params.location?{bottom:12,left:18}:{top:12,left:18}},_onBeforeHide:function(t,e){if(this.__base.apply(this,arguments),(!e||"after-animation"!==e.source)&&this.params.hideAnimation){if(this._isHiding)return void t.preventDefault();var n=setTimeout(function(){this.popup.hide({source:"after-animation"})}.bind(this),1e3);this.bindTo("webkitAnimationEnd animationend",function(){clearTimeout(n),this.popup.hide({source:"after-animation"})}),this.setMod("animation",this.params.hideAnimation),this._isHiding=!0,t.preventDefault()}}}),function(){"use strict";var t=$.Deferred();$(function(){t.resolve()}),BEM.decl("i-message-locker",{},{blockOrder:[],acquireLock:function(t,e){var n,i=$.Deferred(),o=this;return this._initOrder(),t in this._blockOrderMap&&!this._locked?(n=this._blockOrderMap[t],!this._showPretender||this._showPretender.index>n?(this._showPretender?this._showPretender.deferreds.forEach(function(t){t.reject()}):this._initDelay.done(function(){setTimeout(function(){var t=o._showPretender.deferreds;o._locked=o._showPretender.name,o._closeFunc=e,o._showPretender=null,t.forEach(function(t){t.resolve()}),BEM.channel("i-message-locker").trigger("lock",o._locked)},0)}),this._showPretender={name:t,deferreds:[i],index:n}):this._showPretender&&this._showPretender.name===t?this._showPretender.deferreds.push(i):i.reject(),i):i.reject()},releaseLock:function(t){this._locked&&this._locked===t&&(this._locked="",this._closeFunc=null,BEM.channel("i-message-locker").trigger("unlock",t))},forceClose:function(){this._closeFunc&&this._closeFunc()},_blockOrderMap:void 0,_showPretender:void 0,_locked:"",_initDelay:t,_initOrder:function(){if(!this._blockOrderMap){this._blockOrderMap={};for(var t=0;t<this.blockOrder.length;++t)this._blockOrderMap[this.blockOrder[t]]=t}}})}(),BEM.decl("i-message-locker",{},{blockOrder:["b-hs-balloon","dist-popup"]}),BEM.DOM.decl("news-popup",{onSetMod:{js:function(){var t=this;this.popup=this.findBlockOn(this.domElem,"popup"),this.$customTabLink=$(".news__custom-tab"),this.$tab=this.$customTabLink.closest(".content-tabs__head-item"),this.news=this.findBlockOn(this.$tab.closest(".content-tabs"),"content-tabs"),this.widget=this.news.findBlockOutside("widget"),this.turnReloadOff(),this.popup.on("show",function(){home.stat.logDOMShow(t.popup.domElem)}),this.bindTo("add","click",this.add),this.bindTo("cancel","click",this.cancel),this.popup.on("hide",this.changeThis(this.hideTab)),this.show()}},show:function(){this.popup.setRelativeContainer(this.widget),this.popup.show(this.$customTabLink),this.channel("widget").on("showPreferences",this.hideOnOpenSettings,this),$(window).scrollTop(this.$tab.offset().top),this.elem("add").focus()},hide:function(){this.popup.hide()},add:function(){this.saveNewPattern(),this.saveWidgetSettings()},cancel:function(){this.hide()},hideTab:function(){var t=this.widget.getInstance();this.actualData||t._prefs.customCatId||(this.news.hasMod(this.$tab,"active","true")&&this.news.selectRelative(-1),this.$tab.hide()),this.turnReloadOn()},hideOnOpenSettings:function(t,e){e.elem.instance===this.widget.getInstance()&&this.hide()},saveNewPattern:function(){var t=this.widget.findBlockOutside("widgets");t.params.settings&&t.params.settings.newpattern&&t.save()},saveWidgetSettings:function(){var t=this.widget.getInstance(),e=this.params.customId,n=t._prefs;n.customCatId=e,t.saveValues(n,this.afterSave.bind(this))},afterSave:function(t){"ok"===t.result&&((new Image).src=this.params.coockieUrl,this.actualData=!0),this.hide()},turnReloadOff:function(){this.widget.getInstance().pauseReload=!0},turnReloadOn:function(){var t=this.widget.getInstance();t.pauseReload=!1,!this.actualData&&t._prefs.customCatId?t.reload():Widget.Framework.addToReloadQueue(t,t.onload)}},{live:!1}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"relative"},{setRelativeContainer:function(t){this._parentContainer=t},_findParent:function(){return this._parentContainer},setParent:function(t){return this._parent=t,this}}),function(){var t=function(){var t=home.getData("delayed-reporter"),e=function(t){t&&(t="string"==typeof t?{url:t}:t,"undefined"!=typeof t.timeout?setTimeout(function(){(new Image).src=t.url},1e3*t.timeout):(new Image).src=t.url)};if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];i instanceof Array||(i=[i]),i.forEach(e)}};window.$?$(t):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",t,!1)}(),function(t,e,n){function i(){f&&m&&console.log.apply(console,arguments)}function o(t){return"string"==typeof t&&(t={block:t}),t.block+(t.elem?l+t.elem:"")+(t.modName?c+t.modName+c+t.modVal:"")}function s(t){var e={};return t.split(l).forEach(function(t,n){var i=[n?"elem":"block","mod","val"];t.split(c).forEach(function(t,n){e[i[n]]=t})}),e}function r(t){return t?p.push(t):!1}function a(){return p.length&&p.pop()}function u(){this._lang="",this._prj="lego",this._keyset="",this._key=""}if("function"==typeof e.I18N&&e.I18N._proto)return e.I18N;"undefined"==typeof i18n&&(i18n={}),BEM=e;var c="_",l="__",h="ru",d={},p=[],f=!1,m="undefined"!=typeof console&&"function"==typeof console.log;u.prototype={lang:function(t){return this._lang=t,this},project:function(t){return this._prj=t,this},keyset:function(t,e){return e&&r(this._keyset),this._keyset=o(t),this},key:function(t){return this._key=t,this},decl:function(t){var e=s(this._keyset),n="i-tanker"===e.block?"tanker":this._prj,i=e.elem||this._keyset,o=this._key;n=i18n[n]||(i18n[n]={}),i=n[i]||(n[i]={}),i[o]="function"==typeof t?t:function(e){return t};var r=d[this._lang]||(d[this._lang]={}),a=r[this._keyset]||(r[this._keyset]={});a[o]=t},val:function(t,e){var n=d[this._lang]&&d[this._lang][this._keyset],o="keyset: "+this._keyset+" key: "+this._key+" (lang: "+this._lang+")";if(!n)return i("[I18N_NO_KEYSET] %s",o),"";n=n[this._key];var s=typeof n;return"undefined"===s?(i("[I18N_NO_VALUE] %s",o),""):"string"===s?n:(e||(e=this),n.call(e,t))},_cache:function(){return d}},e.I18N=function(t){var e=function(t,n,i){return e.keyset(t).key(n,i)};return e._proto=t,e.project=function(t){return this._proto.project(t),this},e.keyset=function(t){return this._proto.keyset(t,!0),this},e.key=function(t,n){var i,o,s=this._proto;return s.lang(this._lang).key(t),i=s.val.call(s,n,e),o=a(),o&&s.keyset(o,!1),i},e.decl=function(t,e,n){var i,o=this._proto;n||(n={}),n.lang&&o.lang(n.lang),o.keyset(t);for(i in e)e.hasOwnProperty(i)&&o.key(i).decl(e[i]);return this},e.lang=function(t){return"undefined"!=typeof t&&(this._lang=t),this._lang},e.debug=function(t){f=!!t},e.lang(h),e}(new u)}(this,"undefined"==typeof BEM?{}:BEM),"undefined"!=typeof BEM&&BEM.I18N&&(BEM.I18N.decl("auth",{auth:"","fill-input":"  ",login:"",logon:"",more:"",password:"",register:"",remember:" ","social-log-in":"    ",temporary:" ","wrong-characters":" ","wrong-keyboard-layout":" ","wrong-password":"     "},{lang:"ru"}),BEM.I18N.decl("b-keyboard-popup",{close:""},{lang:"ru"}),BEM.I18N.decl("i-services",{404:"404",adresa:"",advertising:"",afisha:"",all:"",api:"API",appsearch:"",auto:"",autoru:".",avia:"",aziada:"",ba:"",backapv:" .",balance:"",bar:"","bar-ie":"","bar-ie9":"9",bayan:" ",blogs:"",books:"",browser:"",calendar:"",captcha:"...",catalogwdgt:" ",chrome:"   ",city:"",cityday:" ",collection:"",company:"",contest:"Contest",desktop:" ",direct:"","direct.market":"",disk:"",display:"",ege:"",expert:"",feedback:" ",feedback2:" ",ff:"  ",fotki:"",fresh:"",games:"",geocontext:"",goroda:"",help:"",i:"",ie:"  ",images:"","images-com":"",interests:"",internet:"",kassa:"",keyboard:"",kraski:"",kuda:"",large:"  ",legal:" ",lenta:"",libra:"",literacy:"   ",local:"",lost:"",love:"13",mail:"",maps:"","maps-wiki":" ",market:"","market.advertising":"",master:"",metrika:"",metro:"",mobile:"",moikrug:"",money:"",museums:"",music:"","music-partner":": ",nahodki:"",nano:"",newhire:"",news:"",notifications:" ",oauth:"",online:"",openid:"OpenID",opera:"Opera Software",opinion:"",partners:"",partnersearch:"  ",passport:"",pdd:"  ",peoplesearch:"",perevod:"",probki:"",pulse:": ",punto:"Puntoswitcher",pvo:"",rabota:"",ramazan:"",rasp:"",realty:"",referats:"",rk:"?",root:".  Unix ",school:"",search:"",server:"",shtrafi:"",site:"",slovari:"",so:"",social:"",soft:"",sport:"",sprav:"",start:" ",stat:"",subs:"",taxi:"",terms:"",tests:"  ",tickets:"",time:".",toster:"",translate:"",tune:"",tv:"",uslugi:"",video:"","video-com":"",vno:"",wdgt:"",weather:"",webmaster:"",widgets:"",wordstat:"",wow:".",www:"",xmlsearch:"XML",yaca:"",yamb:" ",zakladki:""},{lang:"ru"}),BEM.I18N.decl("i-tanker__dynamic",{gender:function(t){return function(t){return t[t.gender]}.call(this,t)},plural:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count,n=e%10,i=e%100;return 1==n&&11!=i?t.one:n>1&&5>n&&(10>i||i>20)?t.some:t.many}.call(this,t)},plural_adv:function(t){return function(t){var e=isNaN(parseInt(t.count))?0:t.count;return 0===e?t.none:this.keyset("i-tanker__dynamic").key("plural",{count:t.count,one:t.one,some:t.some,many:t.many})}.call(this,t)},toggle:function(t){return function(t){return Boolean(t.condition)?t["true"]:t["false"]}.call(this,t)}},{lang:"ru"}),BEM.I18N.decl("search2",{"search-button-text":"","search-input-label":"","search-service-label":"  ","search-web-label":"  "},{lang:"ru"}),BEM.I18N.decl("suggest2",{fact:"",group:" ",nah:" ",nav:"",on_other_devices:"  ",text:"",traffic:"",weather:""},{lang:"ru"}),BEM.I18N.decl("suggest2-item",{"quick-answer":" "},{lang:"ru"}),BEM.I18N.decl("suggest2-view",{"delete":""},{lang:"ru"}),BEM.I18N.decl("user",{enter:"",exit:"",letter:function(t){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:t.count,one:" ",some:" ",many:" ",none:"  "})},letter_compose:" ",passport:"",tune:"",upload_files:" "},{lang:"ru"}),BEM.I18N.lang("ru"));var BEMHTML;!function(t){function e(e){var n={},i=function(e,n){return function(i){if("object"==typeof n&&"undefined"!=typeof e)e.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:this,o.bemhtml=i()}}(function(){return function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){var n=e[r][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){function i(t){this.bemxjst=t,this.jsClass=null,this.tag=new s(this,"tag"),this.attrs=new s(this,"attrs"),this.mod=new s(this),this.js=new s(this,"js"),this.mix=new s(this,"mix"),this.bem=new s(this,"bem"),this.cls=new s(this,"cls"),r.apply(this,arguments)}var o=t("inherits"),s=t("../bemxjst/match").Match,r=t("../bemxjst/entity").Entity;o(i,r),n.Entity=i,i.prototype.init=function(t,e){this.block=t,this.elem=e,this.jsClass=this.bemxjst.classBuilder.build(this.block,this.elem)},i.prototype._initRest=function(t){"default"===t?this.rest[t]=this.def:"tag"===t||"attrs"===t||"js"===t||"mix"===t||"bem"===t||"cls"===t||"content"===t?this.rest[t]=this[t]:this.rest.hasOwnProperty(t)||(this.rest[t]=new s(this,t))},i.prototype.defaultBody=function(t){var e,n=this.tag.exec(t);t.ctx.js!==!1&&(e=this.js.exec(t));var i=this.bem.exec(t),o=this.cls.exec(t),s=this.mix.exec(t),r=this.attrs.exec(t),a=this.content.exec(t);return this.bemxjst.render(t,this,n,e,i,o,s,r,a)}},{"../bemxjst/entity":5,"../bemxjst/match":8,inherits:11}],2:[function(t,e,n){function i(t){a.apply(this,arguments);var e="undefined"==typeof t.xhtml?!0:t.xhtml;this._shortTagCloser=e?"/>":">",this._elemJsInstances=t.elemJsInstances}var o=t("inherits"),s=t("../bemxjst/utils"),r=t("./entity").Entity,a=t("../bemxjst");o(i,a),e.exports=i,i.prototype.Entity=r,i.prototype.runMany=function(t){var e="",n=this.context,i=n.position,o=n._notNewList;if(o?n._listLength+=t.length-1:(n.position=0,n._listLength=t.length),n._notNewList=!0,this.canFlush)for(var s=0;s<t.length;s++)e+=n._flush(this._run(t[s]));else for(var s=0;s<t.length;s++)e+=this._run(t[s]);return o||(n.position=i),e},i.prototype.render=function(t,e,n,i,o,r,a,u,c){var l=t.ctx;if(void 0===n&&(n="div"),!n)return this.renderNoTag(t,i,o,r,a,u,c);var h="<"+n,d=l.js;d!==!1&&(i===!0&&(i={}),i&&i!==l.js?d!==!0&&(i=s.extend(d,i)):d===!0&&(i={}));var p;i&&(p={},p[e.jsClass]=i);var f=o;void 0===f&&(f=void 0===l.bem?e.block||e.elem:l.bem),f=!!f,void 0===r&&(r=l.cls);var m=p&&(this._elemJsInstances?e.block||e.elem:e.block&&!e.elem);if(!f&&!r)return this.renderClose(h,t,n,u,f,l,c);if(h+=' class="',f){var _=e.elem?t.elemMods:t.mods;if(h+=e.jsClass,h+=this.buildModsClasses(e.block,e.elem,_),l.mix&&a&&a!==l.mix&&(a=[].concat(a,l.mix)),a){var g=this.renderMix(e,a,p,m);h+=g.out,p=g.jsParams,m=g.addJSInitClass}r&&(h+=" "+("string"==typeof r?s.attrEscape(r).trim():r))}else r&&(h+=r.trim?s.attrEscape(r).trim():r);return h+=m?' i-bem"':'"',f&&p&&(h+=" data-bem='"+s.jsAttrEscape(JSON.stringify(p))+"'"),this.renderClose(h,t,n,u,f,l,c)},i.prototype.renderClose=function(t,e,n,i,o,r,a){var u=t,c=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t};if(c(i)||c(r.attrs)){i=s.extend(i,r.attrs);for(var l in i){var h=i[l];void 0!==h&&h!==!1&&null!==h&&(u+=h===!0?" "+l:" "+l+'="'+s.attrEscape(s.isSimple(h)?h:this.context.reapply(h))+'"')}}return s.isShortTag(n)?(u+=this._shortTagCloser,this.canFlush&&(u=e._flush(u))):(u+=">",this.canFlush&&(u=e._flush(u)),(a||0===a)&&(u+=this.renderContent(a,o)),u+="</"+n+">"),this.canFlush&&(u=e._flush(u)),u},i.prototype.renderMix=function(t,e,n,i){var o={},r=this.context,a=n,u=i;o[t.jsClass]=!0,s.isArray(e)||(e=[e]);for(var c=this.classBuilder,l="",h=0;h<e.length;h++){var d=e[h];if(d){"string"==typeof d&&(d={block:d,elem:void 0});var p=!1;d.elem?p=d.elem!==t.elem&&d.elem!==r.elem||d.block&&d.block!==t.block:d.block&&(p=!(d.block===t.block&&d.mods)||d.mods&&t.elem);var f=d.block||d._block||r.block,m=d.elem||d._elem||r.elem,_=c.build(f,m),g=d.elem||d._elem||(d.block?void 0:r.elem);if(p&&(l+=" "+c.build(f,g)),l+=this.buildModsClasses(f,g,d.elem||!d.block&&(d._elem||r.elem)?d.elemMods:d.mods),d.js&&(a||(a={}),a[c.build(f,d.elem)]=d.js===!0?{}:d.js,u||(u=f&&!d.elem)),p&&!o[_]){o[_]=!0;var v=this.entities[_];if(v){var b=r.block,y=r.elem,w=v.mix.exec(r);if(r.elem=y,r.block=b,w)for(var k=0;k<w.length;k++){var x=w[k];if(x&&(!x.block&&!x.elem||!o[c.build(x.block,x.elem)])){if(x.block)continue;x._block=f,x._elem=m,e=e.slice(0,h+1).concat(x,e.slice(h+1))}}}}}}return{out:l,jsParams:a,addJSInitClass:u}},i.prototype.buildModsClasses=function(t,e,n){if(!n)return"";var i,o="";for(i in n)if(n.hasOwnProperty(i)&&""!==i){var s=n[i];if(s||0===s){"boolean"!=typeof s&&(s+="");var r=this.classBuilder;o+=" "+(e?r.buildElemClass(t,e,i,s):r.buildBlockClass(t,i,s))}}return o},i.prototype.renderNoTag=function(t,e,n,i,o,s,r){return r||0===r?this._run(r):""}},{"../bemxjst":7,"../bemxjst/utils":10,"./entity":1,inherits:11}],3:[function(t,e,n){function i(t){this.modDelim=t.mod||"_",this.elemDelim=t.elem||"__"}n.ClassBuilder=i,i.prototype.build=function(t,e){return e?t+this.elemDelim+e:t},i.prototype.buildModPostfix=function(t,e){var n=this.modDelim+t;return e!==!0&&(n+=this.modDelim+e),n},i.prototype.buildBlockClass=function(t,e,n){var i=t;return n&&(i+=this.buildModPostfix(e,n)),i},i.prototype.buildElemClass=function(t,e,n,i){var o=this.buildBlockClass(t)+this.elemDelim+e;return i&&(o+=this.buildModPostfix(n,i)),o},i.prototype.split=function(t){return t.split(this.elemDelim,2)}},{}],4:[function(t,e,n){function i(t){this._bemxjst=t,this.ctx=null,this.block="",this._currBlock="",this.elem=null,this.mods={},this.elemMods={},this.position=0,this._listLength=0,this._notNewList=!1,this.escapeContent=t.options.escapeContent===!0,this._onceRef={}}var o=t("./utils");n.Context=i,i.prototype._flush=null,i.prototype.isArray=o.isArray,i.prototype.isSimple=o.isSimple,i.prototype.isShortTag=o.isShortTag,i.prototype.extend=o.extend,i.prototype.identify=o.identify,i.prototype.xmlEscape=o.xmlEscape,i.prototype.attrEscape=o.attrEscape,i.prototype.jsAttrEscape=o.jsAttrEscape,i.prototype.isFirst=function(){return 1===this.position},i.prototype.isLast=function(){return this.position===this._listLength},i.prototype.generateId=function(){return o.identify(this.ctx)},i.prototype.reapply=function(t){return this._bemxjst.run(t)}},{"./utils":10}],5:[function(t,e,n){function i(t,e,n,i){this.bemxjst=t,this.block=null,this.elem=null,this.options={},this.canFlush=!0,this.def=new r(this),this.content=new r(this,"content"),this.rest={},this.init(e,n),this.initModes(i)}function o(){return this.ctx.content}var s=t("./utils"),r=t("./match").Match,a=t("./tree"),u=a.Template,c=a.PropertyMatch,l=a.CompilerOptions;n.Entity=i,i.prototype.init=function(t,e){this.block=t,this.elem=e},i.prototype.initModes=function(t){for(var e=0;e<t.length;e++){for(var n=t[e],i=n.predicates.length-1;i>=0;i--){var o=n.predicates[i];if(o instanceof c&&"_mode"===o.key){n.predicates.splice(i,1),this._initRest(o.value),this.rest[o.value].push(n);break}}-1===i&&this.def.push(n);for(var i=n.predicates.length-1;i>=0;i--){var o=n.predicates[i];o instanceof l&&(this.options=s.extend(this.options,o.options))}}},i.prototype.prepend=function(t){for(var e=Object.keys(this.rest),n=0;n<e.length;n++){var i=e[n];t.rest[i]&&this.rest[i].prepend(t.rest[i])}e=Object.keys(t.rest);for(var n=0;n<e.length;n++){var i=e[n];this.rest[i]||(this._initRest(i),this.rest[i].prepend(t.rest[i]))}},i.prototype.run=function(t){return 0!==this.def.count?this.def.exec(t):this.defaultBody(t)},i.prototype.setDefaults=function(){if(0!==this.content.count&&this.content.push(new u([],o)),0!==this.def.count){this.canFlush=this.options.flush||!1;var t=this;this.def.push(new u([],function(){return t.defaultBody(this)}))}}},{"./match":8,"./tree":9,"./utils":10}],6:[function(t,e,n){function i(t,e){this.name="BEMXJSTError",this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,e||this.constructor):this.stack=(new Error).stack}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,n.BEMXJSTError=i},{}],7:[function(t,e,n){function i(t){this.options=t||{},this.entities=null,this.defaultEnt=null,this.tree=null,this.match=null,this.contextConstructor=function(t){a.call(this,t)},o(this.contextConstructor,a),this.context=null,this.classBuilder=new u(this.options.naming||{}),this.depth=0,this.canFlush=!1,this.oninit=null,this.defaultEnt=new this.Entity(this,"","",[]),this.defaultElemEnt=new this.Entity(this,"","",[])}var o=t("inherits"),s=t("./tree").Tree,r=t("./tree").PropertyMatch,a=t("./context").Context,u=t("./class-builder").ClassBuilder,c=t("./utils");e.exports=i,i.prototype.locals=s.methods.concat("local","applyCtx","applyNext","apply"),i.prototype.compile=function(t){function e(){return r._run(r.context.ctx)}function n(t,n){return n?r.local(n,function(){return r.local({ctx:t},e)}):r.local({ctx:t},e)}function i(t,e){return r.applyMode(t,e)}function o(t){return function(e){return r.local(t,e)}}var r=this,a=new s({refs:{applyCtx:n,local:o}}),u=this.recompileInput(t),c=a.build(u,[o,n,function h(t){return t?r.local(t,h):r.applyNext()},i]);this.tree&&(c={templates:c.templates.concat(this.tree.templates),oninit:this.tree.oninit.concat(c.oninit)}),this.tree=c;var l=this.groupEntities(c.templates);l=this.transformEntities(l),this.entities=l,this.oninit=c.oninit},i.prototype.recompileInput=function(t){var e=i.prototype.locals;if("function"==typeof t&&t.length===e.length)return t;var n=t.toString();return n=n.replace(/^function[^{]+{|}$/g,""),n=new Function(e.join(", "),n)},i.prototype.groupEntities=function(e){for(var n={},i=0;i<e.length;i++){var o,s=e[i].clone(),a=null;o=void 0;for(var u=0;u<s.predicates.length;u++){var c=s.predicates[u];if(c instanceof r){if("block"===c.key)a=c.value;else{if("elem"!==c.key)continue;o=c.value}s.predicates.splice(u,1),u--}}if(null===a){for(var l="block() subpredicate is not found.\n    See template with subpredicates:\n     * ",u=0;u<s.predicates.length;u++){var c=s.predicates[u];0!==u&&(l+="\n     * "),l+="_mode"===c.key?c.value+"()":Array.isArray(c.key)?c.key[0].replace("mods","mod").replace("elemMods","elemMod")+"('"+c.key[1]+"', '"+c.value+"')":c.value&&c.key?c.key+"('"+c.value+"')":"match()"}throw l+="\n    And template body: \n    ("+("function"==typeof s.body?s.body:JSON.stringify(s.body))+")","undefined"==typeof BEMXJSTError&&(BEMXJSTError=t("./error").BEMXJSTError),new BEMXJSTError(l)}var h=this.classBuilder.build(a,o);n[h]||(n[h]=[]),n[h].push(s)}return n},i.prototype.transformEntities=function(t){for(var e=[],n=Object.keys(t),i=0;i<n.length;i++){var o=n[i],s=this.classBuilder.split(o),r=s[0],a=s[1];"*"===a&&e.push(r),t[o]=new this.Entity(this,r,a,t[o])}if(t.hasOwnProperty("*")){for(var u=t["*"],i=0;i<n.length;i++){var o=n[i];"*"!==o&&t[o].prepend(u)}this.defaultEnt.prepend(u),this.defaultElemEnt.prepend(u)}for(var i=0;i<e.length;i++){for(var r=e[i],c=this.classBuilder.build(r,"*"),u=t[c],i=0;i<n.length;i++){var o=n[i];if(o!==c){var l=t[o];l.block===r&&void 0!==l.elem&&t[o].prepend(u)}}this.defaultElemEnt.prepend(u)}for(var i=0;i<n.length;i++){var o=n[i];t[o].setDefaults(),this.defaultEnt.setDefaults(),this.defaultElemEnt.setDefaults()}return t},i.prototype._run=function(t){var e;return e=void 0===t||""===t||null===t?this.runEmpty():c.isArray(t)?this.runMany(t):"string"!=typeof t.html||t.tag||"undefined"!=typeof t.block||"undefined"!=typeof t.elem||"undefined"!=typeof t.cls||"undefined"!=typeof t.attrs?c.isSimple(t)?this.runSimple(t):this.runOne(t):this.runUnescaped(t.html)},i.prototype.run=function(t){var e=this.match,n=this.context;this.match=null,this.context=new this.contextConstructor(this),this.canFlush=null!==this.context._flush,this.depth=0;var i=this._run(t);return this.canFlush&&(i=this.context._flush(i)),this.match=e,this.context=n,i},i.prototype.runEmpty=function(){return this.context._listLength--,""},i.prototype.runUnescaped=function(t){return this.context._listLength--,""+t},i.prototype.runSimple=function(t){this.context._listLength--;var e="";return(t&&t!==!0||0===t)&&(e+="string"==typeof t&&this.context.escapeContent?c.xmlEscape(t):t),e},i.prototype.runOne=function(t){var e=this.context,n=e.ctx,i=e.block,o=e._currBlock,s=e.elem,r=e.mods,a=e.elemMods;t.block||t.elem?e._currBlock="":e._currBlock=e.block,e.ctx=t,t.block?(e.block=t.block,t.mods?e.mods=t.mods:t.block===i&&t.elem||(e.mods={})):t.elem?o&&(e.block=o):e.block="",e.elem=t.elem,t.elemMods?e.elemMods=t.elemMods:e.elemMods={};var u=e.block||"",c=e.elem;u||c?e.position++:e._listLength--,this.depth++;var l=this.classBuilder.build(u,c),h=!1,d=this.entities[l];d?this.canFlush&&!d.canFlush&&(h=!0,this.canFlush=!1):(d=this.defaultEnt,void 0!==c&&(d=this.defaultElemEnt),d.init(u,c));var p=this.options.production===!0?this.tryRun(e,d):d.run(e);return e.ctx=n,e.block=i,e.elem=s,e.mods=r,e.elemMods=a,e._currBlock=o,this.depth--,h&&(this.canFlush=!0),p},i.prototype.tryRun=function(t,e){try{return e.run(t)}catch(n){return console.error("BEMXJST ERROR: cannot render "+["block "+t.block,"elem "+t.elem,"mods "+JSON.stringify(t.mods),"elemMods "+JSON.stringify(t.elemMods)].join(", "),n),""}},i.prototype.renderContent=function(t,e){var n=this.context,i=n.position,o=n._listLength,s=n._notNewList;n._notNewList=!1,e&&(n.position=0,n._listLength=1);var r=this._run(t);return n.position=i,n._listLength=o,n._notNewList=s,r},i.prototype.local=function(t,e){for(var n=Object.keys(t),i=[],o=0;o<n.length;o++){for(var s=n[o],r=s.split("."),a=this.context,u=0;u<r.length-1;u++)a=a[r[u]];i.push({parts:r,value:a[r[u]]}),a[r[u]]=t[s]}for(var c=e.call(this.context),o=0;o<i.length;o++){for(var r=i[o].parts,a=this.context,u=0;u<r.length-1;u++)a=a[r[u]];
a[r[u]]=i[o].value}return c},i.prototype.applyNext=function(){return this.match.exec(this.context)},i.prototype.applyMode=function(t,e){var n=this.match.entity.rest[t];if(!n)return this.context.ctx[t];if(!e)return n.exec(this.context);var i=this,o=function(){return n.exec(i.context)};return this.local(e,o)},i.prototype.exportApply=function(t){var e=this;t.apply=function(t){return e.run(t)},t.compile=function(t){return e.compile(t)};var n={};t.BEMContext=this.contextConstructor,n.BEMContext=t.BEMContext;for(var i=0;i<this.oninit.length;i++){var o=this.oninit[i];o(t,n)}}},{"./class-builder":3,"./context":4,"./error":6,"./tree":9,"./utils":10,inherits:11}],8:[function(t,e,n){function i(t,e){this.template=t,this.key=e.key,this.value=e.value}function o(t,e){this.template=t,this.keys=e.key,this.value=e.value}function s(t,e){this.template=t,this.key=e.key}function r(t,e){this.template=t,this.body=e.body}function a(t){this.template=t,this.once=null}function u(t){this.template=t,this.wrap=null}function c(t,e){this.mode=t,this.predicates=new Array(e.predicates.length),this.body=e.body;for(var n=[],c=0,l=0;c<this.predicates.length;c++,l++){var d=e.predicates[c];d instanceof p?h.isArray(d.key)?this.predicates[l]=new o(this,d):this.predicates[l]=new i(this,d):d instanceof _?this.predicates[l]=new s(this,d):d instanceof g?this.predicates[l]=new r(this,d):d instanceof f?(l--,n.push(new a(this))):d instanceof m?(l--,n.push(new u(this))):l--}for(var c=0;c<n.length;c++,l++)this.predicates[l]=n[c];this.predicates.length!==l&&(this.predicates.length=l)}function l(t,e){this.entity=t,this.modeName=e,this.bemxjst=this.entity.bemxjst,this.templates=[],this.mask=[0],this.maskSize=0,this.maskOffset=0,this.count=0,this.depth=-1,this.thrownError=null}var h=t("./utils"),d=t("./tree"),p=d.PropertyMatch,f=d.OnceMatch,m=d.WrapMatch,_=d.PropertyAbsent,g=d.CustomMatch;i.prototype.exec=function(t){return t[this.key]===this.value},o.prototype.exec=function(t){for(var e=t,n=0;n<this.keys.length-1;n++)if(e=e[this.keys[n]],!e)return!1;return e[this.keys[n]]===this.value},s.prototype.exec=function(t){return!t[this.key]},r.prototype.exec=function(t){return this.body.call(t,t,t.ctx)},a.prototype.exec=function(t){var e=this.once!==t._onceRef;return this.once=t._onceRef,e},u.prototype.exec=function(t){var e=this.wrap!==t.ctx;return this.wrap=t.ctx,e},n.MatchTemplate=c,n.Match=l,l.prototype.clone=function(t){var e=new l(t,this.modeName);return e.templates=this.templates.slice(),e.mask=this.mask.slice(),e.maskSize=this.maskSize,e.count=this.count,e},l.prototype.prepend=function(t){for(this.templates=t.templates.concat(this.templates),this.count+=t.count;Math.ceil(this.count/31)>this.mask.length;)this.mask.push(0);this.maskSize=this.mask.length},l.prototype.push=function(t){this.templates.push(new c(this,t)),this.count++,Math.ceil(this.count/31)>this.mask.length&&this.mask.push(0),this.maskSize=this.mask.length},l.prototype.tryCatch=function(t,e){try{return t.call(e,e,e.ctx)}catch(n){this.thrownError=n}},l.prototype.exec=function(t){for(var e,n=this.checkDepth(),i=this.maskOffset,o=this.mask[i],s=1,r=0;r<this.count;r++){if(0===(o&s)){e=this.templates[r];for(var a=0;a<e.predicates.length;a++){var u=e.predicates[a];if(!u.exec(t))break}if(a===e.predicates.length)break}1073741824===s?(i++,o=this.mask[i],s=1):s<<=1}if(r===this.count)return t.ctx[this.modeName];var c=o,l=this.bemxjst.match;this.mask[i]|=s,this.bemxjst.match=this,this.thrownError=null;var h;h="function"==typeof e.body?this.tryCatch(e.body,t):e.body,this.mask[i]=c,this.bemxjst.match=l,this.restoreDepth(n);var d=this.thrownError;if(null!==d)throw this.thrownError=null,d;return h},l.prototype.checkDepth=function(){if(-1===this.depth)return this.depth=this.bemxjst.depth,-1;if(this.bemxjst.depth===this.depth)return this.depth;var t=this.depth;for(this.depth=this.bemxjst.depth,this.maskOffset+=this.maskSize;this.mask.length<this.maskOffset+this.maskSize;)this.mask.push(0);return t},l.prototype.restoreDepth=function(t){-1!==t&&t!==this.depth&&(this.maskOffset-=this.maskSize),this.depth=t}},{"./tree":9,"./utils":10}],9:[function(t,e,n){function i(t,e){this.predicates=t,this.body=e}function o(){}function s(t,e){this.conditions=[],this.children=[];for(var n=e.length-1;n>=0;n--){var i=e[n];i instanceof o?this.conditions.push(i):i===t.boundBody?this.children[n]=t.queue.pop():this.children[n]=i}}function r(){o.call(this)}function a(t){o.call(this),this.refs=t}function u(t){o.call(this),this.refs=t}function c(t){o.call(this),this.refs=t}function l(t){o.call(this),this.options=t}function h(t,e){o.call(this),this.key=t,this.value=e}function d(t){o.call(this),this.key=t}function p(t){o.call(this),this.body=t}function f(t){this.options=t,this.refs=this.options.refs,this.boundBody=this.body.bind(this);for(var e=this.methods("body"),n=0;n<e.length;n++){var i=e[n];this.boundBody[f.methods[n]]=i}this.queue=[],this.templates=[],this.initializers=[]}function m(t,e,n){var i=t[n],o=t.boundBody;return"body"!==e?"replace"===n||"extend"===n||"wrap"===n?function(){return i.apply(t,arguments)}:function(){return i.apply(t,arguments),o}:function(){var e=i.apply(t,arguments),s=t.queue.pop(),r=t.queue[t.queue.length-1];return r.conditions=r.conditions.concat(s.conditions),r.children=r.children.concat(s.children),"replace"===n||"extend"===n||"wrap"===n?e:o}}var _=t("minimalistic-assert"),g=t("inherits");n.Template=i,i.prototype.wrap=function(){for(var t=this.body,e=0;e<this.predicates.length;e++){var n=this.predicates[e];t=n.wrapBody(t)}this.body=t},i.prototype.clone=function(){return new i(this.predicates.slice(),this.body)},n.MatchBase=o,o.prototype.wrapBody=function(t){return t},g(r,o),n.OnceMatch=r,g(a,o),n.WrapMatch=a,a.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(u,o),n.ReplaceMatch=u,u.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},g(c,o),n.ExtendMatch=c,c.prototype.wrapBody=function(t){var e=this.refs.applyCtx,n=this.refs.local;return"function"!=typeof t?function(){for(var i={},o=Object.keys(t),s=0;s<o.length;s++)i["ctx."+o[s]]=t[o[s]];return n(i)(function(){return e(this.ctx)})}:function(){for(var i={},o=t.call(this),s=Object.keys(o),r=0;r<s.length;r++)i["ctx."+s[r]]=o[s[r]];return n(i)(function(){return e(this.ctx)})}},g(l,o),n.CompilerOptions=l,g(h,o),n.PropertyMatch=h,g(d,o),n.PropertyAbsent=d,g(p,o),n.CustomMatch=p,n.Tree=f,f.methods=["match","once","wrap","block","elem","mode","mod","elemMod","def","tag","attrs","cls","js","bem","mix","content","replace","extend","oninit","xjstOptions"],f.prototype.build=function(t,e){var n=this.methods("global").concat(e);return n[0]=this.match.bind(this),t.apply({},n),{templates:this.templates.slice().reverse(),oninit:this.initializers}},f.prototype.methods=function(t){for(var e=new Array(f.methods.length),n=0;n<e.length;n++){var i=f.methods[n];e[n]=m(this,t,i)}return e},f.prototype.flush=function(t,e){var n;n=e.conditions?t.concat(e.conditions):e.conditions;for(var o=0;o<e.children.length;o++){var r=e.children[o];if(r instanceof s)this.flush(n,e.children[o]);else{var a=new i(t,r);a.wrap(),this.templates.push(a)}}},f.prototype.body=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new s(this,t);return this.queue[this.queue.length-1].children.push(n),1===this.queue.length&&this.flush([],this.queue.shift()),this.boundBody},f.prototype.match=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++){var n=arguments[e];"function"==typeof n&&(n=new p(n)),_(n instanceof o,"Wrong .match() argument"),t[e]=n}return this.queue.push(new s(this,t)),this.boundBody},f.prototype.once=function(){if(arguments.length)throw new Error("Predicate once() should not have arguments");return this.match(new r)},f.prototype.applyMode=function(t,e){if(t.length)throw new Error("Predicate should not have arguments but "+JSON.stringify(t)+" passed");return this.mode(e)},f.prototype.wrap=function(){return this.def.apply(this,arguments).match(new a(this.refs))},f.prototype.xjstOptions=function(t){return this.queue.push(new s(this,[new l(t)])),this.boundBody},f.prototype.block=function(t){return this.match(new h("block",t))},f.prototype.elem=function(t){return this.match(new h("elem",t))},f.prototype.mode=function(t){return this.match(new h("_mode",t))},f.prototype.mod=function(t,e){return this.match(new h(["mods",t],e))},f.prototype.elemMod=function(t,e){return this.match(new h(["elemMods",t],e))},f.prototype.def=function(){return this.applyMode(arguments,"default")},f.prototype.tag=function(){return this.applyMode(arguments,"tag")},f.prototype.attrs=function(){return this.applyMode(arguments,"attrs")},f.prototype.cls=function(){return this.applyMode(arguments,"cls")},f.prototype.js=function(){return this.applyMode(arguments,"js")},f.prototype.bem=function(){return this.applyMode(arguments,"bem")},f.prototype.mix=function(){return this.applyMode(arguments,"mix")},f.prototype.content=function(){return this.applyMode(arguments,"content")},f.prototype.replace=function(){return this.def.apply(this,arguments).match(new u(this.refs))},f.prototype.extend=function(){return this.def.apply(this,arguments).match(new c(this.refs))},f.prototype.oninit=function(t){this.initializers.push(t)}},{inherits:11,"minimalistic-assert":12}],10:[function(t,e,n){function i(){return c+ ++r}var o=Object.prototype.toString;n.isArray=Array.isArray,n.isArray||(n.isArray=function(t){return"[object Array]"===o.call(t)}),n.xmlEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},n.attrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")},n.jsAttrEscape=function(t){return(t+"").replace(/&/g,"&amp;").replace(/'/g,"&#39;")},n.extend=function(t,e){if(!t||!e)return t||e;var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i};var s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};n.isShortTag=function(t){return s.hasOwnProperty(t)},n.isSimple=function l(t){return t&&t!==!0&&(t.block||t.elem||t.tag||t.cls||t.attrs||!t.hasOwnProperty("html")||!l(t.html))?"string"==typeof t||"number"==typeof t:!0};var r=0,a=+new Date,u="__"+a,c="uniq"+a;n.getUniq=i,n.identify=function(t,e){if(!t)return i();if(e||t[u])return t[u];var n=i();return t[u]=n,n}},{}],11:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],12:[function(t,e,n){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=i,i.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}]},{},[2])(2)}),e.exports||n.BEMHTML}({},{}),o=new i({});return o.compile(function(t,n,i,o,s,r,a,u,c,l,h,d,p,f,m,_,g,v,b,y,w,k,x,E){b(function(){!function(t,e){if(!e.I18N){t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){}}}(this,"undefined"==typeof BEM?{}:BEM)}),b(function(t){var e=t.BEMContext.prototype,n=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);n._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},n.makePublic=function(t,i){return"object"==typeof t?void(n._public=e.extend(n._public,t)):("undefined"==typeof i&&(i=!0),void(n._public[t]=i))},n.isPublic=function(t){return Boolean(n._public[t])},n.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,i=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":e;n.tld=t,n["content-region"]=t,n["click-host"]="//clck."+i,n["passport-host"]="https://passport."+i,n["pass-host"]="https://pass."+e,n["social-host"]="https://social."+e,n["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},n)},restore:function(){var t;for(t in n)delete n[t];for(t in this._backup)n[t]=this._backup[t]}}}),o("i-global")(l()(""),c()(function(){var t=this.ctx.params||{},e=this["i-global"];this._iGlobalBackup.exists()?this.ctx.reset!==!1&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld);for(var n in t)e[n]=t[n];return""})),o("i-ua")(f()(!1),l()("script"),h()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),_()(function(){return[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("")})),o("i-ua").content()(function(){var t=x();return t+=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("")}),o("i-ua").content()(function(){var t=x();return t+=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("")}),b(function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"":t}}),o("input")(l()("span"),r("live")(!1),r("getLive")(function(){var t=E("live"),e=this.ctx.js,n=this.ctx.mods,i={autofocus:"yes",width:"content","tap-ahead":"yes"};if(e){if(e.autoFocus&&e.live)throw new Error('input block can\'t have both "live" and "autoFocus" enabled');void 0!==e.live&&(t=e.live);var o=Object.keys(i).some(function(t){return n[t]===i[t]});(o||e.autoFocus)&&(t=!1)}return t}),p()(function(){return{live:this._live}}),c()(function(){var t,e=E("value",{ctx:this.ctx.value}),n=this.ctx.id||this.generateId(),i=this.ctx.mods||{},o=E("getLive",{}),s=this.ctx.placeholder;return i.theme=i.theme||"normal",this.ctx.hasOwnProperty("placeholder")&&(t=this.isSimple(s)?s:this.reapply(s)),x({_inputId:n,_labelId:"label"+n,_hintId:"hint"+n,_name:this.ctx.name||"",_value:e,_inputLink:!0,_iconLeft:this.ctx.icon||this.ctx.iconLeft,_iconRight:this.ctx.iconRight,_disabled:this.mods&&this.mods.disabled,_live:o,_placeholder:t,"ctx.mods":i})}),r("value")("",t(function(){return this.ctx})(function(){return this.reapply(this.ctx)}),t(function(){return this.isSimple(this.ctx)})(function(){return this.ctx}))),o("input").elem("box")(l()("span"),_()(function(){return[this._iconLeft&&{elem:"icon",icon:this._iconLeft,elemMods:{side:"left"}},this._iconRight&&{elem:"icon",icon:this._iconRight,elemMods:{side:"right"}},!this.mods.clear&&{elem:"clear",elemMods:this._value?{visibility:"visible"}:void 0,content:"&nbsp;"},this.ctx.content].filter(Boolean)})),o("input").elem("control")(l()("input"),h()(function(){var t=this.extend({id:this._inputId,name:this._name,placeholder:this._placeholder},this.ctx.controlAttrs);return(this._value||0===this._value)&&(t.value=this._value),this.mods.disabled&&(t.disabled="disabled"),this._live&&(t.autocomplete="off"),t["aria-labelledby"]=this._labelId+" "+this._hintId,t}),i()(function(){return[this._placeholder?{elem:"hint",elemMods:{fallback:"yes"},content:this._placeholder}:"",{elem:"box",content:this.ctx}]})),o("input").elem("clear")(l()("span"),h()(function(){return{unselectable:"on"}}),_().match(function(){return!this.ctx.content})("")),o("input").elem("hint")(l()("label"),h()(function(){return{id:this._hintId,"for":this._inputId,"aria-hidden":"true"}}),c()(function(){return this._iconLeft&&(this.elemMods.lpad="yes"),this._iconRight&&(this.elemMods.rpad="yes"),this._value||0===this._value||(this.elemMods.visibility="visible"),x()})),b(function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})}),b(function(t){function e(t){return"[object Object]"===o.call(t)}function n(t,i,o){var s,r;t=Object(t),i=Object(i);for(s in i)r=o&&o(t[s],i[s],s),void 0!==r?t[s]=r:e(t[s])&&e(i[s])?t[s]=n(t[s],i[s],o):t[s]=i[s];return t}function i(t,e){return n(t,e,function(t,e,n){return"mix"===n?[].concat(t,e):void 0})}var o=Object.prototype.toString;t.BEMContext.prototype.util.merge=n,t.BEMContext.prototype.util.mergeBemjson=i}),o("link")(c()(function(){var t=this.mods;return t.theme||this.ctx.notheme||(t.theme=t.outer&&"outer"||t.pseudo&&"pseudo"||"normal"),void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),x()}),l()(function(){return void 0!==this.ctx.url?"a":"span"}),p()(function(){return{_tabindex:this.ctx.tabindex,origTabindex:this.ctx.tabindex}}),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,i=n?String(e.rel):"";return i&&-1===i.indexOf("noopener")&&(e.rel=i+" noopener"),this.extend(x(),{rel:"noopener"})}),h()(function(){var t=this.ctx,e=t.url,n=void 0!==e,i=Boolean(this.mods.disabled);return this.extend(x(),{id:t.id,name:t.name,title:t.title,target:t.target,tabindex:i?void 0:t.tabindex,href:n?this.isSimple(e)?e:this.reapply(e):void 0,role:n?void 0:"button","aria-disabled":i?"true":void 0})}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx,e=Boolean(t.text),n=Boolean(t.icon);return[n&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon"}},t.icon),e&&(this.isSimple(t.text)?n?{elem:"inner",content:this.xmlEscape(t.text)}:this.xmlEscape(t.text):t.text.block?this.util.mergeBemjson({mix:{block:"link",elem:"inner"}},t.text):this.extend({block:"link",elem:"inner"},t.text))]}),s("inner").tag()("span")),o("popup")(c().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var n=t.attrs||(t.attrs={});n.style=(n.style||"")+";z-index:"+t.zIndex+";"}return E("default",{_popupDefaults:!0})}),_()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),o("suggest2")(s("items").tag()("ul")),o("i-bem").elem("i18n").def()(function(){if(!this.ctx)return"";var t=this.ctx,e=t.keyset,n=t.key,i=t.params||{};return e||n?(t.content&&(i.content=this.reapply(t.content)),k(BEM.I18N(e,n,i))):""}),o("suggest2-item")(l()("li"),p()(!0),s("text")(l()(function(){return this.ctx.tag||"span"}),_()(function(){return Array.isArray(this.ctx.content)?this.ctx.content.map(function(t){return"string"==typeof t?this.xmlEscape(t):t},this):this.xmlEscape(this.ctx.content)})),s("fact").tag()("span")),o("suggest2").mod("theme","normal").elem("content").tag()("ul"),o("suggest2-item").elem("highlight")(l()("b"),f()(!1),_()(function(){return this.xmlEscape(this.ctx.content)})),o("suggest2-item").elem("icon")(c()(function(){var t=BEM.blocks["suggest2-detect"]&&BEM.blocks["suggest2-detect"].isSupportInlineSVG()?"svg":"png";this.ctx.autoType&&(this.ctx[t]="//yastatic.net/suggest-flag-icons/icon."+this.ctx.autoType+t);var e=this.ctx.png&&this.ctx.svg?this.ctx[t]:this.ctx.svg||this.ctx.png;return e&&(this.ctx.attrs=this.extend(Object(this.ctx.attrs),{style:'background-image:url("'+e+'");'+(Object(this.ctx.attrs).style||"")})),x()}),l()("span")),o("suggest2-item").elem("icon").match(function(){return this.elemMods.traffic}).def()(function(){return x({"ctx.autoType":"traffic."+this.elemMods.traffic+"."})}),o("suggest2-item").elem("icon").match(function(){return this.elemMods.weather}).def()(function(){var t=this.elemMods.weather.replace("-","minus-").replace("+","plus-").replace(/_/g,"-");return x({"ctx.autoType":"weather."+t+".","elemMods.weather":t})}),o("suggest2-item").elem("link")(l()("a"),h()(function(){return{href:this.ctx.url,target:this.ctx.target}})),o("suggest2-item").elem("fact")(t(function(){return this.ctx.color}).def()(function(){return this.ctx.attrs=this.extend(Object(this.ctx.attrs),{style:";color:"+this.ctx.color+";"+(Object(this.ctx.attrs).style||"")}),x()}),_()(function(){return[{block:"suggest2",elem:"a11y",content:BEM.I18N("suggest2-item","quick-answer")+": "},{html:this.xmlEscape(this.ctx.content)}]})),o("suggest2").elem("a11y").tag()("span"),o("suggest2-item").elem("bullet")(l()("span"),h()({"aria-hidden":!0})),o("suggest2-item").mod("interact","link")(_()(function(){return{elem:"link",url:this.ctx.url,target:this.ctx.target||"_blank",content:this.ctx.content}}),t(function(){return"nav"===this.mods.type||"icon"===this.mods.type}).elem("text").mix()({mods:{type:"url"}})),o("suggest2-item").mod("type","nav").elem("fact").content()(function(){return this.xmlEscape(this.ctx.content)}),o("image")(l()("img"),h()(function(){var t,e=this.ctx,n={src:"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""},i=["alt","width","height"];for(e.url&&(n.src=e.url);t=i.shift();)e[t]&&(n[t]=e[t]);return n})),o("button")(c()(function(){return x()}),l()("button"),t(function(){return this.ctx.url}).tag()("a"),p()(!0),c()(function(){return this.mods.hasOwnProperty("theme")||(this.mods.theme="normal"),x()}),h()(t(function(){return!0})(function(){var t=this.ctx,e={};return e.tabindex=t.tabindex,e}),t(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,n=x(),i={href:t.url,target:t.target},o=void 0!==Object(e).rel,s=o?String(e.rel):"",r="_blank"===i.target;return r&&(i.rel="noopener",s&&-1===s.indexOf("noopener")&&(e.rel=s+" noopener")),this.extend(n,i)}),t(function(){return!this.ctx.url})(function(){var t=this.ctx,e=x(),n={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,n)})),_()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),o("button").mod("disabled","yes").attrs()(function(){var t=this.ctx,e={};return t.url?e["aria-disabled"]="true":e.disabled="disabled",this.extend(x(),e)}),o("user")(c()(function(){var t=this.ctx.js||{},e=t.uid||this.ctx.uid||this["i-global"].uid,n=this.ctx.login,i=n||this["i-global"].login||(this["i-global"].displayName||{}).name;return x({_uid:e,_login:n,_hasDisplayName:i})}),l()("a"),p()(function(){return this.extend({uid:this._uid,login:this._login||this["i-global"].login},x())}),h()(function(){var t=this["i-global"],e=this._login||t.login,n=e&&/^uid-/.test(e),i={href:n?t["social-host"]:t["passport-host"]+"/passport?mode=passport"},o=this.ctx.counter||(this.ctx.counters||{}).user;return o&&(i.onmousedown=o),i}),_()(function(){return this._hasDisplayName?[this.ctx.content]:{elem:"enter"}})),o("user")(s("enter").def()(function(){var t=BEM.I18N("user","enter");return k([{block:"button",mods:{pseudo:"yes",size:"m"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:t,"aria-label":t},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}])}),s("enter-label")(l()("span"),h()(function(){return{"aria-hidden":"true"}}),_()(function(){return BEM.I18N("user","enter")}))),o("button").mod("pseudo","yes").def()(function(){return this.mods.theme||(this.mods.theme="pseudo"),x()}),o("domik")(c().match(function(){return!Object(this.ctx.mods).logo})(function(){var t;return this.ctx.lang?t=this.ctx.lang:BEM.blocks&&BEM.blocks["i-global"]?t=BEM.blocks["i-global"].param("lang"):this["i-global"]&&(t=this["i-global"].lang),this.mods.logo=-1!==["en","tr"].indexOf(t)?"en":"ru",x()}),_()(function(){return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:this.ctx.content}]}),s("roof-border").tag()("i"),s("roof-body").tag()("i"),s("logo").tag()("i")),o("auth")(c()(function(){var t=this.ctx,e=function(t,e){return t?BEM.blocks["i-global"].param(e):this["i-global"][e]}.bind(this,BEM&&BEM.blocks);return void 0===t.retpath&&(t.retpath=e("retpath")),void 0===t.from&&(t.from=e("passport-msg")),x({_passportHost:e("passport-host")})}),l()("form"),p()(!0),h()(function(){return{method:"post",action:this.ctx.url||this._passportHost+"/auth",role:"form","aria-label":BEM.I18N("auth","auth")}}),r("auto-content")([]),_()(function(){var t=this.ctx;return[t.content||E("auto-content"),["retpath","from","origin","timestamp"].map(function(e){return{elem:"hidden",mix:{elem:e},name:e,val:t[e]}})]})),o("auth").elem("hidden")(l()("input"),h()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.val}})),o("popup").elem("tail").tag()("i"),o("domik").mod("type","hidden")(p()(!1),c()(function(){return k({block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]})})),o("auth").mod("content","auto")(r("auto-content")([{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]),s("username").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]}}),s("password").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]}}),s("haunter").content()(function(){return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:BEM.I18N("auth","temporary")}}),s("button").content()(function(){return{block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:BEM.I18N("auth","logon")}}),s("remember").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/restoration",text:BEM.I18N("auth","remember")}}),s("register").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/registration",text:BEM.I18N("auth","register")}})),o("auth").elem("social").attrs()(function(){return{role:"group","aria-label":BEM.I18N("auth","social-log-in")}}),o("dropdown")(p()(!0),m()(function(){return[{mods:{action:"closed"}}]}),s("popup").def()(function(){var t=this.ctx,e=[{block:"dropdown",elem:"popup"}];return t.mix&&(e=e.concat(t.mix)),k({block:"popup",mix:e,mods:t.mods,underMods:t.underMods,attrs:t.attrs,js:t.js,content:[{elem:"tail"},{elem:"content",content:t.content}]})})),o("checkbox")(c()(function(){var t=this.ctx;return this.mods.theme||(this.mods.theme="normal"),t.checkboxAttrs=this.extend({id:this.generateId(),checked:this.mods.checked?"checked":void 0,disabled:this.mods.disabled?"disabled":void 0},t.checkboxAttrs),t.checkboxAttrs["aria-labelledby"]="label"+t.checkboxAttrs.id,x({_labelAttrs:{id:t.checkboxAttrs["aria-labelledby"],"for":t.checkboxAttrs.id}})}),l()("span"),p()(function(){return this.extend({live:!1},this.ctx.js)}),t(function(){return void 0!==this.ctx.content}).content()(function(){return[{elem:"box",tag:"span",elemMods:this.mods.checked?{checked:"yes"}:"",content:[{elem:"control",attrs:this.ctx.checkboxAttrs},{elem:"tick",tag:"i"}]},this.ctx.content]}),t(function(){return void 0===this.ctx.content}).content()(function(){return[this.util.merge({elem:"box",tag:"span",elemMods:this.mods.checked?{checked:"yes"}:"",content:[this.util.merge({elem:"control",attrs:this.ctx.checkboxAttrs},this.ctx.control),{elem:"tick",tag:"i"}]},this.ctx.box),void 0!==this.ctx.text&&this.util.merge({elem:"label"},this.isSimple(this.ctx.text)?{content:this.xmlEscape(this.ctx.text)}:this.ctx.text)].filter(Boolean)})),o("checkbox").elem("control")(l()("input"),h()(function(){return{type:"checkbox",autocomplete:"off"}})),o("checkbox").elem("label")(l()("label"),h()(function(){return this.extend({"aria-hidden":"true"},this._labelAttrs)})),o("button2")(c()(function(){return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),x()}),t(function(){return void 0===this.ctx.tag}).tag()("button"),p()(function(){return{_tabindex:this.ctx.tabindex}}),h()(function(){var t=this.ctx,e=Boolean(this.mods.disabled);return{type:"button",autocomplete:"off",id:t.id,title:t.title,name:t.name,value:t.val,tabindex:e?void 0:t.tabindex,disabled:e?"disabled":void 0,"aria-disabled":e?"true":void 0}}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx;return[t.icon&&{elem:"icon",icon:t.icon},t.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:t.iconLeft},t.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:t.iconRight},void 0!==t.text&&(this.isSimple(t.text)?{elem:"text",content:this.xmlEscape(t.text)}:this.extend(t.text,{elem:"text"}))].filter(Boolean)})),o("button2").elem("text").tag()("span"),o("button2").mod("type","submit").attrs()(function(){return this.extend(x(),{type:"submit"})}),o("button2").mod("type","link")(c()(function(){return x()}),l()("a"),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx,e=t.attrs,n=void 0!==Object(e).rel,i=n?String(e.rel):"";return i&&-1===i.indexOf("noopener")&&(e.rel=i+" noopener"),this.extend(x(),{rel:"noopener"})}),h()(function(){return this.extend(x(),{target:this.ctx.target,href:this.mods.disabled?void 0:this.ctx.url,autocomplete:void 0,type:void 0})}),p()(function(){return this.extend(x(),{_url:this.mods.disabled?this.ctx.url:void 0})})),o("domik").mod("type","popup").attrs()(function(){var t=x()||{};return t.role="dialog",t}),b(function(t){var e=t["i-services"]=t.BEMContext.prototype["i-services"]={},n=t["i-global"];e.serviceName=function(t){return BEM.I18N("i-services",t||n.id)},e.serviceUrl=function(t,i){var o=n;return t||(t=o.id),i||(i=o["content-region"]),e._data[t](i)}}),o("i-services").def()(s("name")(function(){return k(this["i-services"].serviceName(this.ctx.id))}),s("url")(function(){return k(this["i-services"].serviceUrl(this.ctx.id,this.ctx.region))})),b(function(t){t["i-services"]._data={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//www.yandex.ua/all";case"by":return"//www.yandex.by/all";case"kz":return"//www.yandex.kz/all";case"com":return"//www.yandex.com/all";case"tr":return"//www.yandex.com.tr/all";default:return"//www.yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru";
},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(t){switch(t){case"ua":return"https://auto.ru";default:return"https://auto.ru"}},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},collection:function(){return"https://collection.yandex.ru"},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";default:return"https://direct.yandex.ru"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://maps.yandex.ua";case"com":return"https://maps.yandex.com";case"tr":return"https://harita.yandex.com.tr";default:return"https://maps.yandex.ru"}},"maps-com":function(){return"https://maps.yandex.com"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";case"tr":return"https://market.yandex.com.tr";default:return"https://market.yandex.ru"}},"market.advertising":function(){return"https://welcome.advertising.yandex.ru/market/"},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://sprav.yandex.ua";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},taxi:function(){return"https://taxi.yandex.ru"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://tune.yandex.ua";case"by":return"https://tune.yandex.by";case"kz":return"https://tune.yandex.kz";case"com":return"https://tune.yandex.com";case"tr":return"https://tune.yandex.com.tr";default:return"https://tune.yandex.ru"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"http://yandex.ua/video/";case"by":return"http://yandex.by/video/";case"kz":return"http://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"http://yandex.com.tr/video/";default:return"http://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://www.yandex.ua";case"by":return"https://www.yandex.by";case"kz":return"https://www.yandex.kz";case"com":return"https://www.yandex.com";case"tr":return"https://www.yandex.com.tr";default:return"https://www.yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"}}}),o("user").mod("menu","yes")(h()(function(){var t=x()||{};return t.role="button",t.tabindex=0,t["aria-haspopup"]="true",t["aria-expanded"]="false",t}),r("exit-url")(function(){var t=this["i-global"],e="/passport?mode=";return e+="logout&yu="+(t.yandexuid||""),t.retpath&&(e+="&retpath="+encodeURIComponent(t.retpath)),t["passport-host"]+e}),r("user-menu")(function(){var t=E("exit-url"),e=this.ctx.counters||{};return[{elem:"item",type:"mail",content:{block:"link",mods:e.mail?{counter:"yes"}:{},url:this["i-services"].serviceUrl("mail"),counter:e.mail,content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:{caller:this.ctx.mailCallerId}}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0,e=t?t+" ":"";return e+BEM.I18N("user","letter",{count:t})}.call(this)}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:e.write?{counter:"yes"}:{},content:BEM.I18N("user","letter_compose"),url:this["i-services"].serviceUrl("mail")+"/compose",counter:e.write}},{elem:"item",type:"disk",content:{block:"link",url:this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:e.settings?{counter:"yes"}:{},content:BEM.I18N("user","tune"),url:this["i-services"].serviceUrl("tune"),counter:e.settings}},{elem:"item",type:"passport",content:{block:"link",mods:e.passport?{counter:"yes"}:{},content:BEM.I18N("user","passport"),url:this["i-services"].serviceUrl("passport"),counter:e.passport}},{elem:"item",type:"logout",content:{block:"link",mods:e.logout?{counter:"yes"}:{},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:t,counter:e.logout}}]}),t(function(){return this["i-global"].login}).wrap()(function(){var t=E("user-menu");return{block:"dropdown-menu",mods:{user:"yes"},content:[this.ctx,{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:t}]}})),o("b-menu-vert")(_()(function(){return[this.ctx.title,{elem:"layout",content:this.ctx.content}]}),s("layout").tag()("ul"),s("item").match(function(){return!this._inItemContent}).wrap()(function(){return this.position--,{elem:"layout-unit",content:[this.ctx,this.ctx["item-content"]]}}),s("item-content").def()(function(){return x({_inItemContent:!0})}),s("layout-unit")(l()("li"),m()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t})),s("item-selector").tag()("span"),s("submenu").tag()("ul")),o("dropdown-menu")(p()(!0),c()(function(){var t=this.mods;return t.size||(t.size="m"),t.theme||(t.theme="ffffff"),this.dropdownMenuSize=t.size,this._inDropdownMenu=!0,x()})),o("dropdown-menu").elem("popup").def()(function(){var t=this.ctx;return k({block:"dropdown",elem:"popup",js:this.ctx.js,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:this.extend({size:this.dropdownMenuSize},this.elemMods)}),attrs:t.attrs,content:{block:"dropdown-menu",elem:"menu",title:t.menuTitle,type:t.type,elemMods:t.menuMods,mix:t.menuMix,content:t.content}})}),o("dropdown-menu").elem("menu").def()(function(){var t=this.ctx,e=t.type||"vert",n=this.elemMods;return n.theme||(n.theme="ffffff"),k({block:"b-menu-"+e,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:n}),title:t.title,content:t.content})}),o("b-menu-vert").match(function(){return this._inDropdownMenu})(h()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),o("b-menu-horiz").match(function(){return this._inDropdownMenu})(h()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),o("b-menu-horiz")(p()(!0),s("item").wrap()(function(){return this.position--,{elem:"layout-unit",content:this.ctx}}),s("layout-unit").mix()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t}),s("item-selector").tag()("span")),o("user-menu-update").js()(!0),o("user").elem("name")(l()("span"),c()(function(){var t=this.ctx,e=this["i-global"],n=t.content||t.login||this._login||(e.displayName||{}).name,i=!1;return n||(/^uid-/.test(e.login)?(n="",i=!0):n=e.login),x({_maxLength:void 0!==t.maxLength?t.maxLength:16,_maxLengthRelative:void 0!==t.maxLengthRelative?t.maxLengthRelative:3,_userName:n,_isUglyUserName:t.isUglyUserName||i})}),r("pre-content")(function(){var t=this.ctx;return[{elem:"first-letter",tag:"span",content:t.charAt(0)},t.slice(1)]}),_()(function(){return E("pre-content",{ctx:this.xmlEscape(this.cleverSubstring(this._userName,this._maxLength,this._maxLengthRelative))})}),p()(function(){return{maxLength:this._maxLength,maxLengthRelative:this._maxLengthRelative,isUglyUserName:this._isUglyUserName}})),o("popup").mod("has-close","yes").content()(function(){return[x(),{elem:"close"}]}),o("popup").elem("close").tag()("i"),o("popup").mod("wrapped","yes").content()(function(){return[x(),{elem:"wrapper",elemMods:this.ctx.wrapperMods}]}),o("popup").mod("behaviour","scrollable").def()(function(){return this.mods.wrapped="yes",this.mods["body-scroll"]="no",this.ctx.wrapperMods={behaviour:"scrollable"},x()}),b(function(t,n){var i=t.BEMContext||n.BEMContext;i.prototype.require=function(t){return e[t]}})}),o.exportApply(n),n}var n=!0;"object"==typeof module&&"object"==typeof module.exports&&(exports.BEMHTML=e({}),n=!1),"object"==typeof modules&&(modules.define("BEMHTML",[],function(t){t(e({}))}),n=!1),n&&(BEMHTML=e({}),t.BEMHTML=BEMHTML)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this),home.lang={rates:{newalt:{ceni:"%s:  ",index:"%s:  ",korz:" ",kurs:"%s:  "}},spok_yes:{month_accus:{1:"",10:"",11:"",12:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""}},"time-alert":{date_format_long:"%day %month %year ",date_format_short:"%day %month"}},function(){function execView(t,e,n){function i(t,e){var n=t instanceof Function?t:templates[t],s="";return n&&(s=n.cached?n(o,i):n(e,o,i)),s}var o=n||e||{};for(var s in contextDefaults)o.hasOwnProperty(s)||(o[s]=contextDefaults[s]);return i(t,e)}function views(t,e){if(e){var n=templates[t];e instanceof Function?templates[t]=e:templates[t]=home.templateGenerator(e,t),n&&(templates[t].base=n)}}!function(){"use strict";home.templateRe=/([\s\S]*?)\[%\s+(.+?)\s+%\]/g,home.parseRules={l10n:function(t,e,n){return e.l10n||home.error("Can't proccess 'l10n:"+n+"', check context of template"),e.l10n&&e.l10n(n)},baseViews:function(t,e,n){return e.baseViews(n,t)},bem:function(t,e,n){n=n.split("."),t=t||{};var i=n.pop(),o=n.pop(),s=n.pop();switch(i){case"class":return home.getBEMClassname(o,(s?t[s]:t)||{});case"js":return home.getBEMParams(t[o||"js"]||{});case"attrs":return home.getAttributes(t[o||"attrs"])}}};var encode=function(t){return t.replace(/(["\\])/g,"\\$&").replace(/\n/g,"\\n")},getPropAccessor=function(t){return/^[a-zA-Z_$][\w$]*$/.test(t)?"."+t:'["'+t+'"]'},stringRule=function(t){return'"'+encode(t.contents)+'"'},parsedRule=function(t){return"home.parseRules"+getPropAccessor(t.name)+'(data,req,"'+t.expr+'")'},subCallRule=function(t){var e=t.prefix,n=t.key;if("exec"===e)return'(q=execView("'+n+'",data),q!==u?q:"")';if(e&&"data"!==e&&"req"!==e)throw new TypeError('Unknown builtin prefix "'+e+'"');if(-1===n.indexOf(".")){var i=getPropAccessor(n);return e?"("+e+i+"!==u?"+e+i+':"")':"(data"+i+"!==u?data"+i+":req"+i+"!==u?req"+i+':(q=execView("'+n+'",data),q!==u?q:""))'}return e||(e="data"),n=n.split("."),"(q="+e+getPropAccessor(n.shift())+",q"+n.map(function(t){return"&&(q=q"+getPropAccessor(t)+")"}).join("")+',q!==u?q:"")'},rules={};rules.string=stringRule,rules.parsed=parsedRule,rules.subCall=subCallRule;var createTemplateFunction=function(statements,name){var items=[];return name=name&&name.replace(/\-/g,"_")||"viewTemplate",statements.forEach(function(t){var e=rules[t.type](t);e&&items.push(e)}),eval("0,function "+name+"(data,req,execView){var q,u;return "+items.join("+")+";}")};home.templateGenerator=function(t,e){var n=[],i={data:!0,req:!0,exec:!0},o=t.replace(home.templateRe,function(t,e,o){if(e&&n.push({type:"string",contents:e}),o){var s=o.replace(/\s/g,"").split(":");s.length>1&&!(s[0]in i)?n.push({type:"parsed",name:s[0],expr:s[1]}):n.push({type:"subCall",prefix:s.length>1?s[0]:"",key:s.length>1?s[1]:s[0]})}return""});return o&&n.push({type:"string",contents:o}),createTemplateFunction(n,e)}}();var templates=home.view?Object.create(home.view.templates):{},contextDefaults={l10n:home.l10n,stat:{logShow:function(){},getAttr:function(t){return t?' data-statlog="'+t+'"':""},getAdaptiveCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':"")+' data-statlog-autoshow="1"':""},getClientCounter:function(t,e){return t?' data-statlog="'+t+'"'+(e?' data-statlog-redir="0"':""):""}},settingsJs:{add:function(t,e,n){home["export"][n]||(home["export"][n]={}),home["export"][n][t]=e}},beget:function(t){return x.beget(this,t)}};views.cached=function(t,e){e&&(views(t,e),templates[t].cached=!0)},home.view=execView,home.view.templates=templates,home.view.define=views,views("promo-curtain__message",'<div class="promo-curtain__message" style="top:[% data:offset.top %]px"><div class="promo-curtain__arrow" style="left:[% data:offset.left %]px"></div><div class="promo-curtain__header">[% data:langs.header %]</div><div class="promo-curtain__line">[% data:langs.line1 %]</div><div class="promo-curtain__line">[% data:langs.line2 %]</div></div>'),views("promo-curtain__layout",'<div class="[% bem:promo-curtain.class %]"><div class="promo-curtain__agreement-text">[% data:langs.agreement %]</div></div>'),views("b-time-banner__text",function(t){var e="";return e+='<span class="b-time-banner__text">',e+=t.text.replace("%local_date","<b>("+t.now+")</b>").replace("%current_date","<b>("+t.timestamp+")</b>")+(t.helpQuery?" "+t.helpQuery:""),e+="</span>"}),views("b-time-banner__inner",function(t,e,n){var i=n("b-time-banner__text",t);return t.helpUrl?n("link",{content:i,stat:e.stat.getAdaptiveCounter("wrong_date."+t.type+".url"),href:t.helpUrl,mod:"b-time-banner__link"}):i}),views("link",function(t,e,n){var i={};return t.mod=t.mod?["link",t.mod.trim()].join(" "):"link",t.title&&(i.title=t.title),t.target&&(i.target=t.target),t.attrs=(t.attrs||"")+home.getAttributes(i),n("link__tmpl",t)}),views("link__tmpl",'<a href="[% data:href %]" class="[% data:mod %]"[% data:attrs %][% data:stat %][% data:link__target %][% data:link__title %]>[% link__icon %][% data:content %]</a>'),views("datetime__date",'<span class="datetime__date"><span class="datetime__day">[% day %] </span><span class="datetime__month">[% month %], </span><span class="datetime__wday">[% wday %] </span></span>'),views("inline-stocks__head",function(t){if(!t.col2&&!t.col4)return"";for(var e=[t.col2,t.col4],n="",i=0;i<e.length;i++)e[i]&&(n+='<th class="inline-stocks__cell" colspan="2">'+e[i]+"</th>");return'<tr class="inline-stocks__head">'+n+"</tr>"}),views("inline-stocks__t-title",function(t,e,n){var i,o;switch(t.type){case"currency":i="",o="";break;case"cash":i="",o=""}return n("inline-stocks__head",{col2:i,col4:o})}),views("inline-stocks__date",function(t){var e=t.datetime||t.time||t.date;return e?'<td><i class="inline-stocks__cell_datetime">'+e+"</i></td>":""}),views("inline-stocks__delta",function(t,e){var n,i=t.data;return t.klimit&&(n="     %d%%".replace(/%d%(%)/,t.klimit+"$1")),i.delta?'<td><i class="inline-stocks__cell inline-stocks__cell_type_delta inline-stocks__cell_delta_'+(i.is_hot?"hot":"small text_gray_yes")+'"'+(n&&i.is_hot?' title="'+n+'"':"")+' aria-hidden="true">'+i.delta+'</i><span class="a11y-hidden">'+String(i.delta).replace("","-")+"</span></td>":""}),views("inline-stocks__rows-by-type",function(t,e,n){var i=t.klimit;switch(t.type){case"cash":return t.rows.map(function(t){return n("inline-stocks__val",t)}).join("");case"currency":return t.rows.map(function(t,e){return(e?n("inline-stocks__delta",{data:t,klimit:i}):"")+n("inline-stocks__val",t)}).join("");case"indexes":var o=t.rows[0];return n("inline-stocks__date",o)+n("inline-stocks__delta",{data:o,klimit:i})+n("inline-stocks__val",o)}}),views("inline-stocks__replaceCaps",function(t){return t.text.replace(/<(\w)>([^<]+)<\/\1>/g,function(t,e,n){switch(e){case"c":return'<span class="inline-stocks__caps">'+n+"</span>";case"d":return'<span class="inline-stocks__numbers">'+n+"</span>";default:return t}})}),views("inline-stocks__block-content",function(t,e,n){for(var i="",o=t.rows,s=0,r=o.length;r>s;s++){var a=o[s],u=e.l10n("rates.newalt."+a.alt).replace(/%s/,a.text);i+='<tr class="inline-stocks__row_id_'+a.id+'" data-klimit="'+a.klimit+'"><td class="inline-stocks__row-title">'+n("home-link",{href:!e.nolinks&&a.href,mix:"home-link_blue_yes",attrs:{title:u,"data-statlog":"news_rates_manual.popup."+a.id},content:n("inline-stocks__replaceCaps",{text:a.text_caps})})+(a.nscale?'<span class="inline-stocks__row-nscale">'+a.nscale+"</span>":"")+"</td>"+n("inline-stocks__rows-by-type",{type:t.type,rows:a.data,klimit:a.klimit})+"</tr>"}return'<h2 class="inline-stocks__table-title">'+t.text+'</h2><table class="inline-stocks__table inline-stocks__table_type_'+t.type+" inline-stocks__table_id_"+t.i+'">'+n("inline-stocks__t-title",t)+i+"</table>"}),views("inline-stocks__grid",function(t){var e,n=t.data,i=n.length/2,o="",s="";for(e=0;i>e;e++)o+='<div class="inline-stocks__grid-item inline-stocks__grid-item_first">'+n[2*e]+"</div>",s+=n[2*e+1]?'<div class="inline-stocks__grid-item">'+n[2*e+1]+"</div>":"";return'<tr class="inline-stocks__grid-row"><td>'+o+"</td><td>"+s+"</td></tr>";
}),views("inline-stocks__tables",function(t,e,n){var i,o=t.blocks;return o?(i=o.map(function(t,e){return t.i=e,"cash_rate"===t.type&&(t.type="cash"),n("inline-stocks__block-content",t)}),n("inline-stocks__grid",{data:i})):""}),views("inline-stocks__val",'<td><i class="inline-stocks__cell">[% value %]</i></td>'),views("home-link",function(t,e,n){var i="a",o=t.attrs||{},s=t.mods||{},r=t.inlineIcon||"";return t.href?o.href=t.href:i="span",t.title&&(o.title=t.title),t.target&&(o.target=t.target),n("home-link__tmpl",{attrs:o,tag:i,mix:t.mix,mods:s,content:t.content,stat:t.stat,icon:r})}),views("home-link__tmpl",'<[% data:tag %] class="[% bem:home-link.class %]"[% bem:attrs %][% data:stat %]>[% data:icon %][% data:content %]</[% tag %]>'),views("input__ahead",'<div class="input__ahead"><input class="input__ahead-hint" type="text" disabled="disabled" aria-hidden="true"><span class="input__ahead-filler"></span><div class="input__ahead-hintholder"></div></div>'),views("b-banner__sizernd",function(t){var e=Math.floor(Math.random()*Number(t.width)/10),n=Math.floor(Math.random()*Number(t.height)/10);return{width:"calc("+(Number(t.width)-e)+"px + "+e+"px)",height:"calc("+(Number(t.height)-n)+"px + "+n+"px)"}}),views("b-banner__link",'<a href="[% data:url %]" target=_blank>[% data:content %]</a>'),views("b-banner__imgrnd",'<img class="[% cls %]" alt="[% alt %]" src="[% src %]">'),views("b-banner__img","<img [% bem:attrs %]>"),views("b-banner__iframe",'<iframe class="banner-iframe" name="[% data:name %]" src="[% data:src %]" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"  width="728" height="90"></iframe>'),views("etrains__draw",function(t,e,n){var i,o,s="",r=[],a=(t.from||"").replace(/\s*\(.*$/,""),u=(t.to||"").replace(/\s*\(.*$/,""),c=t.today,l=t.tomorrow,h="rasp."+t.counterType+".track";if(c&&c.length||l&&l.length){if(c&&c.length)for(i=0,o=c.length;o>i;i++)r.push(n("etrains__onerow",{row:c[i],host:t.host,counter:h}));if(l&&l.length)for(i=0,o=l.length;o>i;i++)r.push(n("etrains__onerow",{row:l[i],host:t.host,counter:h}));s=n("etrains__track",{direction:n("etrains__directionLayout",{stfrom:a,stto:u}),times:r.join(""),trackClass:t.direction?"fwd":"rev"})}return s}),views("etrains__onerow",function(t,e,n){var i,o=t.row;return i=o.uid?t.host+"thread/"+o.uid:"javascript:void(0)",n("etrains__time",{href:i,hint:n("etrains__hint",{express:o.express?"&#32;":"",name:o.name||o.title}),time:o.stime||o.departure,timeClass:o.express?" etrains__time_express":"",stat:e.stat.getAdaptiveCounter(t.counter)})}),views("etrains__hint",'<div class="etrains__hint"><span class="etrains__hint-baloon"><i class="etrains__hint-baloon-tail-bd"></i><i class="etrains__hint-baloon-tail"></i><span class="inline-stocks__item__baloon_inner">[% express %][% name %]</span></span></div>'),views("etrains__directionLayout",'<span class="etrains__direction link link_black_yes">&#8203;[% stfrom %]&nbsp; [% stto %]</span>'),views("etrains__time",'<li class="etrains__track-time"><a href="[% href %]" class="link link_black_yes etrains__time[% timeClass %]"[% stat %][% target %]>[% time %]</a>[% hint %]</li>'),views("etrains__trackEmpty",'<div class="etrains__track">[% text %]</div>'),views("etrains__track",'<span class="etrains__track etrains__track-[% trackClass %]">[% direction %]<ul class="etrains__times-list">[% times %]</ul></span>'),views("i-install-download__content",'<div class="[% bem:i-install-download__content.class %]" [% bem:attrs %] data-bem="[% bem:js %]"><div class="i-install-download__target-pointer"><div class="i-install-download__arrow"><div class="i-install-download__stick"></div></div></div><div class="i-install-download__install-text">[% text %]</div><div class="i-install-download__agreement">[% legalText %] <a href="[% legalLink %]" class="link link_gray_yes i-install-download__legal">[% legalLinkText %]</a></div></div>'),views("popup",function(t){var e=t.mods||{},n=t.attrs||{};return e.theme=e.theme||"ffffff",void 0===e.autoclosable&&(e.autoclosable="yes"),void 0===e.adaptive&&(e.adaptive="yes"),void 0===e.animate&&(e.animate="yes"),t.zIndex&&(n.style=n.style||"",n.style+="z-index:"+t.zIndex),'<div class="i-bem '+home.getBEMClassname("popup",{mods:e,mix:t.mix})+'" data-bem="{&quot;popup&quot;:'+home.getBEMParams(t.js?t.js:[])+(t.jsMix?","+t.jsMix:"")+'}"'+home.getAttributes(n)+'><div class="'+home.getBEMClassname("popup__under",{mods:t.underMods,mix:t.underMix})+'"></div>'+(t.tail?'<i class="popup__tail"></i>':"")+(t.content?'<div class="'+home.getBEMClassname("popup__content",{mods:t.contentMods,mix:t.contentMix})+'">'+t.content+"</div>":"")+("yes"===e["has-close"]?'<i class="popup__close"'+(t.statClose||"")+">"+(t.closeText?'<div class="popup__close-text">'+t.closeText+"</div>":"")+"</i>":"")+"</div>"})}();if(window.home&&home.mark){home.mark.add("main-js_end");}